!function(g){var I={};function C(c){if(I[c])return I[c].exports;var t=I[c]={i:c,l:!1,exports:{}};return g[c].call(t.exports,t,t.exports,C),t.l=!0,t.exports}C.m=g,C.c=I,C.d=function(g,I,c){C.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:c})},C.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},C.t=function(g,I){if(1&I&&(g=C(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var c=Object.create(null);if(C.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var t in g)C.d(c,t,function(I){return g[I]}.bind(null,t));return c},C.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(I,"a",I),I},C.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},C.p="",C(C.s=48)}({2:function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = {\n    setTabNextFocus: function (focusParams) {\n        var KEYCODE_TAB = 9;\n        var isTabPressed = (focusParams.event.key === 'Tab' || focusParams.event.keyCode === KEYCODE_TAB);\n\n        if (!isTabPressed) {\n            return;\n        }\n\n        var firstFocusableEl = $(focusParams.containerSelector + ' ' + focusParams.firstElementSelector);\n        var lastFocusableEl = $(focusParams.containerSelector + ' ' + focusParams.lastElementSelector);\n\n        if ($(focusParams.containerSelector + ' ' + focusParams.lastElementSelector).is(':disabled')) {\n            lastFocusableEl = $(focusParams.containerSelector + ' ' + focusParams.nextToLastElementSelector);\n            if ($('.product-quickview.product-set').length > 0) {\n                var linkElements = $(focusParams.containerSelector + ' a#fa-link.share-icons');\n                lastFocusableEl = linkElements[linkElements.length - 1];\n            }\n        }\n\n        if (focusParams.event.shiftKey) /* shift + tab */ {\n            if ($(':focus').is(firstFocusableEl)) {\n                lastFocusableEl.focus();\n                focusParams.event.preventDefault();\n            }\n        } else /* tab */ {\n            if ($(':focus').is(lastFocusableEl)) { // eslint-disable-line\n                firstFocusableEl.focus();\n                focusParams.event.preventDefault();\n            }\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zdG9yZWZyb250LXJlZmVyZW5jZS1hcmNoaXRlY3R1cmUvY2FydHJpZGdlcy9hcHBfc3RvcmVmcm9udF9iYXNlL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy9jb21wb25lbnRzL2ZvY3VzLmpzP2FiNmQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIHNldFRhYk5leHRGb2N1czogZnVuY3Rpb24gKGZvY3VzUGFyYW1zKSB7XG4gICAgICAgIHZhciBLRVlDT0RFX1RBQiA9IDk7XG4gICAgICAgIHZhciBpc1RhYlByZXNzZWQgPSAoZm9jdXNQYXJhbXMuZXZlbnQua2V5ID09PSAnVGFiJyB8fCBmb2N1c1BhcmFtcy5ldmVudC5rZXlDb2RlID09PSBLRVlDT0RFX1RBQik7XG5cbiAgICAgICAgaWYgKCFpc1RhYlByZXNzZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmaXJzdEZvY3VzYWJsZUVsID0gJChmb2N1c1BhcmFtcy5jb250YWluZXJTZWxlY3RvciArICcgJyArIGZvY3VzUGFyYW1zLmZpcnN0RWxlbWVudFNlbGVjdG9yKTtcbiAgICAgICAgdmFyIGxhc3RGb2N1c2FibGVFbCA9ICQoZm9jdXNQYXJhbXMuY29udGFpbmVyU2VsZWN0b3IgKyAnICcgKyBmb2N1c1BhcmFtcy5sYXN0RWxlbWVudFNlbGVjdG9yKTtcblxuICAgICAgICBpZiAoJChmb2N1c1BhcmFtcy5jb250YWluZXJTZWxlY3RvciArICcgJyArIGZvY3VzUGFyYW1zLmxhc3RFbGVtZW50U2VsZWN0b3IpLmlzKCc6ZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgbGFzdEZvY3VzYWJsZUVsID0gJChmb2N1c1BhcmFtcy5jb250YWluZXJTZWxlY3RvciArICcgJyArIGZvY3VzUGFyYW1zLm5leHRUb0xhc3RFbGVtZW50U2VsZWN0b3IpO1xuICAgICAgICAgICAgaWYgKCQoJy5wcm9kdWN0LXF1aWNrdmlldy5wcm9kdWN0LXNldCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlua0VsZW1lbnRzID0gJChmb2N1c1BhcmFtcy5jb250YWluZXJTZWxlY3RvciArICcgYSNmYS1saW5rLnNoYXJlLWljb25zJyk7XG4gICAgICAgICAgICAgICAgbGFzdEZvY3VzYWJsZUVsID0gbGlua0VsZW1lbnRzW2xpbmtFbGVtZW50cy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb2N1c1BhcmFtcy5ldmVudC5zaGlmdEtleSkgLyogc2hpZnQgKyB0YWIgKi8ge1xuICAgICAgICAgICAgaWYgKCQoJzpmb2N1cycpLmlzKGZpcnN0Rm9jdXNhYmxlRWwpKSB7XG4gICAgICAgICAgICAgICAgbGFzdEZvY3VzYWJsZUVsLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgZm9jdXNQYXJhbXMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIC8qIHRhYiAqLyB7XG4gICAgICAgICAgICBpZiAoJCgnOmZvY3VzJykuaXMobGFzdEZvY3VzYWJsZUVsKSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICAgICAgZmlyc3RGb2N1c2FibGVFbC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGZvY3VzUGFyYW1zLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n")},3:function(module,exports,__webpack_require__){"use strict";eval("\r\n\r\n/* global $, document, Clyde, ClydeSitePreferences */\r\n\r\nvar clydeWidget;\r\nvar elem = document.querySelector('.product-number span');\r\nvar productId = elem ? elem.textContent : null;\r\n\r\nif (window.ClydeSitePreferences && window.ClydeSitePreferences.CLYDE_WIDGET_ENABLED == true && Clyde && !Clyde.checkReady() && productId) {\r\n    Clyde.init({\r\n        key: ClydeSitePreferences.CLYDE_API_KEY,\r\n        defaultSelector: '#clyde-cta',\r\n        skipGeoIp: ClydeSitePreferences.CLYDE_SKIP_GEO_IP\r\n    }, function () {\r\n        var clydeWidgetHandler = Clyde.getSettings();\r\n        if (clydeWidgetHandler.productPage === true) {\r\n            Clyde.setActiveProduct(productId);\r\n        }\r\n    });\r\n}\r\n\r\nclydeWidget = {\r\n    getSelectedClydeContract: function (form) {\r\n        var clydeContract = Clyde.getSelectedContract();\r\n        if (clydeContract) {\r\n            if (document.getElementById('clydeContractSku')) {\r\n                form.find('#clydeContractSku').attr('value', clydeContract.sku);\r\n                form.find('#clydeContractPrice').attr('value', clydeContract.recommendedPrice);\r\n            } else {\r\n                var clydeForm = form;\r\n                clydeForm.clydeContractSku = clydeContract.sku;\r\n                clydeForm.clydeContractPrice = clydeContract.recommendedPrice;\r\n                return clydeForm;\r\n            }\r\n        }\r\n        return form;\r\n    },\r\n    getClydeVariantChange: function (variantId) {\r\n        if (window.ClydeSitePreferences.CLYDE_WIDGET_ENABLED == true && Clyde && variantId) {\r\n            var previousId = Clyde.getActiveProduct() ? Clyde.getActiveProduct().sku : null;\r\n            // If there was no active variant, or the previous one is different from the new one\r\n            if (previousId && previousId !== variantId) {\r\n                Clyde.setActiveProduct(variantId);\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nmodule.exports = clydeWidget;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2ludF9jbHlkZV9zZnJhL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy9nZXRDbHlkZVdpZGdldC5qcz84MmJlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG4vKiBnbG9iYWwgJCwgZG9jdW1lbnQsIENseWRlLCBDbHlkZVNpdGVQcmVmZXJlbmNlcyAqL1xyXG5cclxudmFyIGNseWRlV2lkZ2V0O1xyXG52YXIgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LW51bWJlciBzcGFuJyk7XHJcbnZhciBwcm9kdWN0SWQgPSBlbGVtID8gZWxlbS50ZXh0Q29udGVudCA6IG51bGw7XHJcblxyXG5pZiAod2luZG93LkNseWRlU2l0ZVByZWZlcmVuY2VzICYmIHdpbmRvdy5DbHlkZVNpdGVQcmVmZXJlbmNlcy5DTFlERV9XSURHRVRfRU5BQkxFRCA9PSB0cnVlICYmIENseWRlICYmICFDbHlkZS5jaGVja1JlYWR5KCkgJiYgcHJvZHVjdElkKSB7XHJcbiAgICBDbHlkZS5pbml0KHtcclxuICAgICAgICBrZXk6IENseWRlU2l0ZVByZWZlcmVuY2VzLkNMWURFX0FQSV9LRVksXHJcbiAgICAgICAgZGVmYXVsdFNlbGVjdG9yOiAnI2NseWRlLWN0YScsXHJcbiAgICAgICAgc2tpcEdlb0lwOiBDbHlkZVNpdGVQcmVmZXJlbmNlcy5DTFlERV9TS0lQX0dFT19JUFxyXG4gICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjbHlkZVdpZGdldEhhbmRsZXIgPSBDbHlkZS5nZXRTZXR0aW5ncygpO1xyXG4gICAgICAgIGlmIChjbHlkZVdpZGdldEhhbmRsZXIucHJvZHVjdFBhZ2UgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgQ2x5ZGUuc2V0QWN0aXZlUHJvZHVjdChwcm9kdWN0SWQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5jbHlkZVdpZGdldCA9IHtcclxuICAgIGdldFNlbGVjdGVkQ2x5ZGVDb250cmFjdDogZnVuY3Rpb24gKGZvcm0pIHtcclxuICAgICAgICB2YXIgY2x5ZGVDb250cmFjdCA9IENseWRlLmdldFNlbGVjdGVkQ29udHJhY3QoKTtcclxuICAgICAgICBpZiAoY2x5ZGVDb250cmFjdCkge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NseWRlQ29udHJhY3RTa3UnKSkge1xyXG4gICAgICAgICAgICAgICAgZm9ybS5maW5kKCcjY2x5ZGVDb250cmFjdFNrdScpLmF0dHIoJ3ZhbHVlJywgY2x5ZGVDb250cmFjdC5za3UpO1xyXG4gICAgICAgICAgICAgICAgZm9ybS5maW5kKCcjY2x5ZGVDb250cmFjdFByaWNlJykuYXR0cigndmFsdWUnLCBjbHlkZUNvbnRyYWN0LnJlY29tbWVuZGVkUHJpY2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNseWRlRm9ybSA9IGZvcm07XHJcbiAgICAgICAgICAgICAgICBjbHlkZUZvcm0uY2x5ZGVDb250cmFjdFNrdSA9IGNseWRlQ29udHJhY3Quc2t1O1xyXG4gICAgICAgICAgICAgICAgY2x5ZGVGb3JtLmNseWRlQ29udHJhY3RQcmljZSA9IGNseWRlQ29udHJhY3QucmVjb21tZW5kZWRQcmljZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjbHlkZUZvcm07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZvcm07XHJcbiAgICB9LFxyXG4gICAgZ2V0Q2x5ZGVWYXJpYW50Q2hhbmdlOiBmdW5jdGlvbiAodmFyaWFudElkKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5DbHlkZVNpdGVQcmVmZXJlbmNlcy5DTFlERV9XSURHRVRfRU5BQkxFRCA9PSB0cnVlICYmIENseWRlICYmIHZhcmlhbnRJZCkge1xyXG4gICAgICAgICAgICB2YXIgcHJldmlvdXNJZCA9IENseWRlLmdldEFjdGl2ZVByb2R1Y3QoKSA/IENseWRlLmdldEFjdGl2ZVByb2R1Y3QoKS5za3UgOiBudWxsO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSB3YXMgbm8gYWN0aXZlIHZhcmlhbnQsIG9yIHRoZSBwcmV2aW91cyBvbmUgaXMgZGlmZmVyZW50IGZyb20gdGhlIG5ldyBvbmVcclxuICAgICAgICAgICAgaWYgKHByZXZpb3VzSWQgJiYgcHJldmlvdXNJZCAhPT0gdmFyaWFudElkKSB7XHJcbiAgICAgICAgICAgICAgICBDbHlkZS5zZXRBY3RpdmVQcm9kdWN0KHZhcmlhbnRJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNseWRlV2lkZ2V0O1xyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n")},4:function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = function (include) {\n    if (typeof include === 'function') {\n        include();\n    } else if (typeof include === 'object') {\n        Object.keys(include).forEach(function (key) {\n            if (typeof include[key] === 'function') {\n                include[key]();\n            }\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zdG9yZWZyb250LXJlZmVyZW5jZS1hcmNoaXRlY3R1cmUvY2FydHJpZGdlcy9hcHBfc3RvcmVmcm9udF9iYXNlL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy91dGlsLmpzPzRkZDQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EiLCJmaWxlIjoiNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaW5jbHVkZSkge1xuICAgIGlmICh0eXBlb2YgaW5jbHVkZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpbmNsdWRlKCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgaW5jbHVkZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoaW5jbHVkZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGluY2x1ZGVba2V5XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGluY2x1ZGVba2V5XSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n")},48:function(module,exports,__webpack_require__){"use strict";eval("\r\n\r\n/* global $, document, Clyde, ClydeSitePreferences */\r\n\r\nvar processInclude = __webpack_require__(4);\r\n\r\n$(document).ready(function () {\r\n    processInclude(__webpack_require__(49));\r\n});\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2ludF9jbHlkZV9zZnJhL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy9wcm9kdWN0RGV0YWlsLmpzPzI5ZmYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7O0FBRUEscUJBQXFCLG1CQUFPLENBQUMsQ0FBVzs7QUFFeEM7QUFDQSxtQkFBbUIsbUJBQU8sQ0FBQyxFQUFrQjtBQUM3QyxDQUFDIiwiZmlsZSI6IjQ4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuLyogZ2xvYmFsICQsIGRvY3VtZW50LCBDbHlkZSwgQ2x5ZGVTaXRlUHJlZmVyZW5jZXMgKi9cclxuXHJcbnZhciBwcm9jZXNzSW5jbHVkZSA9IHJlcXVpcmUoJ2Jhc2UvdXRpbCcpO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgcHJvY2Vzc0luY2x1ZGUocmVxdWlyZSgnLi9wcm9kdWN0L2RldGFpbCcpKTtcclxufSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///48\n")},49:function(module,exports,__webpack_require__){"use strict";eval("\r\n\r\n/* global $, document, Clyde, ClydeSitePreferences */\r\n\r\nvar base = __webpack_require__(50);\r\nvar clydeWidget = __webpack_require__(3);\r\n\r\n/**\r\n * @description Get clyde widget on variant change\r\n * @param {Object} response - response object\r\n */\r\nfunction getClydeVariantChange(response) {\r\n    clydeWidget.getClydeVariantChange(response.data.product.id);\r\n}\r\n\r\nmodule.exports = {\r\n    availability: base.availability,\r\n\r\n    addToCart: base.addToCart,\r\n\r\n    updateAttributesAndDetails: function () {\r\n        $('body').on('product:statusUpdate', function (e, data) {\r\n            var $productContainer = $('.product-detail[data-pid=\"' + data.id + '\"]');\r\n\r\n            $productContainer.find('.description-and-detail .product-attributes')\r\n                .empty()\r\n                .html(data.attributesHtml);\r\n\r\n            if (data.shortDescription) {\r\n                $productContainer.find('.description-and-detail .description')\r\n                    .removeClass('hidden-xl-down');\r\n                $productContainer.find('.description-and-detail .description .content')\r\n                    .empty()\r\n                    .html(data.shortDescription);\r\n            } else {\r\n                $productContainer.find('.description-and-detail .description')\r\n                    .addClass('hidden-xl-down');\r\n            }\r\n\r\n            if (data.longDescription) {\r\n                $productContainer.find('.description-and-detail .details')\r\n                    .removeClass('hidden-xl-down');\r\n                $productContainer.find('.description-and-detail .details .content')\r\n                    .empty()\r\n                    .html(data.longDescription);\r\n            } else {\r\n                $productContainer.find('.description-and-detail .details')\r\n                    .addClass('hidden-xl-down');\r\n            }\r\n        });\r\n    },\r\n\r\n    showSpinner: function () {\r\n        $('body').on('product:beforeAddToCart product:beforeAttributeSelect', function () {\r\n            $.spinner().start();\r\n        });\r\n    },\r\n    updateAttribute: function () {\r\n        $('body').on('product:afterAttributeSelect', function (e, response) {\r\n            if ($('.product-detail>.bundle-items').length) {\r\n                response.container.data('pid', response.data.product.id);\r\n                response.container.find('.product-id').text(response.data.product.id);\r\n            } else if ($('.product-set-detail').eq(0)) {\r\n                response.container.data('pid', response.data.product.id);\r\n                response.container.find('.product-id').text(response.data.product.id);\r\n                getClydeVariantChange(response);\r\n            } else {\r\n                $('.product-id').text(response.data.product.id);\r\n                $('.product-detail:not(\".bundle-item\")').data('pid', response.data.product.id);\r\n            }\r\n        });\r\n    },\r\n    updateAddToCart: function () {\r\n        $('body').on('product:updateAddToCart', function (e, response) {\r\n            // update local add to cart (for sets)\r\n            $('button.add-to-cart', response.$productContainer).attr('disabled',\r\n                (!response.product.readyToOrder || !response.product.available));\r\n\r\n            var enable = $('.product-availability').toArray().every(function (item) {\r\n                return $(item).data('available') && $(item).data('ready-to-order');\r\n            });\r\n            $('button.add-to-cart-global').attr('disabled', !enable);\r\n        });\r\n    },\r\n    updateAvailability: function () {\r\n        $('body').on('product:updateAvailability', function (e, response) {\r\n            $('div.availability', response.$productContainer)\r\n                .data('ready-to-order', response.product.readyToOrder)\r\n                .data('available', response.product.available);\r\n\r\n            $('.availability-msg', response.$productContainer)\r\n                .empty().html(response.message);\r\n\r\n            if ($('.global-availability').length) {\r\n                var allAvailable = $('.product-availability').toArray()\r\n                    .every(function (item) { return $(item).data('available'); });\r\n\r\n                var allReady = $('.product-availability').toArray()\r\n                    .every(function (item) { return $(item).data('ready-to-order'); });\r\n\r\n                $('.global-availability')\r\n                    .data('ready-to-order', allReady)\r\n                    .data('available', allAvailable);\r\n\r\n                $('.global-availability .availability-msg').empty()\r\n                    .html(allReady ? response.message : response.resources.info_selectforstock);\r\n            }\r\n        });\r\n    },\r\n    sizeChart: function () {\r\n        $('.size-chart a').on('click', function (e) {\r\n            e.preventDefault();\r\n            var url = $(this).attr('href');\r\n            var $prodSizeChart = $(this).closest('.size-chart').find('.size-chart-collapsible');\r\n            if ($prodSizeChart.is(':empty')) {\r\n                $.ajax({\r\n                    url: url,\r\n                    type: 'get',\r\n                    dataType: 'json',\r\n                    success: function (data) {\r\n                        $prodSizeChart.append(data.content);\r\n                    }\r\n                });\r\n            }\r\n            $prodSizeChart.toggleClass('active');\r\n        });\r\n\r\n        var $sizeChart = $('.size-chart-collapsible');\r\n        $('body').on('click touchstart', function (e) {\r\n            if ($('.size-chart').has(e.target).length <= 0) {\r\n                $sizeChart.removeClass('active');\r\n            }\r\n        });\r\n    },\r\n    copyProductLink: function () {\r\n        $('body').on('click', '#fa-link', function () {\r\n            event.preventDefault();\r\n            var $temp = $('<input>');\r\n            $('body').append($temp);\r\n            $temp.val($('#shareUrl').val()).select();\r\n            document.execCommand('copy');\r\n            $temp.remove();\r\n            $('.copy-link-message').attr('role', 'alert');\r\n            $('.copy-link-message').removeClass('d-none');\r\n            setTimeout(function () {\r\n                $('.copy-link-message').addClass('d-none');\r\n            }, 3000);\r\n        });\r\n    },\r\n\r\n    focusChooseBonusProductModal: base.focusChooseBonusProductModal()\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2ludF9jbHlkZV9zZnJhL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy9wcm9kdWN0L2RldGFpbC5qcz8zYTQwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBLFdBQVcsbUJBQU8sQ0FBQyxFQUFRO0FBQzNCLGtCQUFrQixtQkFBTyxDQUFDLENBQXNCOztBQUVoRDtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRDQUE0QyxrQ0FBa0MsRUFBRTs7QUFFaEY7QUFDQSw0Q0FBNEMsdUNBQXVDLEVBQUU7O0FBRXJGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBIiwiZmlsZSI6IjQ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuLyogZ2xvYmFsICQsIGRvY3VtZW50LCBDbHlkZSwgQ2x5ZGVTaXRlUHJlZmVyZW5jZXMgKi9cclxuXHJcbnZhciBiYXNlID0gcmVxdWlyZSgnLi9iYXNlJyk7XHJcbnZhciBjbHlkZVdpZGdldCA9IHJlcXVpcmUoJy4uL2dldENseWRlV2lkZ2V0LmpzJyk7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uIEdldCBjbHlkZSB3aWRnZXQgb24gdmFyaWFudCBjaGFuZ2VcclxuICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlIC0gcmVzcG9uc2Ugb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRDbHlkZVZhcmlhbnRDaGFuZ2UocmVzcG9uc2UpIHtcclxuICAgIGNseWRlV2lkZ2V0LmdldENseWRlVmFyaWFudENoYW5nZShyZXNwb25zZS5kYXRhLnByb2R1Y3QuaWQpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGF2YWlsYWJpbGl0eTogYmFzZS5hdmFpbGFiaWxpdHksXHJcblxyXG4gICAgYWRkVG9DYXJ0OiBiYXNlLmFkZFRvQ2FydCxcclxuXHJcbiAgICB1cGRhdGVBdHRyaWJ1dGVzQW5kRGV0YWlsczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJ2JvZHknKS5vbigncHJvZHVjdDpzdGF0dXNVcGRhdGUnLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgJHByb2R1Y3RDb250YWluZXIgPSAkKCcucHJvZHVjdC1kZXRhaWxbZGF0YS1waWQ9XCInICsgZGF0YS5pZCArICdcIl0nKTtcclxuXHJcbiAgICAgICAgICAgICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5kZXNjcmlwdGlvbi1hbmQtZGV0YWlsIC5wcm9kdWN0LWF0dHJpYnV0ZXMnKVxyXG4gICAgICAgICAgICAgICAgLmVtcHR5KClcclxuICAgICAgICAgICAgICAgIC5odG1sKGRhdGEuYXR0cmlidXRlc0h0bWwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hvcnREZXNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgJHByb2R1Y3RDb250YWluZXIuZmluZCgnLmRlc2NyaXB0aW9uLWFuZC1kZXRhaWwgLmRlc2NyaXB0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2hpZGRlbi14bC1kb3duJyk7XHJcbiAgICAgICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lci5maW5kKCcuZGVzY3JpcHRpb24tYW5kLWRldGFpbCAuZGVzY3JpcHRpb24gLmNvbnRlbnQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5lbXB0eSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoZGF0YS5zaG9ydERlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5kZXNjcmlwdGlvbi1hbmQtZGV0YWlsIC5kZXNjcmlwdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdoaWRkZW4teGwtZG93bicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0YS5sb25nRGVzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5kZXNjcmlwdGlvbi1hbmQtZGV0YWlsIC5kZXRhaWxzJylcclxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2hpZGRlbi14bC1kb3duJyk7XHJcbiAgICAgICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lci5maW5kKCcuZGVzY3JpcHRpb24tYW5kLWRldGFpbCAuZGV0YWlscyAuY29udGVudCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmVtcHR5KClcclxuICAgICAgICAgICAgICAgICAgICAuaHRtbChkYXRhLmxvbmdEZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lci5maW5kKCcuZGVzY3JpcHRpb24tYW5kLWRldGFpbCAuZGV0YWlscycpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdoaWRkZW4teGwtZG93bicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dTcGlubmVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnYm9keScpLm9uKCdwcm9kdWN0OmJlZm9yZUFkZFRvQ2FydCBwcm9kdWN0OmJlZm9yZUF0dHJpYnV0ZVNlbGVjdCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RhcnQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICB1cGRhdGVBdHRyaWJ1dGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCdib2R5Jykub24oJ3Byb2R1Y3Q6YWZ0ZXJBdHRyaWJ1dGVTZWxlY3QnLCBmdW5jdGlvbiAoZSwgcmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYgKCQoJy5wcm9kdWN0LWRldGFpbD4uYnVuZGxlLWl0ZW1zJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZS5jb250YWluZXIuZGF0YSgncGlkJywgcmVzcG9uc2UuZGF0YS5wcm9kdWN0LmlkKTtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmNvbnRhaW5lci5maW5kKCcucHJvZHVjdC1pZCcpLnRleHQocmVzcG9uc2UuZGF0YS5wcm9kdWN0LmlkKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgkKCcucHJvZHVjdC1zZXQtZGV0YWlsJykuZXEoMCkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmNvbnRhaW5lci5kYXRhKCdwaWQnLCByZXNwb25zZS5kYXRhLnByb2R1Y3QuaWQpO1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuY29udGFpbmVyLmZpbmQoJy5wcm9kdWN0LWlkJykudGV4dChyZXNwb25zZS5kYXRhLnByb2R1Y3QuaWQpO1xyXG4gICAgICAgICAgICAgICAgZ2V0Q2x5ZGVWYXJpYW50Q2hhbmdlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5wcm9kdWN0LWlkJykudGV4dChyZXNwb25zZS5kYXRhLnByb2R1Y3QuaWQpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnByb2R1Y3QtZGV0YWlsOm5vdChcIi5idW5kbGUtaXRlbVwiKScpLmRhdGEoJ3BpZCcsIHJlc3BvbnNlLmRhdGEucHJvZHVjdC5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICB1cGRhdGVBZGRUb0NhcnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCdib2R5Jykub24oJ3Byb2R1Y3Q6dXBkYXRlQWRkVG9DYXJ0JywgZnVuY3Rpb24gKGUsIHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBsb2NhbCBhZGQgdG8gY2FydCAoZm9yIHNldHMpXHJcbiAgICAgICAgICAgICQoJ2J1dHRvbi5hZGQtdG8tY2FydCcsIHJlc3BvbnNlLiRwcm9kdWN0Q29udGFpbmVyKS5hdHRyKCdkaXNhYmxlZCcsXHJcbiAgICAgICAgICAgICAgICAoIXJlc3BvbnNlLnByb2R1Y3QucmVhZHlUb09yZGVyIHx8ICFyZXNwb25zZS5wcm9kdWN0LmF2YWlsYWJsZSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVuYWJsZSA9ICQoJy5wcm9kdWN0LWF2YWlsYWJpbGl0eScpLnRvQXJyYXkoKS5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQoaXRlbSkuZGF0YSgnYXZhaWxhYmxlJykgJiYgJChpdGVtKS5kYXRhKCdyZWFkeS10by1vcmRlcicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCgnYnV0dG9uLmFkZC10by1jYXJ0LWdsb2JhbCcpLmF0dHIoJ2Rpc2FibGVkJywgIWVuYWJsZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgdXBkYXRlQXZhaWxhYmlsaXR5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnYm9keScpLm9uKCdwcm9kdWN0OnVwZGF0ZUF2YWlsYWJpbGl0eScsIGZ1bmN0aW9uIChlLCByZXNwb25zZSkge1xyXG4gICAgICAgICAgICAkKCdkaXYuYXZhaWxhYmlsaXR5JywgcmVzcG9uc2UuJHByb2R1Y3RDb250YWluZXIpXHJcbiAgICAgICAgICAgICAgICAuZGF0YSgncmVhZHktdG8tb3JkZXInLCByZXNwb25zZS5wcm9kdWN0LnJlYWR5VG9PcmRlcilcclxuICAgICAgICAgICAgICAgIC5kYXRhKCdhdmFpbGFibGUnLCByZXNwb25zZS5wcm9kdWN0LmF2YWlsYWJsZSk7XHJcblxyXG4gICAgICAgICAgICAkKCcuYXZhaWxhYmlsaXR5LW1zZycsIHJlc3BvbnNlLiRwcm9kdWN0Q29udGFpbmVyKVxyXG4gICAgICAgICAgICAgICAgLmVtcHR5KCkuaHRtbChyZXNwb25zZS5tZXNzYWdlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkKCcuZ2xvYmFsLWF2YWlsYWJpbGl0eScpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFsbEF2YWlsYWJsZSA9ICQoJy5wcm9kdWN0LWF2YWlsYWJpbGl0eScpLnRvQXJyYXkoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5ldmVyeShmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gJChpdGVtKS5kYXRhKCdhdmFpbGFibGUnKTsgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFsbFJlYWR5ID0gJCgnLnByb2R1Y3QtYXZhaWxhYmlsaXR5JykudG9BcnJheSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiAkKGl0ZW0pLmRhdGEoJ3JlYWR5LXRvLW9yZGVyJyk7IH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICQoJy5nbG9iYWwtYXZhaWxhYmlsaXR5JylcclxuICAgICAgICAgICAgICAgICAgICAuZGF0YSgncmVhZHktdG8tb3JkZXInLCBhbGxSZWFkeSlcclxuICAgICAgICAgICAgICAgICAgICAuZGF0YSgnYXZhaWxhYmxlJywgYWxsQXZhaWxhYmxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKCcuZ2xvYmFsLWF2YWlsYWJpbGl0eSAuYXZhaWxhYmlsaXR5LW1zZycpLmVtcHR5KClcclxuICAgICAgICAgICAgICAgICAgICAuaHRtbChhbGxSZWFkeSA/IHJlc3BvbnNlLm1lc3NhZ2UgOiByZXNwb25zZS5yZXNvdXJjZXMuaW5mb19zZWxlY3Rmb3JzdG9jayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBzaXplQ2hhcnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuc2l6ZS1jaGFydCBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgICAgIHZhciAkcHJvZFNpemVDaGFydCA9ICQodGhpcykuY2xvc2VzdCgnLnNpemUtY2hhcnQnKS5maW5kKCcuc2l6ZS1jaGFydC1jb2xsYXBzaWJsZScpO1xyXG4gICAgICAgICAgICBpZiAoJHByb2RTaXplQ2hhcnQuaXMoJzplbXB0eScpKSB7XHJcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHByb2RTaXplQ2hhcnQuYXBwZW5kKGRhdGEuY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHByb2RTaXplQ2hhcnQudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgJHNpemVDaGFydCA9ICQoJy5zaXplLWNoYXJ0LWNvbGxhcHNpYmxlJyk7XHJcbiAgICAgICAgJCgnYm9keScpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCQoJy5zaXplLWNoYXJ0JykuaGFzKGUudGFyZ2V0KS5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgJHNpemVDaGFydC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBjb3B5UHJvZHVjdExpbms6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJyNmYS1saW5rJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgJHRlbXAgPSAkKCc8aW5wdXQ+Jyk7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJHRlbXApO1xyXG4gICAgICAgICAgICAkdGVtcC52YWwoJCgnI3NoYXJlVXJsJykudmFsKCkpLnNlbGVjdCgpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpO1xyXG4gICAgICAgICAgICAkdGVtcC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgJCgnLmNvcHktbGluay1tZXNzYWdlJykuYXR0cigncm9sZScsICdhbGVydCcpO1xyXG4gICAgICAgICAgICAkKCcuY29weS1saW5rLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnZC1ub25lJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmNvcHktbGluay1tZXNzYWdlJykuYWRkQ2xhc3MoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgZm9jdXNDaG9vc2VCb251c1Byb2R1Y3RNb2RhbDogYmFzZS5mb2N1c0Nob29zZUJvbnVzUHJvZHVjdE1vZGFsKClcclxufTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///49\n")},50:function(module,exports,__webpack_require__){"use strict";eval("\r\n\r\n /* eslint-disable */\r\n/* global $, document, Clyde, ClydeSitePreferences */\r\n\r\nvar focusHelper = __webpack_require__(2);\r\nvar clydeWidget = __webpack_require__(3);\r\n\r\n/**\r\n * function used to add clyde product into cart\r\n */\r\nfunction clydeAddProductToCart() {\r\n    var addToCartUrl;\r\n    var pid;\r\n    var pidsObj;\r\n    var setPids;\r\n    $('body').trigger('product:beforeAddToCart', this);\r\n\r\n    if ($('.set-items').length && $(this).hasClass('add-to-cart-global')) {\r\n        setPids = [];\r\n\r\n        $('.product-detail').each(function () {\r\n            if (!$(this).hasClass('product-set-detail')) {\r\n                setPids.push({\r\n                    pid: $(this).find('.product-id').text(),\r\n                    qty: $(this).find('.quantity-select').val(),\r\n                    options: getOptions($(this))\r\n                });\r\n            }\r\n        });\r\n        pidsObj = JSON.stringify(setPids);\r\n    }\r\n\r\n    pid = getPidValue($(this));\r\n\r\n    var $productContainer = $(this).closest('.product-detail');\r\n    if (!$productContainer.length) {\r\n        $productContainer = $(this).closest('.quick-view-dialog').find('.product-detail');\r\n    }\r\n\r\n    addToCartUrl = getAddToCartUrl();\r\n\r\n    var form = {\r\n        pid: pid,\r\n        pidsObj: pidsObj,\r\n        childProducts: getChildProducts(),\r\n        quantity: getQuantitySelected($(this))\r\n    };\r\n\r\n    var clydeWidgets = ClydeSitePreferences.CLYDE_WIDGET_ENABLED;\r\n\r\n    if (clydeWidgets) {\r\n        var selectedContract = Clyde.getSelectedContract();\r\n        if (selectedContract) {\r\n            form = clydeWidget.getSelectedClydeContract(form);\r\n        }\r\n    }\r\n\r\n    if (!$('.bundle-item').length) {\r\n        form.options = getOptions($productContainer);\r\n    }\r\n    $(this).trigger('updateAddToCartFormData', form);\r\n    if (addToCartUrl) {\r\n        $.ajax({\r\n            url: addToCartUrl,\r\n            method: 'POST',\r\n            data: form,\r\n            success: function (data) {\r\n                handlePostCartAdd(data);\r\n                $('body').trigger('product:afterAddToCart', data);\r\n                $.spinner().stop();\r\n                miniCartReportingUrl(data.reportingURL);\r\n            },\r\n            error: function () {\r\n                $.spinner().stop();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Retrieves the relevant pid value\r\n * @param {jquery} $el - DOM container for a given add to cart button\r\n * @return {string} - value to be used when adding product to cart\r\n */\r\nfunction getPidValue($el) {\r\n    var pid;\r\n\r\n    if ($('#quickViewModal').hasClass('show') && !$('.product-set').length) {\r\n        pid = $($el).closest('.modal-content').find('.product-quickview').data('pid');\r\n    } else if ($('.product-set-detail').length || $('.product-set').length) {\r\n        pid = $($el).closest('.product-detail').find('.product-id').text();\r\n    } else {\r\n        pid = $('.product-detail:not(\".bundle-item\")').data('pid');\r\n    }\r\n\r\n    return pid;\r\n}\r\n\r\n/**\r\n * Retrieve contextual quantity selector\r\n * @param {jquery} $el - DOM container for the relevant quantity\r\n * @return {jquery} - quantity selector DOM container\r\n */\r\nfunction getQuantitySelector($el) {\r\n    return $el && $('.set-items').length\r\n        ? $($el).closest('.product-detail').find('.quantity-select')\r\n        : $('.quantity-select');\r\n}\r\n\r\n/**\r\n * Retrieves the value associated with the Quantity pull-down menu\r\n * @param {jquery} $el - DOM container for the relevant quantity\r\n * @return {string} - value found in the quantity input\r\n */\r\nfunction getQuantitySelected($el) {\r\n    return getQuantitySelector($el).val();\r\n}\r\n\r\n/**\r\n * Process the attribute values for an attribute that has image swatches\r\n *\r\n * @param {Object} attr - Attribute\r\n * @param {string} attr.id - Attribute ID\r\n * @param {Object[]} attr.values - Array of attribute value objects\r\n * @param {string} attr.values.value - Attribute coded value\r\n * @param {string} attr.values.url - URL to de/select an attribute value of the product\r\n * @param {boolean} attr.values.isSelectable - Flag as to whether an attribute value can be\r\n *     selected.  If there is no variant that corresponds to a specific combination of attribute\r\n *     values, an attribute may be disabled in the Product Detail Page\r\n * @param {jQuery} $productContainer - DOM container for a given product\r\n * @param {Object} msgs - object containing resource messages\r\n */\r\nfunction processSwatchValues(attr, $productContainer, msgs) {\r\n    attr.values.forEach(function (attrValue) {\r\n        var $attrValue = $productContainer.find('[data-attr=\"' + attr.id + '\"] [data-attr-value=\"' +\r\n            attrValue.value + '\"]');\r\n        var $swatchButton = $attrValue.parent();\r\n\r\n        if (attrValue.selected) {\r\n            $attrValue.addClass('selected');\r\n            $attrValue.siblings('.selected-assistive-text').text(msgs.assistiveSelectedText);\r\n        } else {\r\n            $attrValue.removeClass('selected');\r\n            $attrValue.siblings('.selected-assistive-text').empty();\r\n        }\r\n\r\n        if (attrValue.url) {\r\n            $swatchButton.attr('data-url', attrValue.url);\r\n        } else {\r\n            $swatchButton.removeAttr('data-url');\r\n        }\r\n\r\n        // Disable if not selectable\r\n        $attrValue.removeClass('selectable unselectable');\r\n\r\n        $attrValue.addClass(attrValue.selectable ? 'selectable' : 'unselectable');\r\n    });\r\n}\r\n\r\n/**\r\n * Process attribute values associated with an attribute that does not have image swatches\r\n *\r\n * @param {Object} attr - Attribute\r\n * @param {string} attr.id - Attribute ID\r\n * @param {Object[]} attr.values - Array of attribute value objects\r\n * @param {string} attr.values.value - Attribute coded value\r\n * @param {string} attr.values.url - URL to de/select an attribute value of the product\r\n * @param {boolean} attr.values.isSelectable - Flag as to whether an attribute value can be\r\n *     selected.  If there is no variant that corresponds to a specific combination of attribute\r\n *     values, an attribute may be disabled in the Product Detail Page\r\n * @param {jQuery} $productContainer - DOM container for a given product\r\n */\r\nfunction processNonSwatchValues(attr, $productContainer) {\r\n    var $attr = '[data-attr=\"' + attr.id + '\"]';\r\n    var $defaultOption = $productContainer.find($attr + ' .select-' + attr.id + ' option:first');\r\n    $defaultOption.attr('value', attr.resetUrl);\r\n\r\n    attr.values.forEach(function (attrValue) {\r\n        var $attrValue = $productContainer\r\n            .find($attr + ' [data-attr-value=\"' + attrValue.value + '\"]');\r\n        $attrValue.attr('value', attrValue.url)\r\n            .removeAttr('disabled');\r\n\r\n        if (!attrValue.selectable) {\r\n            $attrValue.attr('disabled', true);\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Routes the handling of attribute processing depending on whether the attribute has image\r\n *     swatches or not\r\n *\r\n * @param {Object} attrs - Attribute\r\n * @param {string} attr.id - Attribute ID\r\n * @param {jQuery} $productContainer - DOM element for a given product\r\n * @param {Object} msgs - object containing resource messages\r\n */\r\nfunction updateAttrs(attrs, $productContainer, msgs) {\r\n    // Currently, the only attribute type that has image swatches is Color.\r\n    var attrsWithSwatches = ['color'];\r\n\r\n    attrs.forEach(function (attr) {\r\n        if (attrsWithSwatches.indexOf(attr.id) > -1) {\r\n            processSwatchValues(attr, $productContainer, msgs);\r\n        } else {\r\n            processNonSwatchValues(attr, $productContainer);\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Updates the availability status in the Product Detail Page\r\n *\r\n * @param {Object} response - Ajax response object after an\r\n *                            attribute value has been [de]selected\r\n * @param {jQuery} $productContainer - DOM element for a given product\r\n */\r\nfunction updateAvailability(response, $productContainer) {\r\n    var availabilityValue = '';\r\n    var availabilityMessages = response.product.availability.messages;\r\n    if (!response.product.readyToOrder) {\r\n        availabilityValue = '<li><div>' + response.resources.info_selectforstock + '</div></li>';\r\n    } else {\r\n        availabilityMessages.forEach(function (message) {\r\n            availabilityValue += '<li><div>' + message + '</div></li>';\r\n        });\r\n    }\r\n\r\n    $($productContainer).trigger('product:updateAvailability', {\r\n        product: response.product,\r\n        $productContainer: $productContainer,\r\n        message: availabilityValue,\r\n        resources: response.resources\r\n    });\r\n}\r\n\r\n/**\r\n * Generates html for product attributes section\r\n *\r\n * @param {array} attributes - list of attributes\r\n * @return {string} - Compiled HTML\r\n */\r\nfunction getAttributesHtml(attributes) {\r\n    if (!attributes) {\r\n        return '';\r\n    }\r\n\r\n    var html = '';\r\n\r\n    attributes.forEach(function (attributeGroup) {\r\n        if (attributeGroup.ID === 'mainAttributes') {\r\n            attributeGroup.attributes.forEach(function (attribute) {\r\n                html += '<div class=\"attribute-values\">' + attribute.label + ': '\r\n                    + attribute.value + '</div>';\r\n            });\r\n        }\r\n    });\r\n\r\n    return html;\r\n}\r\n\r\n/**\r\n * @typedef UpdatedOptionValue\r\n * @type Object\r\n * @property {string} id - Option value ID for look up\r\n * @property {string} url - Updated option value selection URL\r\n */\r\n\r\n/**\r\n * @typedef OptionSelectionResponse\r\n * @type Object\r\n * @property {string} priceHtml - Updated price HTML code\r\n * @property {Object} options - Updated Options\r\n * @property {string} options.id - Option ID\r\n * @property {UpdatedOptionValue[]} options.values - Option values\r\n */\r\n\r\n/**\r\n * Updates DOM using post-option selection Ajax response\r\n *\r\n * @param {OptionSelectionResponse} optionsHtml - Ajax response optionsHtml from selecting a product option\r\n * @param {jQuery} $productContainer - DOM element for current product\r\n */\r\nfunction updateOptions(optionsHtml, $productContainer) {\r\n\t// Update options\r\n    $productContainer.find('.product-options').empty().html(optionsHtml);\r\n}\r\n\r\n/**\r\n * Dynamically creates Bootstrap carousel from response containing images\r\n * @param {Object[]} imgs - Array of large product images,along with related information\r\n * @param {jQuery} $productContainer - DOM element for a given product\r\n */\r\nfunction createCarousel(imgs, $productContainer) {\r\n    var carousel = $productContainer.find('.carousel');\r\n    $(carousel).carousel('dispose');\r\n    var carouselId = $(carousel).attr('id');\r\n    $(carousel).empty().append('<ol class=\"carousel-indicators\"></ol><div class=\"carousel-inner\" role=\"listbox\"></div><a class=\"carousel-control-prev\" href=\"#' + carouselId + '\" role=\"button\" data-slide=\"prev\"><span class=\"fa icon-prev\" aria-hidden=\"true\"></span><span class=\"sr-only\">' + $(carousel).data('prev') + '</span></a><a class=\"carousel-control-next\" href=\"#' + carouselId + '\" role=\"button\" data-slide=\"next\"><span class=\"fa icon-next\" aria-hidden=\"true\"></span><span class=\"sr-only\">' + $(carousel).data('next') + '</span></a>');\r\n    for (var i = 0; i < imgs.length; i++) {\r\n        $('<div class=\"carousel-item\"><img src=\"' + imgs[i].url + '\" class=\"d-block img-fluid\" alt=\"' + imgs[i].alt + ' image number ' + parseInt(imgs[i].index, 10) + '\" title=\"' + imgs[i].title + '\" itemprop=\"image\" /></div>').appendTo($(carousel).find('.carousel-inner'));\r\n        $('<li data-target=\"#' + carouselId + '\" data-slide-to=\"' + i + '\" class=\"\"></li>').appendTo($(carousel).find('.carousel-indicators'));\r\n    }\r\n    $($(carousel).find('.carousel-item')).first().addClass('active');\r\n    $($(carousel).find('.carousel-indicators > li')).first().addClass('active');\r\n    if (imgs.length === 1) {\r\n        $($(carousel).find('.carousel-indicators, a[class^=\"carousel-control-\"]')).detach();\r\n    }\r\n    $(carousel).carousel();\r\n    $($(carousel).find('.carousel-indicators')).attr('aria-hidden', true);\r\n}\r\n\r\n/**\r\n * Parses JSON from Ajax call made whenever an attribute value is [de]selected\r\n * @param {Object} response - response from Ajax call\r\n * @param {Object} response.product - Product object\r\n * @param {string} response.product.id - Product ID\r\n * @param {Object[]} response.product.variationAttributes - Product attributes\r\n * @param {Object[]} response.product.images - Product images\r\n * @param {boolean} response.product.hasRequiredAttrsSelected - Flag as to whether all required\r\n *     attributes have been selected.  Used partially to\r\n *     determine whether the Add to Cart button can be enabled\r\n * @param {jQuery} $productContainer - DOM element for a given product.\r\n */\r\nfunction handleVariantResponse(response, $productContainer) {\r\n    var isChoiceOfBonusProducts =\r\n        $productContainer.parents('.choose-bonus-product-dialog').length > 0;\r\n    var isVaraint;\r\n    if (response.product.variationAttributes) {\r\n        updateAttrs(response.product.variationAttributes, $productContainer, response.resources);\r\n        isVaraint = response.product.productType === 'variant';\r\n        if (isChoiceOfBonusProducts && isVaraint) {\r\n            $productContainer.parent('.bonus-product-item')\r\n                .data('pid', response.product.id);\r\n\r\n            $productContainer.parent('.bonus-product-item')\r\n                .data('ready-to-order', response.product.readyToOrder);\r\n        }\r\n    }\r\n\r\n    // Update primary images\r\n    var primaryImageUrls = response.product.images.large;\r\n    createCarousel(primaryImageUrls, $productContainer);\r\n\r\n    // Update pricing\r\n    if (!isChoiceOfBonusProducts) {\r\n        var $priceSelector = $('.prices .price', $productContainer).length\r\n            ? $('.prices .price', $productContainer)\r\n            : $('.prices .price');\r\n        $priceSelector.replaceWith(response.product.price.html);\r\n    }\r\n\r\n    // Update promotions\r\n    $productContainer.find('.promotions').empty().html(response.product.promotionsHtml);\r\n\r\n    updateAvailability(response, $productContainer);\r\n\r\n    if (isChoiceOfBonusProducts) {\r\n        var $selectButton = $productContainer.find('.select-bonus-product');\r\n        $selectButton.trigger('bonusproduct:updateSelectButton', {\r\n            product: response.product, $productContainer: $productContainer\r\n        });\r\n    } else {\r\n        // Enable \"Add to Cart\" button if all required attributes have been selected\r\n        $('button.add-to-cart, button.add-to-cart-global, button.update-cart-product-global').trigger('product:updateAddToCart', {\r\n            product: response.product, $productContainer: $productContainer\r\n        }).trigger('product:statusUpdate', response.product);\r\n    }\r\n\r\n    // Update attributes\r\n    $productContainer.find('.main-attributes').empty()\r\n        .html(getAttributesHtml(response.product.attributes));\r\n}\r\n\r\n/**\r\n * @typespec UpdatedQuantity\r\n * @type Object\r\n * @property {boolean} selected - Whether the quantity has been selected\r\n * @property {string} value - The number of products to purchase\r\n * @property {string} url - Compiled URL that specifies variation attributes, product ID, options,\r\n *     etc.\r\n */\r\n\r\n/**\r\n * Updates the quantity DOM elements post Ajax call\r\n * @param {UpdatedQuantity[]} quantities -\r\n * @param {jQuery} $productContainer - DOM container for a given product\r\n */\r\nfunction updateQuantities(quantities, $productContainer) {\r\n    if (!($productContainer.parent('.bonus-product-item').length > 0)) {\r\n        var optionsHtml = quantities.map(function (quantity) {\r\n            var selected = quantity.selected ? ' selected ' : '';\r\n            return '<option value=\"' + quantity.value + '\"  data-url=\"' + quantity.url + '\"' +\r\n                selected + '>' + quantity.value + '</option>';\r\n        }).join('');\r\n        getQuantitySelector($productContainer).empty().html(optionsHtml);\r\n    }\r\n}\r\n\r\n/**\r\n * updates the product view when a product attribute is selected or deselected or when\r\n *         changing quantity\r\n * @param {string} selectedValueUrl - the Url for the selected variation value\r\n * @param {jQuery} $productContainer - DOM element for current product\r\n */\r\nfunction attributeSelect(selectedValueUrl, $productContainer) {\r\n    if (selectedValueUrl) {\r\n        $('body').trigger('product:beforeAttributeSelect',\r\n            { url: selectedValueUrl, container: $productContainer });\r\n\r\n        $.ajax({\r\n            url: selectedValueUrl,\r\n            method: 'GET',\r\n            success: function (data) {\r\n                handleVariantResponse(data, $productContainer);\r\n                updateOptions(data.product.optionsHtml, $productContainer);\r\n                updateQuantities(data.product.quantities, $productContainer);\r\n                $('body').trigger('product:afterAttributeSelect',\r\n                    { data: data, container: $productContainer });\r\n                $.spinner().stop();\r\n            },\r\n            error: function () {\r\n                $.spinner().stop();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Retrieves url to use when adding a product to the cart\r\n *\r\n * @return {string} - The provided URL to use when adding a product to the cart\r\n */\r\nfunction getAddToCartUrl() {\r\n    return $('.add-to-cart-url').val();\r\n}\r\n\r\n/**\r\n * Parses the html for a modal window\r\n * @param {string} html - representing the body and footer of the modal window\r\n *\r\n * @return {Object} - Object with properties body and footer.\r\n */\r\nfunction parseHtml(html) {\r\n    var $html = $('<div>').append($.parseHTML(html));\r\n\r\n    var body = $html.find('.choice-of-bonus-product');\r\n    var footer = $html.find('.modal-footer').children();\r\n\r\n    return { body: body, footer: footer };\r\n}\r\n\r\n/**\r\n * Retrieves url to use when adding a product to the cart\r\n *\r\n * @param {Object} data - data object used to fill in dynamic portions of the html\r\n */\r\nfunction chooseBonusProducts(data) {\r\n    $('.modal-body').spinner().start();\r\n\r\n    if ($('#chooseBonusProductModal').length !== 0) {\r\n        $('#chooseBonusProductModal').remove();\r\n    }\r\n    var bonusUrl;\r\n    if (data.bonusChoiceRuleBased) {\r\n        bonusUrl = data.showProductsUrlRuleBased;\r\n    } else {\r\n        bonusUrl = data.showProductsUrlListBased;\r\n    }\r\n\r\n    var htmlString = '\x3c!-- Modal --\x3e'\r\n        + '<div class=\"modal fade\" id=\"chooseBonusProductModal\" tabindex=\"-1\" role=\"dialog\">'\r\n        + '<span class=\"enter-message sr-only\" ></span>'\r\n        + '<div class=\"modal-dialog choose-bonus-product-dialog\" '\r\n        + 'data-total-qty=\"' + data.maxBonusItems + '\"'\r\n        + 'data-UUID=\"' + data.uuid + '\"'\r\n        + 'data-pliUUID=\"' + data.pliUUID + '\"'\r\n        + 'data-addToCartUrl=\"' + data.addToCartUrl + '\"'\r\n        + 'data-pageStart=\"0\"'\r\n        + 'data-pageSize=\"' + data.pageSize + '\"'\r\n        + 'data-moreURL=\"' + data.showProductsUrlRuleBased + '\"'\r\n        + 'data-bonusChoiceRuleBased=\"' + data.bonusChoiceRuleBased + '\">'\r\n        + '\x3c!-- Modal content--\x3e'\r\n        + '<div class=\"modal-content\">'\r\n        + '<div class=\"modal-header\">'\r\n        + '    <span class=\"\">' + data.labels.selectprods + '</span>'\r\n        + '    <button type=\"button\" class=\"close pull-right\" data-dismiss=\"modal\">'\r\n        + '        <span aria-hidden=\"true\">&times;</span>'\r\n        + '        <span class=\"sr-only\"> </span>'\r\n        + '    </button>'\r\n        + '</div>'\r\n        + '<div class=\"modal-body\"></div>'\r\n        + '<div class=\"modal-footer\"></div>'\r\n        + '</div>'\r\n        + '</div>'\r\n        + '</div>';\r\n    $('body').append(htmlString);\r\n    $('.modal-body').spinner().start();\r\n\r\n    $.ajax({\r\n        url: bonusUrl,\r\n        method: 'GET',\r\n        dataType: 'json',\r\n        success: function (response) {\r\n            var parsedHtml = parseHtml(response.renderedTemplate);\r\n            $('#chooseBonusProductModal .modal-body').empty();\r\n            $('#chooseBonusProductModal .enter-message').text(response.enterDialogMessage);\r\n            $('#chooseBonusProductModal .modal-header .close .sr-only').text(response.closeButtonText);\r\n            $('#chooseBonusProductModal .modal-body').html(parsedHtml.body);\r\n            $('#chooseBonusProductModal .modal-footer').html(parsedHtml.footer);\r\n            $('#chooseBonusProductModal').modal('show');\r\n            $.spinner().stop();\r\n        },\r\n        error: function () {\r\n            $.spinner().stop();\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Updates the Mini-Cart quantity value after the customer has pressed the \"Add to Cart\" button\r\n * @param {string} response - ajax response from clicking the add to cart button\r\n */\r\nfunction handlePostCartAdd(response) {\r\n    $('.minicart').trigger('count:update', response);\r\n    var messageType = response.error ? 'alert-danger' : 'alert-success';\r\n    // show add to cart toast\r\n    if (response.newBonusDiscountLineItem\r\n        && Object.keys(response.newBonusDiscountLineItem).length !== 0) {\r\n        chooseBonusProducts(response.newBonusDiscountLineItem);\r\n    } else {\r\n        if ($('.add-to-cart-messages').length === 0) {\r\n            $('body').append(\r\n                '<div class=\"add-to-cart-messages\"></div>'\r\n            );\r\n        }\r\n\r\n        $('.add-to-cart-messages').append(\r\n            '<div class=\"alert ' + messageType + ' add-to-basket-alert text-center\" role=\"alert\">'\r\n            + response.message\r\n            + '</div>'\r\n        );\r\n\r\n        setTimeout(function () {\r\n            $('.add-to-basket-alert').remove();\r\n        }, 5000);\r\n    }\r\n}\r\n\r\n/**\r\n * Retrieves the bundle product item ID's for the Controller to replace bundle master product\r\n * items with their selected variants\r\n *\r\n * @return {string[]} - List of selected bundle product item ID's\r\n */\r\nfunction getChildProducts() {\r\n    var childProducts = [];\r\n    $('.bundle-item').each(function () {\r\n        childProducts.push({\r\n            pid: $(this).find('.product-id').text(),\r\n            quantity: parseInt($(this).find('label.quantity').data('quantity'), 10)\r\n        });\r\n    });\r\n\r\n    return childProducts.length ? JSON.stringify(childProducts) : [];\r\n}\r\n\r\n/**\r\n * Retrieve product options\r\n *\r\n * @param {jQuery} $productContainer - DOM element for current product\r\n * @return {string} - Product options and their selected values\r\n */\r\nfunction getOptions($productContainer) {\r\n    var options = $productContainer\r\n        .find('.product-option')\r\n        .map(function () {\r\n            var $elOption = $(this).find('.options-select');\r\n            var urlValue = $elOption.val();\r\n            var selectedValueId = $elOption.find('option[value=\"' + urlValue + '\"]')\r\n                .data('value-id');\r\n            return {\r\n                optionId: $(this).data('option-id'),\r\n                selectedValueId: selectedValueId\r\n            };\r\n        }).toArray();\r\n\r\n    return JSON.stringify(options);\r\n}\r\n\r\n/**\r\n * Makes a call to the server to report the event of adding an item to the cart\r\n *\r\n * @param {string | boolean} url - a string representing the end point to hit so that the event can be recorded, or false\r\n */\r\nfunction miniCartReportingUrl(url) {\r\n    if (url) {\r\n        $.ajax({\r\n            url: url,\r\n            method: 'GET',\r\n            success: function () {\r\n                // reporting urls hit on the server\r\n            },\r\n            error: function () {\r\n                // no reporting urls hit on the server\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    attributeSelect: attributeSelect,\r\n    methods: {\r\n        editBonusProducts: function (data) {\r\n            chooseBonusProducts(data);\r\n        }\r\n    },\r\n\r\n    focusChooseBonusProductModal: function () {\r\n        $('body').on('shown.bs.modal', '#chooseBonusProductModal', function () {\r\n            $('#chooseBonusProductModal').siblings().attr('aria-hidden', 'true');\r\n            $('#chooseBonusProductModal .close').focus();\r\n        });\r\n    },\r\n\r\n    onClosingChooseBonusProductModal: function () {\r\n        $('body').on('hidden.bs.modal', '#chooseBonusProductModal', function () {\r\n            $('#chooseBonusProductModal').siblings().attr('aria-hidden', 'false');\r\n        });\r\n    },\r\n\r\n    trapChooseBonusProductModalFocus: function () {\r\n        $('body').on('keydown', '#chooseBonusProductModal', function (e) {\r\n            var focusParams = {\r\n                event: e,\r\n                containerSelector: '#chooseBonusProductModal',\r\n                firstElementSelector: '.close',\r\n                lastElementSelector: '.add-bonus-products'\r\n            };\r\n            focusHelper.setTabNextFocus(focusParams);\r\n        });\r\n    },\r\n\r\n    colorAttribute: function () {\r\n        $(document).on('click', '[data-attr=\"color\"] button', function (e) {\r\n            e.preventDefault();\r\n\r\n            if ($(this).attr('disabled')) {\r\n                return;\r\n            }\r\n            var $productContainer = $(this).closest('.set-item');\r\n            if (!$productContainer.length) {\r\n                $productContainer = $(this).closest('.product-detail');\r\n            }\r\n\r\n            attributeSelect($(this).attr('data-url'), $productContainer);\r\n        });\r\n    },\r\n\r\n    selectAttribute: function () {\r\n        $(document).on('change', 'select[class*=\"select-\"], .options-select', function (e) {\r\n            e.preventDefault();\r\n\r\n            var $productContainer = $(this).closest('.set-item');\r\n            if (!$productContainer.length) {\r\n                $productContainer = $(this).closest('.product-detail');\r\n            }\r\n            attributeSelect(e.currentTarget.value, $productContainer);\r\n        });\r\n    },\r\n\r\n    availability: function () {\r\n        $(document).on('change', '.quantity-select', function (e) {\r\n            e.preventDefault();\r\n\r\n            var $productContainer = $(this).closest('.product-detail');\r\n            if (!$productContainer.length) {\r\n                $productContainer = $(this).closest('.modal-content').find('.product-quickview');\r\n            }\r\n\r\n            if ($('.bundle-items', $productContainer).length === 0) {\r\n                attributeSelect($(e.currentTarget).find('option:selected').data('url'),\r\n                    $productContainer);\r\n            }\r\n        });\r\n    },\r\n\r\n    addToCart: function () {\r\n        $(document).on('click', 'button.add-to-cart, button.add-to-cart-global', function () {\r\n           var clydeWidgets = ClydeSitePreferences.CLYDE_WIDGET_ENABLED;\r\n           if (clydeWidgets) {\r\n               var selectedContract = Clyde.getSelectedContract();\r\n               var clydeSettings = Clyde.getSettings();\r\n               if (clydeSettings.productPage == true) {\r\n                    if (selectedContract) {\r\n                        clydeAddProductToCart();\r\n                    } else {\r\n                        var product = Clyde.getActiveProduct();\r\n                        var hasContracts = product && product.contracts ? product.contracts.length > 0 : false;\r\n                        if (hasContracts && clydeSettings.modal == true) {\r\n                            Clyde.showModal(null, clydeAddProductToCart);\r\n                        } else {\r\n                            clydeAddProductToCart();\r\n                        }\r\n                    }\r\n               } else if (clydeSettings.modal == true) {\r\n                    Clyde.showModal(null, clydeAddProductToCart);\r\n               } else {\r\n                    clydeAddProductToCart()\r\n               }\r\n           } else {\r\n                clydeAddProductToCart();\r\n           }\r\n        });\r\n    },\r\n    addProductToCart: function () {\r\n        $(document).on('click', 'button.add-To-Cart, button.add-to-cart-global', function () {\r\n            var clydeWidgets = ClydeSitePreferences.CLYDE_WIDGET_ENABLED;\r\n            if (clydeWidgets) {\r\n                var selectedContract = Clyde.getSelectedContract();\r\n                var clydeSettings = Clyde.getSettings();\r\n                if (clydeSettings.productPage == true) {\r\n                        if (selectedContract) {\r\n                            clydeAddProductToCart();\r\n                        } else {\r\n                            var product = Clyde.getActiveProduct();\r\n                            var hasContracts = product && product.contracts ? product.contracts.length > 0 : false;\r\n                            if (hasContracts && clydeSettings.modal == true) {\r\n                                Clyde.showModal(null, clydeAddProductToCart);\r\n                            } else {\r\n                                clydeAddProductToCart();\r\n                            }\r\n                        }\r\n                } else if (clydeSettings.modal == true) {\r\n                    Clyde.showModal(null, clydeAddProductToCart);\r\n                } else {\r\n                    clydeAddProductToCart();\r\n                }\r\n            } else {\r\n                clydeAddProductToCart();\r\n            }\r\n        });\r\n    },\r\n    selectBonusProduct: function () {\r\n        $(document).on('click', '.select-bonus-product', function () {\r\n            var $choiceOfBonusProduct = $(this).parents('.choice-of-bonus-product');\r\n            var pid = $(this).data('pid');\r\n            var maxPids = $('.choose-bonus-product-dialog').data('total-qty');\r\n            var submittedQty = parseInt($choiceOfBonusProduct.find('.bonus-quantity-select').val(), 10);\r\n            var totalQty = 0;\r\n            $.each($('#chooseBonusProductModal .selected-bonus-products .selected-pid'), function () {\r\n                totalQty += $(this).data('qty');\r\n            });\r\n            totalQty += submittedQty;\r\n            var optionID = $choiceOfBonusProduct.find('.product-option').data('option-id');\r\n            var valueId = $choiceOfBonusProduct.find('.options-select option:selected').data('valueId');\r\n            if (totalQty <= maxPids) {\r\n                var selectedBonusProductHtml = ''\r\n                + '<div class=\"selected-pid row\" '\r\n                + 'data-pid=\"' + pid + '\"'\r\n                + 'data-qty=\"' + submittedQty + '\"'\r\n                + 'data-optionID=\"' + (optionID || '') + '\"'\r\n                + 'data-option-selected-value=\"' + (valueId || '') + '\"'\r\n                + '>'\r\n                + '<div class=\"col-sm-11 col-9 bonus-product-name\" >'\r\n                + $choiceOfBonusProduct.find('.product-name').html()\r\n                + '</div>'\r\n                + '<div class=\"col-1\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></div>'\r\n                + '</div>'\r\n                ;\r\n                $('#chooseBonusProductModal .selected-bonus-products').append(selectedBonusProductHtml);\r\n                $('.pre-cart-products').html(totalQty);\r\n                $('.selected-bonus-products .bonus-summary').removeClass('alert-danger');\r\n            } else {\r\n                $('.selected-bonus-products .bonus-summary').addClass('alert-danger');\r\n            }\r\n        });\r\n    },\r\n    removeBonusProduct: function () {\r\n        $(document).on('click', '.selected-pid', function () {\r\n            $(this).remove();\r\n            var $selected = $('#chooseBonusProductModal .selected-bonus-products .selected-pid');\r\n            var count = 0;\r\n            if ($selected.length) {\r\n                $selected.each(function () {\r\n                    count += parseInt($(this).data('qty'), 10);\r\n                });\r\n            }\r\n\r\n            $('.pre-cart-products').html(count);\r\n            $('.selected-bonus-products .bonus-summary').removeClass('alert-danger');\r\n        });\r\n    },\r\n    enableBonusProductSelection: function () {\r\n        $('body').on('bonusproduct:updateSelectButton', function (e, response) {\r\n            $('button.select-bonus-product', response.$productContainer).attr('disabled',\r\n                (!response.product.readyToOrder || !response.product.available));\r\n            var pid = response.product.id;\r\n            $('button.select-bonus-product', response.$productContainer).data('pid', pid);\r\n        });\r\n    },\r\n    showMoreBonusProducts: function () {\r\n        $(document).on('click', '.show-more-bonus-products', function () {\r\n            var url = $(this).data('url');\r\n            $('.modal-content').spinner().start();\r\n            $.ajax({\r\n                url: url,\r\n                method: 'GET',\r\n                success: function (html) {\r\n                    var parsedHtml = parseHtml(html);\r\n                    $('.modal-body').append(parsedHtml.body);\r\n                    $('.show-more-bonus-products:first').remove();\r\n                    $('.modal-content').spinner().stop();\r\n                },\r\n                error: function () {\r\n                    $('.modal-content').spinner().stop();\r\n                }\r\n            });\r\n        });\r\n    },\r\n    addBonusProductsToCart: function () {\r\n        $(document).on('click', '.add-bonus-products', function () {\r\n            var $readyToOrderBonusProducts = $('.choose-bonus-product-dialog .selected-pid');\r\n            var queryString = '?pids=';\r\n            var url = $('.choose-bonus-product-dialog').data('addtocarturl');\r\n            var pidsObject = {\r\n                bonusProducts: []\r\n            };\r\n\r\n            $.each($readyToOrderBonusProducts, function () {\r\n                var qtyOption =\r\n                    parseInt($(this)\r\n                        .data('qty'), 10);\r\n\r\n                var option = null;\r\n                if (qtyOption > 0) {\r\n                    if ($(this).data('optionid') && $(this).data('option-selected-value')) {\r\n                        option = {};\r\n                        option.optionId = $(this).data('optionid');\r\n                        option.productId = $(this).data('pid');\r\n                        option.selectedValueId = $(this).data('option-selected-value');\r\n                    }\r\n                    pidsObject.bonusProducts.push({\r\n                        pid: $(this).data('pid'),\r\n                        qty: qtyOption,\r\n                        options: [option]\r\n                    });\r\n                    pidsObject.totalQty = parseInt($('.pre-cart-products').html(), 10);\r\n                }\r\n            });\r\n            queryString += JSON.stringify(pidsObject);\r\n            queryString = queryString + '&uuid=' + $('.choose-bonus-product-dialog').data('uuid');\r\n            queryString = queryString + '&pliuuid=' + $('.choose-bonus-product-dialog').data('pliuuid');\r\n            $.spinner().start();\r\n            $.ajax({\r\n                url: url + queryString,\r\n                method: 'POST',\r\n                success: function (data) {\r\n                    $.spinner().stop();\r\n                    if (data.error) {\r\n                        $('#chooseBonusProductModal').modal('hide');\r\n                        if ($('.add-to-cart-messages').length === 0) {\r\n                            $('body').append('<div class=\"add-to-cart-messages\"></div>');\r\n                        }\r\n                        $('.add-to-cart-messages').append(\r\n                            '<div class=\"alert alert-danger add-to-basket-alert text-center\"'\r\n                            + ' role=\"alert\">'\r\n                            + data.errorMessage + '</div>'\r\n                        );\r\n                        setTimeout(function () {\r\n                            $('.add-to-basket-alert').remove();\r\n                        }, 3000);\r\n                    } else {\r\n                        $('.configure-bonus-product-attributes').html(data);\r\n                        $('.bonus-products-step2').removeClass('hidden-xl-down');\r\n                        $('#chooseBonusProductModal').modal('hide');\r\n\r\n                        if ($('.add-to-cart-messages').length === 0) {\r\n                            $('body').append('<div class=\"add-to-cart-messages\"></div>');\r\n                        }\r\n                        $('.minicart-quantity').html(data.totalQty);\r\n                        $('.add-to-cart-messages').append(\r\n                            '<div class=\"alert alert-success add-to-basket-alert text-center\"'\r\n                            + ' role=\"alert\">'\r\n                            + data.msgSuccess + '</div>'\r\n                        );\r\n                        setTimeout(function () {\r\n                            $('.add-to-basket-alert').remove();\r\n                            if ($('.cart-page').length) {\r\n                                location.reload();\r\n                            }\r\n                        }, 1500);\r\n                    }\r\n                },\r\n                error: function () {\r\n                    $.spinner().stop();\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    getPidValue: getPidValue,\r\n    getQuantitySelected: getQuantitySelected,\r\n    miniCartReportingUrl: miniCartReportingUrl\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2ludF9jbHlkZV9zZnJhL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy9wcm9kdWN0L2Jhc2UuanM/NjRmYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBOztBQUVBLGtCQUFrQixtQkFBTyxDQUFDLENBQXVCO0FBQ2pELGtCQUFrQixtQkFBTyxDQUFDLENBQXNCOztBQUVoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsU0FBUztBQUNwQixXQUFXLE9BQU87QUFDbEIsV0FBVyxP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QkFBcUI7QUFDckI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjUwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuIC8qIGVzbGludC1kaXNhYmxlICovXHJcbi8qIGdsb2JhbCAkLCBkb2N1bWVudCwgQ2x5ZGUsIENseWRlU2l0ZVByZWZlcmVuY2VzICovXHJcblxyXG52YXIgZm9jdXNIZWxwZXIgPSByZXF1aXJlKCdiYXNlL2NvbXBvbmVudHMvZm9jdXMnKTtcclxudmFyIGNseWRlV2lkZ2V0ID0gcmVxdWlyZSgnLi4vZ2V0Q2x5ZGVXaWRnZXQuanMnKTtcclxuXHJcbi8qKlxyXG4gKiBmdW5jdGlvbiB1c2VkIHRvIGFkZCBjbHlkZSBwcm9kdWN0IGludG8gY2FydFxyXG4gKi9cclxuZnVuY3Rpb24gY2x5ZGVBZGRQcm9kdWN0VG9DYXJ0KCkge1xyXG4gICAgdmFyIGFkZFRvQ2FydFVybDtcclxuICAgIHZhciBwaWQ7XHJcbiAgICB2YXIgcGlkc09iajtcclxuICAgIHZhciBzZXRQaWRzO1xyXG4gICAgJCgnYm9keScpLnRyaWdnZXIoJ3Byb2R1Y3Q6YmVmb3JlQWRkVG9DYXJ0JywgdGhpcyk7XHJcblxyXG4gICAgaWYgKCQoJy5zZXQtaXRlbXMnKS5sZW5ndGggJiYgJCh0aGlzKS5oYXNDbGFzcygnYWRkLXRvLWNhcnQtZ2xvYmFsJykpIHtcclxuICAgICAgICBzZXRQaWRzID0gW107XHJcblxyXG4gICAgICAgICQoJy5wcm9kdWN0LWRldGFpbCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ3Byb2R1Y3Qtc2V0LWRldGFpbCcpKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRQaWRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHBpZDogJCh0aGlzKS5maW5kKCcucHJvZHVjdC1pZCcpLnRleHQoKSxcclxuICAgICAgICAgICAgICAgICAgICBxdHk6ICQodGhpcykuZmluZCgnLnF1YW50aXR5LXNlbGVjdCcpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGdldE9wdGlvbnMoJCh0aGlzKSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGlkc09iaiA9IEpTT04uc3RyaW5naWZ5KHNldFBpZHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHBpZCA9IGdldFBpZFZhbHVlKCQodGhpcykpO1xyXG5cclxuICAgIHZhciAkcHJvZHVjdENvbnRhaW5lciA9ICQodGhpcykuY2xvc2VzdCgnLnByb2R1Y3QtZGV0YWlsJyk7XHJcbiAgICBpZiAoISRwcm9kdWN0Q29udGFpbmVyLmxlbmd0aCkge1xyXG4gICAgICAgICRwcm9kdWN0Q29udGFpbmVyID0gJCh0aGlzKS5jbG9zZXN0KCcucXVpY2stdmlldy1kaWFsb2cnKS5maW5kKCcucHJvZHVjdC1kZXRhaWwnKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRUb0NhcnRVcmwgPSBnZXRBZGRUb0NhcnRVcmwoKTtcclxuXHJcbiAgICB2YXIgZm9ybSA9IHtcclxuICAgICAgICBwaWQ6IHBpZCxcclxuICAgICAgICBwaWRzT2JqOiBwaWRzT2JqLFxyXG4gICAgICAgIGNoaWxkUHJvZHVjdHM6IGdldENoaWxkUHJvZHVjdHMoKSxcclxuICAgICAgICBxdWFudGl0eTogZ2V0UXVhbnRpdHlTZWxlY3RlZCgkKHRoaXMpKVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgY2x5ZGVXaWRnZXRzID0gQ2x5ZGVTaXRlUHJlZmVyZW5jZXMuQ0xZREVfV0lER0VUX0VOQUJMRUQ7XHJcblxyXG4gICAgaWYgKGNseWRlV2lkZ2V0cykge1xyXG4gICAgICAgIHZhciBzZWxlY3RlZENvbnRyYWN0ID0gQ2x5ZGUuZ2V0U2VsZWN0ZWRDb250cmFjdCgpO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZENvbnRyYWN0KSB7XHJcbiAgICAgICAgICAgIGZvcm0gPSBjbHlkZVdpZGdldC5nZXRTZWxlY3RlZENseWRlQ29udHJhY3QoZm9ybSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghJCgnLmJ1bmRsZS1pdGVtJykubGVuZ3RoKSB7XHJcbiAgICAgICAgZm9ybS5vcHRpb25zID0gZ2V0T3B0aW9ucygkcHJvZHVjdENvbnRhaW5lcik7XHJcbiAgICB9XHJcbiAgICAkKHRoaXMpLnRyaWdnZXIoJ3VwZGF0ZUFkZFRvQ2FydEZvcm1EYXRhJywgZm9ybSk7XHJcbiAgICBpZiAoYWRkVG9DYXJ0VXJsKSB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBhZGRUb0NhcnRVcmwsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBkYXRhOiBmb3JtLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlUG9zdENhcnRBZGQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykudHJpZ2dlcigncHJvZHVjdDphZnRlckFkZFRvQ2FydCcsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgbWluaUNhcnRSZXBvcnRpbmdVcmwoZGF0YS5yZXBvcnRpbmdVUkwpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgdGhlIHJlbGV2YW50IHBpZCB2YWx1ZVxyXG4gKiBAcGFyYW0ge2pxdWVyeX0gJGVsIC0gRE9NIGNvbnRhaW5lciBmb3IgYSBnaXZlbiBhZGQgdG8gY2FydCBidXR0b25cclxuICogQHJldHVybiB7c3RyaW5nfSAtIHZhbHVlIHRvIGJlIHVzZWQgd2hlbiBhZGRpbmcgcHJvZHVjdCB0byBjYXJ0XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRQaWRWYWx1ZSgkZWwpIHtcclxuICAgIHZhciBwaWQ7XHJcblxyXG4gICAgaWYgKCQoJyNxdWlja1ZpZXdNb2RhbCcpLmhhc0NsYXNzKCdzaG93JykgJiYgISQoJy5wcm9kdWN0LXNldCcpLmxlbmd0aCkge1xyXG4gICAgICAgIHBpZCA9ICQoJGVsKS5jbG9zZXN0KCcubW9kYWwtY29udGVudCcpLmZpbmQoJy5wcm9kdWN0LXF1aWNrdmlldycpLmRhdGEoJ3BpZCcpO1xyXG4gICAgfSBlbHNlIGlmICgkKCcucHJvZHVjdC1zZXQtZGV0YWlsJykubGVuZ3RoIHx8ICQoJy5wcm9kdWN0LXNldCcpLmxlbmd0aCkge1xyXG4gICAgICAgIHBpZCA9ICQoJGVsKS5jbG9zZXN0KCcucHJvZHVjdC1kZXRhaWwnKS5maW5kKCcucHJvZHVjdC1pZCcpLnRleHQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGlkID0gJCgnLnByb2R1Y3QtZGV0YWlsOm5vdChcIi5idW5kbGUtaXRlbVwiKScpLmRhdGEoJ3BpZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXRyaWV2ZSBjb250ZXh0dWFsIHF1YW50aXR5IHNlbGVjdG9yXHJcbiAqIEBwYXJhbSB7anF1ZXJ5fSAkZWwgLSBET00gY29udGFpbmVyIGZvciB0aGUgcmVsZXZhbnQgcXVhbnRpdHlcclxuICogQHJldHVybiB7anF1ZXJ5fSAtIHF1YW50aXR5IHNlbGVjdG9yIERPTSBjb250YWluZXJcclxuICovXHJcbmZ1bmN0aW9uIGdldFF1YW50aXR5U2VsZWN0b3IoJGVsKSB7XHJcbiAgICByZXR1cm4gJGVsICYmICQoJy5zZXQtaXRlbXMnKS5sZW5ndGhcclxuICAgICAgICA/ICQoJGVsKS5jbG9zZXN0KCcucHJvZHVjdC1kZXRhaWwnKS5maW5kKCcucXVhbnRpdHktc2VsZWN0JylcclxuICAgICAgICA6ICQoJy5xdWFudGl0eS1zZWxlY3QnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHJpZXZlcyB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBRdWFudGl0eSBwdWxsLWRvd24gbWVudVxyXG4gKiBAcGFyYW0ge2pxdWVyeX0gJGVsIC0gRE9NIGNvbnRhaW5lciBmb3IgdGhlIHJlbGV2YW50IHF1YW50aXR5XHJcbiAqIEByZXR1cm4ge3N0cmluZ30gLSB2YWx1ZSBmb3VuZCBpbiB0aGUgcXVhbnRpdHkgaW5wdXRcclxuICovXHJcbmZ1bmN0aW9uIGdldFF1YW50aXR5U2VsZWN0ZWQoJGVsKSB7XHJcbiAgICByZXR1cm4gZ2V0UXVhbnRpdHlTZWxlY3RvcigkZWwpLnZhbCgpO1xyXG59XHJcblxyXG4vKipcclxuICogUHJvY2VzcyB0aGUgYXR0cmlidXRlIHZhbHVlcyBmb3IgYW4gYXR0cmlidXRlIHRoYXQgaGFzIGltYWdlIHN3YXRjaGVzXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBhdHRyIC0gQXR0cmlidXRlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyLmlkIC0gQXR0cmlidXRlIElEXHJcbiAqIEBwYXJhbSB7T2JqZWN0W119IGF0dHIudmFsdWVzIC0gQXJyYXkgb2YgYXR0cmlidXRlIHZhbHVlIG9iamVjdHNcclxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHIudmFsdWVzLnZhbHVlIC0gQXR0cmlidXRlIGNvZGVkIHZhbHVlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyLnZhbHVlcy51cmwgLSBVUkwgdG8gZGUvc2VsZWN0IGFuIGF0dHJpYnV0ZSB2YWx1ZSBvZiB0aGUgcHJvZHVjdFxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGF0dHIudmFsdWVzLmlzU2VsZWN0YWJsZSAtIEZsYWcgYXMgdG8gd2hldGhlciBhbiBhdHRyaWJ1dGUgdmFsdWUgY2FuIGJlXHJcbiAqICAgICBzZWxlY3RlZC4gIElmIHRoZXJlIGlzIG5vIHZhcmlhbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIHNwZWNpZmljIGNvbWJpbmF0aW9uIG9mIGF0dHJpYnV0ZVxyXG4gKiAgICAgdmFsdWVzLCBhbiBhdHRyaWJ1dGUgbWF5IGJlIGRpc2FibGVkIGluIHRoZSBQcm9kdWN0IERldGFpbCBQYWdlXHJcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkcHJvZHVjdENvbnRhaW5lciAtIERPTSBjb250YWluZXIgZm9yIGEgZ2l2ZW4gcHJvZHVjdFxyXG4gKiBAcGFyYW0ge09iamVjdH0gbXNncyAtIG9iamVjdCBjb250YWluaW5nIHJlc291cmNlIG1lc3NhZ2VzXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm9jZXNzU3dhdGNoVmFsdWVzKGF0dHIsICRwcm9kdWN0Q29udGFpbmVyLCBtc2dzKSB7XHJcbiAgICBhdHRyLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyVmFsdWUpIHtcclxuICAgICAgICB2YXIgJGF0dHJWYWx1ZSA9ICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJ1tkYXRhLWF0dHI9XCInICsgYXR0ci5pZCArICdcIl0gW2RhdGEtYXR0ci12YWx1ZT1cIicgK1xyXG4gICAgICAgICAgICBhdHRyVmFsdWUudmFsdWUgKyAnXCJdJyk7XHJcbiAgICAgICAgdmFyICRzd2F0Y2hCdXR0b24gPSAkYXR0clZhbHVlLnBhcmVudCgpO1xyXG5cclxuICAgICAgICBpZiAoYXR0clZhbHVlLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICRhdHRyVmFsdWUuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICRhdHRyVmFsdWUuc2libGluZ3MoJy5zZWxlY3RlZC1hc3Npc3RpdmUtdGV4dCcpLnRleHQobXNncy5hc3Npc3RpdmVTZWxlY3RlZFRleHQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRhdHRyVmFsdWUucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICRhdHRyVmFsdWUuc2libGluZ3MoJy5zZWxlY3RlZC1hc3Npc3RpdmUtdGV4dCcpLmVtcHR5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYXR0clZhbHVlLnVybCkge1xyXG4gICAgICAgICAgICAkc3dhdGNoQnV0dG9uLmF0dHIoJ2RhdGEtdXJsJywgYXR0clZhbHVlLnVybCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJHN3YXRjaEJ1dHRvbi5yZW1vdmVBdHRyKCdkYXRhLXVybCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGlzYWJsZSBpZiBub3Qgc2VsZWN0YWJsZVxyXG4gICAgICAgICRhdHRyVmFsdWUucmVtb3ZlQ2xhc3MoJ3NlbGVjdGFibGUgdW5zZWxlY3RhYmxlJyk7XHJcblxyXG4gICAgICAgICRhdHRyVmFsdWUuYWRkQ2xhc3MoYXR0clZhbHVlLnNlbGVjdGFibGUgPyAnc2VsZWN0YWJsZScgOiAndW5zZWxlY3RhYmxlJyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFByb2Nlc3MgYXR0cmlidXRlIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggYW4gYXR0cmlidXRlIHRoYXQgZG9lcyBub3QgaGF2ZSBpbWFnZSBzd2F0Y2hlc1xyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0ciAtIEF0dHJpYnV0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0ci5pZCAtIEF0dHJpYnV0ZSBJRFxyXG4gKiBAcGFyYW0ge09iamVjdFtdfSBhdHRyLnZhbHVlcyAtIEFycmF5IG9mIGF0dHJpYnV0ZSB2YWx1ZSBvYmplY3RzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyLnZhbHVlcy52YWx1ZSAtIEF0dHJpYnV0ZSBjb2RlZCB2YWx1ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0ci52YWx1ZXMudXJsIC0gVVJMIHRvIGRlL3NlbGVjdCBhbiBhdHRyaWJ1dGUgdmFsdWUgb2YgdGhlIHByb2R1Y3RcclxuICogQHBhcmFtIHtib29sZWFufSBhdHRyLnZhbHVlcy5pc1NlbGVjdGFibGUgLSBGbGFnIGFzIHRvIHdoZXRoZXIgYW4gYXR0cmlidXRlIHZhbHVlIGNhbiBiZVxyXG4gKiAgICAgc2VsZWN0ZWQuICBJZiB0aGVyZSBpcyBubyB2YXJpYW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBzcGVjaWZpYyBjb21iaW5hdGlvbiBvZiBhdHRyaWJ1dGVcclxuICogICAgIHZhbHVlcywgYW4gYXR0cmlidXRlIG1heSBiZSBkaXNhYmxlZCBpbiB0aGUgUHJvZHVjdCBEZXRhaWwgUGFnZVxyXG4gKiBAcGFyYW0ge2pRdWVyeX0gJHByb2R1Y3RDb250YWluZXIgLSBET00gY29udGFpbmVyIGZvciBhIGdpdmVuIHByb2R1Y3RcclxuICovXHJcbmZ1bmN0aW9uIHByb2Nlc3NOb25Td2F0Y2hWYWx1ZXMoYXR0ciwgJHByb2R1Y3RDb250YWluZXIpIHtcclxuICAgIHZhciAkYXR0ciA9ICdbZGF0YS1hdHRyPVwiJyArIGF0dHIuaWQgKyAnXCJdJztcclxuICAgIHZhciAkZGVmYXVsdE9wdGlvbiA9ICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJGF0dHIgKyAnIC5zZWxlY3QtJyArIGF0dHIuaWQgKyAnIG9wdGlvbjpmaXJzdCcpO1xyXG4gICAgJGRlZmF1bHRPcHRpb24uYXR0cigndmFsdWUnLCBhdHRyLnJlc2V0VXJsKTtcclxuXHJcbiAgICBhdHRyLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyVmFsdWUpIHtcclxuICAgICAgICB2YXIgJGF0dHJWYWx1ZSA9ICRwcm9kdWN0Q29udGFpbmVyXHJcbiAgICAgICAgICAgIC5maW5kKCRhdHRyICsgJyBbZGF0YS1hdHRyLXZhbHVlPVwiJyArIGF0dHJWYWx1ZS52YWx1ZSArICdcIl0nKTtcclxuICAgICAgICAkYXR0clZhbHVlLmF0dHIoJ3ZhbHVlJywgYXR0clZhbHVlLnVybClcclxuICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgIGlmICghYXR0clZhbHVlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgJGF0dHJWYWx1ZS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogUm91dGVzIHRoZSBoYW5kbGluZyBvZiBhdHRyaWJ1dGUgcHJvY2Vzc2luZyBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgYXR0cmlidXRlIGhhcyBpbWFnZVxyXG4gKiAgICAgc3dhdGNoZXMgb3Igbm90XHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBhdHRycyAtIEF0dHJpYnV0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0ci5pZCAtIEF0dHJpYnV0ZSBJRFxyXG4gKiBAcGFyYW0ge2pRdWVyeX0gJHByb2R1Y3RDb250YWluZXIgLSBET00gZWxlbWVudCBmb3IgYSBnaXZlbiBwcm9kdWN0XHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBtc2dzIC0gb2JqZWN0IGNvbnRhaW5pbmcgcmVzb3VyY2UgbWVzc2FnZXNcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUF0dHJzKGF0dHJzLCAkcHJvZHVjdENvbnRhaW5lciwgbXNncykge1xyXG4gICAgLy8gQ3VycmVudGx5LCB0aGUgb25seSBhdHRyaWJ1dGUgdHlwZSB0aGF0IGhhcyBpbWFnZSBzd2F0Y2hlcyBpcyBDb2xvci5cclxuICAgIHZhciBhdHRyc1dpdGhTd2F0Y2hlcyA9IFsnY29sb3InXTtcclxuXHJcbiAgICBhdHRycy5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyKSB7XHJcbiAgICAgICAgaWYgKGF0dHJzV2l0aFN3YXRjaGVzLmluZGV4T2YoYXR0ci5pZCkgPiAtMSkge1xyXG4gICAgICAgICAgICBwcm9jZXNzU3dhdGNoVmFsdWVzKGF0dHIsICRwcm9kdWN0Q29udGFpbmVyLCBtc2dzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwcm9jZXNzTm9uU3dhdGNoVmFsdWVzKGF0dHIsICRwcm9kdWN0Q29udGFpbmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIGF2YWlsYWJpbGl0eSBzdGF0dXMgaW4gdGhlIFByb2R1Y3QgRGV0YWlsIFBhZ2VcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlIC0gQWpheCByZXNwb25zZSBvYmplY3QgYWZ0ZXIgYW5cclxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlIHZhbHVlIGhhcyBiZWVuIFtkZV1zZWxlY3RlZFxyXG4gKiBAcGFyYW0ge2pRdWVyeX0gJHByb2R1Y3RDb250YWluZXIgLSBET00gZWxlbWVudCBmb3IgYSBnaXZlbiBwcm9kdWN0XHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVBdmFpbGFiaWxpdHkocmVzcG9uc2UsICRwcm9kdWN0Q29udGFpbmVyKSB7XHJcbiAgICB2YXIgYXZhaWxhYmlsaXR5VmFsdWUgPSAnJztcclxuICAgIHZhciBhdmFpbGFiaWxpdHlNZXNzYWdlcyA9IHJlc3BvbnNlLnByb2R1Y3QuYXZhaWxhYmlsaXR5Lm1lc3NhZ2VzO1xyXG4gICAgaWYgKCFyZXNwb25zZS5wcm9kdWN0LnJlYWR5VG9PcmRlcikge1xyXG4gICAgICAgIGF2YWlsYWJpbGl0eVZhbHVlID0gJzxsaT48ZGl2PicgKyByZXNwb25zZS5yZXNvdXJjZXMuaW5mb19zZWxlY3Rmb3JzdG9jayArICc8L2Rpdj48L2xpPic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGF2YWlsYWJpbGl0eU1lc3NhZ2VzLmZvckVhY2goZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgYXZhaWxhYmlsaXR5VmFsdWUgKz0gJzxsaT48ZGl2PicgKyBtZXNzYWdlICsgJzwvZGl2PjwvbGk+JztcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAkKCRwcm9kdWN0Q29udGFpbmVyKS50cmlnZ2VyKCdwcm9kdWN0OnVwZGF0ZUF2YWlsYWJpbGl0eScsIHtcclxuICAgICAgICBwcm9kdWN0OiByZXNwb25zZS5wcm9kdWN0LFxyXG4gICAgICAgICRwcm9kdWN0Q29udGFpbmVyOiAkcHJvZHVjdENvbnRhaW5lcixcclxuICAgICAgICBtZXNzYWdlOiBhdmFpbGFiaWxpdHlWYWx1ZSxcclxuICAgICAgICByZXNvdXJjZXM6IHJlc3BvbnNlLnJlc291cmNlc1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgaHRtbCBmb3IgcHJvZHVjdCBhdHRyaWJ1dGVzIHNlY3Rpb25cclxuICpcclxuICogQHBhcmFtIHthcnJheX0gYXR0cmlidXRlcyAtIGxpc3Qgb2YgYXR0cmlidXRlc1xyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IC0gQ29tcGlsZWQgSFRNTFxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXR0cmlidXRlc0h0bWwoYXR0cmlidXRlcykge1xyXG4gICAgaWYgKCFhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBodG1sID0gJyc7XHJcblxyXG4gICAgYXR0cmlidXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyaWJ1dGVHcm91cCkge1xyXG4gICAgICAgIGlmIChhdHRyaWJ1dGVHcm91cC5JRCA9PT0gJ21haW5BdHRyaWJ1dGVzJykge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVHcm91cC5hdHRyaWJ1dGVzLmZvckVhY2goZnVuY3Rpb24gKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImF0dHJpYnV0ZS12YWx1ZXNcIj4nICsgYXR0cmlidXRlLmxhYmVsICsgJzogJ1xyXG4gICAgICAgICAgICAgICAgICAgICsgYXR0cmlidXRlLnZhbHVlICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBodG1sO1xyXG59XHJcblxyXG4vKipcclxuICogQHR5cGVkZWYgVXBkYXRlZE9wdGlvblZhbHVlXHJcbiAqIEB0eXBlIE9iamVjdFxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gaWQgLSBPcHRpb24gdmFsdWUgSUQgZm9yIGxvb2sgdXBcclxuICogQHByb3BlcnR5IHtzdHJpbmd9IHVybCAtIFVwZGF0ZWQgb3B0aW9uIHZhbHVlIHNlbGVjdGlvbiBVUkxcclxuICovXHJcblxyXG4vKipcclxuICogQHR5cGVkZWYgT3B0aW9uU2VsZWN0aW9uUmVzcG9uc2VcclxuICogQHR5cGUgT2JqZWN0XHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwcmljZUh0bWwgLSBVcGRhdGVkIHByaWNlIEhUTUwgY29kZVxyXG4gKiBAcHJvcGVydHkge09iamVjdH0gb3B0aW9ucyAtIFVwZGF0ZWQgT3B0aW9uc1xyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gb3B0aW9ucy5pZCAtIE9wdGlvbiBJRFxyXG4gKiBAcHJvcGVydHkge1VwZGF0ZWRPcHRpb25WYWx1ZVtdfSBvcHRpb25zLnZhbHVlcyAtIE9wdGlvbiB2YWx1ZXNcclxuICovXHJcblxyXG4vKipcclxuICogVXBkYXRlcyBET00gdXNpbmcgcG9zdC1vcHRpb24gc2VsZWN0aW9uIEFqYXggcmVzcG9uc2VcclxuICpcclxuICogQHBhcmFtIHtPcHRpb25TZWxlY3Rpb25SZXNwb25zZX0gb3B0aW9uc0h0bWwgLSBBamF4IHJlc3BvbnNlIG9wdGlvbnNIdG1sIGZyb20gc2VsZWN0aW5nIGEgcHJvZHVjdCBvcHRpb25cclxuICogQHBhcmFtIHtqUXVlcnl9ICRwcm9kdWN0Q29udGFpbmVyIC0gRE9NIGVsZW1lbnQgZm9yIGN1cnJlbnQgcHJvZHVjdFxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlT3B0aW9ucyhvcHRpb25zSHRtbCwgJHByb2R1Y3RDb250YWluZXIpIHtcclxuXHQvLyBVcGRhdGUgb3B0aW9uc1xyXG4gICAgJHByb2R1Y3RDb250YWluZXIuZmluZCgnLnByb2R1Y3Qtb3B0aW9ucycpLmVtcHR5KCkuaHRtbChvcHRpb25zSHRtbCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEeW5hbWljYWxseSBjcmVhdGVzIEJvb3RzdHJhcCBjYXJvdXNlbCBmcm9tIHJlc3BvbnNlIGNvbnRhaW5pbmcgaW1hZ2VzXHJcbiAqIEBwYXJhbSB7T2JqZWN0W119IGltZ3MgLSBBcnJheSBvZiBsYXJnZSBwcm9kdWN0IGltYWdlcyxhbG9uZyB3aXRoIHJlbGF0ZWQgaW5mb3JtYXRpb25cclxuICogQHBhcmFtIHtqUXVlcnl9ICRwcm9kdWN0Q29udGFpbmVyIC0gRE9NIGVsZW1lbnQgZm9yIGEgZ2l2ZW4gcHJvZHVjdFxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQ2Fyb3VzZWwoaW1ncywgJHByb2R1Y3RDb250YWluZXIpIHtcclxuICAgIHZhciBjYXJvdXNlbCA9ICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5jYXJvdXNlbCcpO1xyXG4gICAgJChjYXJvdXNlbCkuY2Fyb3VzZWwoJ2Rpc3Bvc2UnKTtcclxuICAgIHZhciBjYXJvdXNlbElkID0gJChjYXJvdXNlbCkuYXR0cignaWQnKTtcclxuICAgICQoY2Fyb3VzZWwpLmVtcHR5KCkuYXBwZW5kKCc8b2wgY2xhc3M9XCJjYXJvdXNlbC1pbmRpY2F0b3JzXCI+PC9vbD48ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtaW5uZXJcIiByb2xlPVwibGlzdGJveFwiPjwvZGl2PjxhIGNsYXNzPVwiY2Fyb3VzZWwtY29udHJvbC1wcmV2XCIgaHJlZj1cIiMnICsgY2Fyb3VzZWxJZCArICdcIiByb2xlPVwiYnV0dG9uXCIgZGF0YS1zbGlkZT1cInByZXZcIj48c3BhbiBjbGFzcz1cImZhIGljb24tcHJldlwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cInNyLW9ubHlcIj4nICsgJChjYXJvdXNlbCkuZGF0YSgncHJldicpICsgJzwvc3Bhbj48L2E+PGEgY2xhc3M9XCJjYXJvdXNlbC1jb250cm9sLW5leHRcIiBocmVmPVwiIycgKyBjYXJvdXNlbElkICsgJ1wiIHJvbGU9XCJidXR0b25cIiBkYXRhLXNsaWRlPVwibmV4dFwiPjxzcGFuIGNsYXNzPVwiZmEgaWNvbi1uZXh0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwic3Itb25seVwiPicgKyAkKGNhcm91c2VsKS5kYXRhKCduZXh0JykgKyAnPC9zcGFuPjwvYT4nKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1ncy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICQoJzxkaXYgY2xhc3M9XCJjYXJvdXNlbC1pdGVtXCI+PGltZyBzcmM9XCInICsgaW1nc1tpXS51cmwgKyAnXCIgY2xhc3M9XCJkLWJsb2NrIGltZy1mbHVpZFwiIGFsdD1cIicgKyBpbWdzW2ldLmFsdCArICcgaW1hZ2UgbnVtYmVyICcgKyBwYXJzZUludChpbWdzW2ldLmluZGV4LCAxMCkgKyAnXCIgdGl0bGU9XCInICsgaW1nc1tpXS50aXRsZSArICdcIiBpdGVtcHJvcD1cImltYWdlXCIgLz48L2Rpdj4nKS5hcHBlbmRUbygkKGNhcm91c2VsKS5maW5kKCcuY2Fyb3VzZWwtaW5uZXInKSk7XHJcbiAgICAgICAgJCgnPGxpIGRhdGEtdGFyZ2V0PVwiIycgKyBjYXJvdXNlbElkICsgJ1wiIGRhdGEtc2xpZGUtdG89XCInICsgaSArICdcIiBjbGFzcz1cIlwiPjwvbGk+JykuYXBwZW5kVG8oJChjYXJvdXNlbCkuZmluZCgnLmNhcm91c2VsLWluZGljYXRvcnMnKSk7XHJcbiAgICB9XHJcbiAgICAkKCQoY2Fyb3VzZWwpLmZpbmQoJy5jYXJvdXNlbC1pdGVtJykpLmZpcnN0KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgJCgkKGNhcm91c2VsKS5maW5kKCcuY2Fyb3VzZWwtaW5kaWNhdG9ycyA+IGxpJykpLmZpcnN0KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgaWYgKGltZ3MubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgJCgkKGNhcm91c2VsKS5maW5kKCcuY2Fyb3VzZWwtaW5kaWNhdG9ycywgYVtjbGFzc149XCJjYXJvdXNlbC1jb250cm9sLVwiXScpKS5kZXRhY2goKTtcclxuICAgIH1cclxuICAgICQoY2Fyb3VzZWwpLmNhcm91c2VsKCk7XHJcbiAgICAkKCQoY2Fyb3VzZWwpLmZpbmQoJy5jYXJvdXNlbC1pbmRpY2F0b3JzJykpLmF0dHIoJ2FyaWEtaGlkZGVuJywgdHJ1ZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQYXJzZXMgSlNPTiBmcm9tIEFqYXggY2FsbCBtYWRlIHdoZW5ldmVyIGFuIGF0dHJpYnV0ZSB2YWx1ZSBpcyBbZGVdc2VsZWN0ZWRcclxuICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlIC0gcmVzcG9uc2UgZnJvbSBBamF4IGNhbGxcclxuICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlLnByb2R1Y3QgLSBQcm9kdWN0IG9iamVjdFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVzcG9uc2UucHJvZHVjdC5pZCAtIFByb2R1Y3QgSURcclxuICogQHBhcmFtIHtPYmplY3RbXX0gcmVzcG9uc2UucHJvZHVjdC52YXJpYXRpb25BdHRyaWJ1dGVzIC0gUHJvZHVjdCBhdHRyaWJ1dGVzXHJcbiAqIEBwYXJhbSB7T2JqZWN0W119IHJlc3BvbnNlLnByb2R1Y3QuaW1hZ2VzIC0gUHJvZHVjdCBpbWFnZXNcclxuICogQHBhcmFtIHtib29sZWFufSByZXNwb25zZS5wcm9kdWN0Lmhhc1JlcXVpcmVkQXR0cnNTZWxlY3RlZCAtIEZsYWcgYXMgdG8gd2hldGhlciBhbGwgcmVxdWlyZWRcclxuICogICAgIGF0dHJpYnV0ZXMgaGF2ZSBiZWVuIHNlbGVjdGVkLiAgVXNlZCBwYXJ0aWFsbHkgdG9cclxuICogICAgIGRldGVybWluZSB3aGV0aGVyIHRoZSBBZGQgdG8gQ2FydCBidXR0b24gY2FuIGJlIGVuYWJsZWRcclxuICogQHBhcmFtIHtqUXVlcnl9ICRwcm9kdWN0Q29udGFpbmVyIC0gRE9NIGVsZW1lbnQgZm9yIGEgZ2l2ZW4gcHJvZHVjdC5cclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZVZhcmlhbnRSZXNwb25zZShyZXNwb25zZSwgJHByb2R1Y3RDb250YWluZXIpIHtcclxuICAgIHZhciBpc0Nob2ljZU9mQm9udXNQcm9kdWN0cyA9XHJcbiAgICAgICAgJHByb2R1Y3RDb250YWluZXIucGFyZW50cygnLmNob29zZS1ib251cy1wcm9kdWN0LWRpYWxvZycpLmxlbmd0aCA+IDA7XHJcbiAgICB2YXIgaXNWYXJhaW50O1xyXG4gICAgaWYgKHJlc3BvbnNlLnByb2R1Y3QudmFyaWF0aW9uQXR0cmlidXRlcykge1xyXG4gICAgICAgIHVwZGF0ZUF0dHJzKHJlc3BvbnNlLnByb2R1Y3QudmFyaWF0aW9uQXR0cmlidXRlcywgJHByb2R1Y3RDb250YWluZXIsIHJlc3BvbnNlLnJlc291cmNlcyk7XHJcbiAgICAgICAgaXNWYXJhaW50ID0gcmVzcG9uc2UucHJvZHVjdC5wcm9kdWN0VHlwZSA9PT0gJ3ZhcmlhbnQnO1xyXG4gICAgICAgIGlmIChpc0Nob2ljZU9mQm9udXNQcm9kdWN0cyAmJiBpc1ZhcmFpbnQpIHtcclxuICAgICAgICAgICAgJHByb2R1Y3RDb250YWluZXIucGFyZW50KCcuYm9udXMtcHJvZHVjdC1pdGVtJylcclxuICAgICAgICAgICAgICAgIC5kYXRhKCdwaWQnLCByZXNwb25zZS5wcm9kdWN0LmlkKTtcclxuXHJcbiAgICAgICAgICAgICRwcm9kdWN0Q29udGFpbmVyLnBhcmVudCgnLmJvbnVzLXByb2R1Y3QtaXRlbScpXHJcbiAgICAgICAgICAgICAgICAuZGF0YSgncmVhZHktdG8tb3JkZXInLCByZXNwb25zZS5wcm9kdWN0LnJlYWR5VG9PcmRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBwcmltYXJ5IGltYWdlc1xyXG4gICAgdmFyIHByaW1hcnlJbWFnZVVybHMgPSByZXNwb25zZS5wcm9kdWN0LmltYWdlcy5sYXJnZTtcclxuICAgIGNyZWF0ZUNhcm91c2VsKHByaW1hcnlJbWFnZVVybHMsICRwcm9kdWN0Q29udGFpbmVyKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgcHJpY2luZ1xyXG4gICAgaWYgKCFpc0Nob2ljZU9mQm9udXNQcm9kdWN0cykge1xyXG4gICAgICAgIHZhciAkcHJpY2VTZWxlY3RvciA9ICQoJy5wcmljZXMgLnByaWNlJywgJHByb2R1Y3RDb250YWluZXIpLmxlbmd0aFxyXG4gICAgICAgICAgICA/ICQoJy5wcmljZXMgLnByaWNlJywgJHByb2R1Y3RDb250YWluZXIpXHJcbiAgICAgICAgICAgIDogJCgnLnByaWNlcyAucHJpY2UnKTtcclxuICAgICAgICAkcHJpY2VTZWxlY3Rvci5yZXBsYWNlV2l0aChyZXNwb25zZS5wcm9kdWN0LnByaWNlLmh0bWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBwcm9tb3Rpb25zXHJcbiAgICAkcHJvZHVjdENvbnRhaW5lci5maW5kKCcucHJvbW90aW9ucycpLmVtcHR5KCkuaHRtbChyZXNwb25zZS5wcm9kdWN0LnByb21vdGlvbnNIdG1sKTtcclxuXHJcbiAgICB1cGRhdGVBdmFpbGFiaWxpdHkocmVzcG9uc2UsICRwcm9kdWN0Q29udGFpbmVyKTtcclxuXHJcbiAgICBpZiAoaXNDaG9pY2VPZkJvbnVzUHJvZHVjdHMpIHtcclxuICAgICAgICB2YXIgJHNlbGVjdEJ1dHRvbiA9ICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5zZWxlY3QtYm9udXMtcHJvZHVjdCcpO1xyXG4gICAgICAgICRzZWxlY3RCdXR0b24udHJpZ2dlcignYm9udXNwcm9kdWN0OnVwZGF0ZVNlbGVjdEJ1dHRvbicsIHtcclxuICAgICAgICAgICAgcHJvZHVjdDogcmVzcG9uc2UucHJvZHVjdCwgJHByb2R1Y3RDb250YWluZXI6ICRwcm9kdWN0Q29udGFpbmVyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEVuYWJsZSBcIkFkZCB0byBDYXJ0XCIgYnV0dG9uIGlmIGFsbCByZXF1aXJlZCBhdHRyaWJ1dGVzIGhhdmUgYmVlbiBzZWxlY3RlZFxyXG4gICAgICAgICQoJ2J1dHRvbi5hZGQtdG8tY2FydCwgYnV0dG9uLmFkZC10by1jYXJ0LWdsb2JhbCwgYnV0dG9uLnVwZGF0ZS1jYXJ0LXByb2R1Y3QtZ2xvYmFsJykudHJpZ2dlcigncHJvZHVjdDp1cGRhdGVBZGRUb0NhcnQnLCB7XHJcbiAgICAgICAgICAgIHByb2R1Y3Q6IHJlc3BvbnNlLnByb2R1Y3QsICRwcm9kdWN0Q29udGFpbmVyOiAkcHJvZHVjdENvbnRhaW5lclxyXG4gICAgICAgIH0pLnRyaWdnZXIoJ3Byb2R1Y3Q6c3RhdHVzVXBkYXRlJywgcmVzcG9uc2UucHJvZHVjdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXBkYXRlIGF0dHJpYnV0ZXNcclxuICAgICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5tYWluLWF0dHJpYnV0ZXMnKS5lbXB0eSgpXHJcbiAgICAgICAgLmh0bWwoZ2V0QXR0cmlidXRlc0h0bWwocmVzcG9uc2UucHJvZHVjdC5hdHRyaWJ1dGVzKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdHlwZXNwZWMgVXBkYXRlZFF1YW50aXR5XHJcbiAqIEB0eXBlIE9iamVjdFxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHNlbGVjdGVkIC0gV2hldGhlciB0aGUgcXVhbnRpdHkgaGFzIGJlZW4gc2VsZWN0ZWRcclxuICogQHByb3BlcnR5IHtzdHJpbmd9IHZhbHVlIC0gVGhlIG51bWJlciBvZiBwcm9kdWN0cyB0byBwdXJjaGFzZVxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdXJsIC0gQ29tcGlsZWQgVVJMIHRoYXQgc3BlY2lmaWVzIHZhcmlhdGlvbiBhdHRyaWJ1dGVzLCBwcm9kdWN0IElELCBvcHRpb25zLFxyXG4gKiAgICAgZXRjLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSBxdWFudGl0eSBET00gZWxlbWVudHMgcG9zdCBBamF4IGNhbGxcclxuICogQHBhcmFtIHtVcGRhdGVkUXVhbnRpdHlbXX0gcXVhbnRpdGllcyAtXHJcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkcHJvZHVjdENvbnRhaW5lciAtIERPTSBjb250YWluZXIgZm9yIGEgZ2l2ZW4gcHJvZHVjdFxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlUXVhbnRpdGllcyhxdWFudGl0aWVzLCAkcHJvZHVjdENvbnRhaW5lcikge1xyXG4gICAgaWYgKCEoJHByb2R1Y3RDb250YWluZXIucGFyZW50KCcuYm9udXMtcHJvZHVjdC1pdGVtJykubGVuZ3RoID4gMCkpIHtcclxuICAgICAgICB2YXIgb3B0aW9uc0h0bWwgPSBxdWFudGl0aWVzLm1hcChmdW5jdGlvbiAocXVhbnRpdHkpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gcXVhbnRpdHkuc2VsZWN0ZWQgPyAnIHNlbGVjdGVkICcgOiAnJztcclxuICAgICAgICAgICAgcmV0dXJuICc8b3B0aW9uIHZhbHVlPVwiJyArIHF1YW50aXR5LnZhbHVlICsgJ1wiICBkYXRhLXVybD1cIicgKyBxdWFudGl0eS51cmwgKyAnXCInICtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkICsgJz4nICsgcXVhbnRpdHkudmFsdWUgKyAnPC9vcHRpb24+JztcclxuICAgICAgICB9KS5qb2luKCcnKTtcclxuICAgICAgICBnZXRRdWFudGl0eVNlbGVjdG9yKCRwcm9kdWN0Q29udGFpbmVyKS5lbXB0eSgpLmh0bWwob3B0aW9uc0h0bWwpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogdXBkYXRlcyB0aGUgcHJvZHVjdCB2aWV3IHdoZW4gYSBwcm9kdWN0IGF0dHJpYnV0ZSBpcyBzZWxlY3RlZCBvciBkZXNlbGVjdGVkIG9yIHdoZW5cclxuICogICAgICAgICBjaGFuZ2luZyBxdWFudGl0eVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0ZWRWYWx1ZVVybCAtIHRoZSBVcmwgZm9yIHRoZSBzZWxlY3RlZCB2YXJpYXRpb24gdmFsdWVcclxuICogQHBhcmFtIHtqUXVlcnl9ICRwcm9kdWN0Q29udGFpbmVyIC0gRE9NIGVsZW1lbnQgZm9yIGN1cnJlbnQgcHJvZHVjdFxyXG4gKi9cclxuZnVuY3Rpb24gYXR0cmlidXRlU2VsZWN0KHNlbGVjdGVkVmFsdWVVcmwsICRwcm9kdWN0Q29udGFpbmVyKSB7XHJcbiAgICBpZiAoc2VsZWN0ZWRWYWx1ZVVybCkge1xyXG4gICAgICAgICQoJ2JvZHknKS50cmlnZ2VyKCdwcm9kdWN0OmJlZm9yZUF0dHJpYnV0ZVNlbGVjdCcsXHJcbiAgICAgICAgICAgIHsgdXJsOiBzZWxlY3RlZFZhbHVlVXJsLCBjb250YWluZXI6ICRwcm9kdWN0Q29udGFpbmVyIH0pO1xyXG5cclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IHNlbGVjdGVkVmFsdWVVcmwsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVWYXJpYW50UmVzcG9uc2UoZGF0YSwgJHByb2R1Y3RDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlT3B0aW9ucyhkYXRhLnByb2R1Y3Qub3B0aW9uc0h0bWwsICRwcm9kdWN0Q29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVF1YW50aXRpZXMoZGF0YS5wcm9kdWN0LnF1YW50aXRpZXMsICRwcm9kdWN0Q29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS50cmlnZ2VyKCdwcm9kdWN0OmFmdGVyQXR0cmlidXRlU2VsZWN0JyxcclxuICAgICAgICAgICAgICAgICAgICB7IGRhdGE6IGRhdGEsIGNvbnRhaW5lcjogJHByb2R1Y3RDb250YWluZXIgfSk7XHJcbiAgICAgICAgICAgICAgICAkLnNwaW5uZXIoKS5zdG9wKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkLnNwaW5uZXIoKS5zdG9wKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHJpZXZlcyB1cmwgdG8gdXNlIHdoZW4gYWRkaW5nIGEgcHJvZHVjdCB0byB0aGUgY2FydFxyXG4gKlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IC0gVGhlIHByb3ZpZGVkIFVSTCB0byB1c2Ugd2hlbiBhZGRpbmcgYSBwcm9kdWN0IHRvIHRoZSBjYXJ0XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBZGRUb0NhcnRVcmwoKSB7XHJcbiAgICByZXR1cm4gJCgnLmFkZC10by1jYXJ0LXVybCcpLnZhbCgpO1xyXG59XHJcblxyXG4vKipcclxuICogUGFyc2VzIHRoZSBodG1sIGZvciBhIG1vZGFsIHdpbmRvd1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbCAtIHJlcHJlc2VudGluZyB0aGUgYm9keSBhbmQgZm9vdGVyIG9mIHRoZSBtb2RhbCB3aW5kb3dcclxuICpcclxuICogQHJldHVybiB7T2JqZWN0fSAtIE9iamVjdCB3aXRoIHByb3BlcnRpZXMgYm9keSBhbmQgZm9vdGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VIdG1sKGh0bWwpIHtcclxuICAgIHZhciAkaHRtbCA9ICQoJzxkaXY+JykuYXBwZW5kKCQucGFyc2VIVE1MKGh0bWwpKTtcclxuXHJcbiAgICB2YXIgYm9keSA9ICRodG1sLmZpbmQoJy5jaG9pY2Utb2YtYm9udXMtcHJvZHVjdCcpO1xyXG4gICAgdmFyIGZvb3RlciA9ICRodG1sLmZpbmQoJy5tb2RhbC1mb290ZXInKS5jaGlsZHJlbigpO1xyXG5cclxuICAgIHJldHVybiB7IGJvZHk6IGJvZHksIGZvb3RlcjogZm9vdGVyIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgdXJsIHRvIHVzZSB3aGVuIGFkZGluZyBhIHByb2R1Y3QgdG8gdGhlIGNhcnRcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSBkYXRhIG9iamVjdCB1c2VkIHRvIGZpbGwgaW4gZHluYW1pYyBwb3J0aW9ucyBvZiB0aGUgaHRtbFxyXG4gKi9cclxuZnVuY3Rpb24gY2hvb3NlQm9udXNQcm9kdWN0cyhkYXRhKSB7XHJcbiAgICAkKCcubW9kYWwtYm9keScpLnNwaW5uZXIoKS5zdGFydCgpO1xyXG5cclxuICAgIGlmICgkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwnKS5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwnKS5yZW1vdmUoKTtcclxuICAgIH1cclxuICAgIHZhciBib251c1VybDtcclxuICAgIGlmIChkYXRhLmJvbnVzQ2hvaWNlUnVsZUJhc2VkKSB7XHJcbiAgICAgICAgYm9udXNVcmwgPSBkYXRhLnNob3dQcm9kdWN0c1VybFJ1bGVCYXNlZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYm9udXNVcmwgPSBkYXRhLnNob3dQcm9kdWN0c1VybExpc3RCYXNlZDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaHRtbFN0cmluZyA9ICc8IS0tIE1vZGFsIC0tPidcclxuICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIGlkPVwiY2hvb3NlQm9udXNQcm9kdWN0TW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiPidcclxuICAgICAgICArICc8c3BhbiBjbGFzcz1cImVudGVyLW1lc3NhZ2Ugc3Itb25seVwiID48L3NwYW4+J1xyXG4gICAgICAgICsgJzxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2cgY2hvb3NlLWJvbnVzLXByb2R1Y3QtZGlhbG9nXCIgJ1xyXG4gICAgICAgICsgJ2RhdGEtdG90YWwtcXR5PVwiJyArIGRhdGEubWF4Qm9udXNJdGVtcyArICdcIidcclxuICAgICAgICArICdkYXRhLVVVSUQ9XCInICsgZGF0YS51dWlkICsgJ1wiJ1xyXG4gICAgICAgICsgJ2RhdGEtcGxpVVVJRD1cIicgKyBkYXRhLnBsaVVVSUQgKyAnXCInXHJcbiAgICAgICAgKyAnZGF0YS1hZGRUb0NhcnRVcmw9XCInICsgZGF0YS5hZGRUb0NhcnRVcmwgKyAnXCInXHJcbiAgICAgICAgKyAnZGF0YS1wYWdlU3RhcnQ9XCIwXCInXHJcbiAgICAgICAgKyAnZGF0YS1wYWdlU2l6ZT1cIicgKyBkYXRhLnBhZ2VTaXplICsgJ1wiJ1xyXG4gICAgICAgICsgJ2RhdGEtbW9yZVVSTD1cIicgKyBkYXRhLnNob3dQcm9kdWN0c1VybFJ1bGVCYXNlZCArICdcIidcclxuICAgICAgICArICdkYXRhLWJvbnVzQ2hvaWNlUnVsZUJhc2VkPVwiJyArIGRhdGEuYm9udXNDaG9pY2VSdWxlQmFzZWQgKyAnXCI+J1xyXG4gICAgICAgICsgJzwhLS0gTW9kYWwgY29udGVudC0tPidcclxuICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPidcclxuICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+J1xyXG4gICAgICAgICsgJyAgICA8c3BhbiBjbGFzcz1cIlwiPicgKyBkYXRhLmxhYmVscy5zZWxlY3Rwcm9kcyArICc8L3NwYW4+J1xyXG4gICAgICAgICsgJyAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlIHB1bGwtcmlnaHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPidcclxuICAgICAgICArICcgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+J1xyXG4gICAgICAgICsgJyAgICAgICAgPHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+IDwvc3Bhbj4nXHJcbiAgICAgICAgKyAnICAgIDwvYnV0dG9uPidcclxuICAgICAgICArICc8L2Rpdj4nXHJcbiAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj48L2Rpdj4nXHJcbiAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPjwvZGl2PidcclxuICAgICAgICArICc8L2Rpdj4nXHJcbiAgICAgICAgKyAnPC9kaXY+J1xyXG4gICAgICAgICsgJzwvZGl2Pic7XHJcbiAgICAkKCdib2R5JykuYXBwZW5kKGh0bWxTdHJpbmcpO1xyXG4gICAgJCgnLm1vZGFsLWJvZHknKS5zcGlubmVyKCkuc3RhcnQoKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogYm9udXNVcmwsXHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICB2YXIgcGFyc2VkSHRtbCA9IHBhcnNlSHRtbChyZXNwb25zZS5yZW5kZXJlZFRlbXBsYXRlKTtcclxuICAgICAgICAgICAgJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsIC5tb2RhbC1ib2R5JykuZW1wdHkoKTtcclxuICAgICAgICAgICAgJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsIC5lbnRlci1tZXNzYWdlJykudGV4dChyZXNwb25zZS5lbnRlckRpYWxvZ01lc3NhZ2UpO1xyXG4gICAgICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwgLm1vZGFsLWhlYWRlciAuY2xvc2UgLnNyLW9ubHknKS50ZXh0KHJlc3BvbnNlLmNsb3NlQnV0dG9uVGV4dCk7XHJcbiAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCAubW9kYWwtYm9keScpLmh0bWwocGFyc2VkSHRtbC5ib2R5KTtcclxuICAgICAgICAgICAgJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsIC5tb2RhbC1mb290ZXInKS5odG1sKHBhcnNlZEh0bWwuZm9vdGVyKTtcclxuICAgICAgICAgICAgJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsJykubW9kYWwoJ3Nob3cnKTtcclxuICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgTWluaS1DYXJ0IHF1YW50aXR5IHZhbHVlIGFmdGVyIHRoZSBjdXN0b21lciBoYXMgcHJlc3NlZCB0aGUgXCJBZGQgdG8gQ2FydFwiIGJ1dHRvblxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVzcG9uc2UgLSBhamF4IHJlc3BvbnNlIGZyb20gY2xpY2tpbmcgdGhlIGFkZCB0byBjYXJ0IGJ1dHRvblxyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlUG9zdENhcnRBZGQocmVzcG9uc2UpIHtcclxuICAgICQoJy5taW5pY2FydCcpLnRyaWdnZXIoJ2NvdW50OnVwZGF0ZScsIHJlc3BvbnNlKTtcclxuICAgIHZhciBtZXNzYWdlVHlwZSA9IHJlc3BvbnNlLmVycm9yID8gJ2FsZXJ0LWRhbmdlcicgOiAnYWxlcnQtc3VjY2Vzcyc7XHJcbiAgICAvLyBzaG93IGFkZCB0byBjYXJ0IHRvYXN0XHJcbiAgICBpZiAocmVzcG9uc2UubmV3Qm9udXNEaXNjb3VudExpbmVJdGVtXHJcbiAgICAgICAgJiYgT2JqZWN0LmtleXMocmVzcG9uc2UubmV3Qm9udXNEaXNjb3VudExpbmVJdGVtKS5sZW5ndGggIT09IDApIHtcclxuICAgICAgICBjaG9vc2VCb251c1Byb2R1Y3RzKHJlc3BvbnNlLm5ld0JvbnVzRGlzY291bnRMaW5lSXRlbSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICgkKCcuYWRkLXRvLWNhcnQtbWVzc2FnZXMnKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWRkLXRvLWNhcnQtbWVzc2FnZXNcIj48L2Rpdj4nXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKCcuYWRkLXRvLWNhcnQtbWVzc2FnZXMnKS5hcHBlbmQoXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnQgJyArIG1lc3NhZ2VUeXBlICsgJyBhZGQtdG8tYmFza2V0LWFsZXJ0IHRleHQtY2VudGVyXCIgcm9sZT1cImFsZXJ0XCI+J1xyXG4gICAgICAgICAgICArIHJlc3BvbnNlLm1lc3NhZ2VcclxuICAgICAgICAgICAgKyAnPC9kaXY+J1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuYWRkLXRvLWJhc2tldC1hbGVydCcpLnJlbW92ZSgpO1xyXG4gICAgICAgIH0sIDUwMDApO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmV0cmlldmVzIHRoZSBidW5kbGUgcHJvZHVjdCBpdGVtIElEJ3MgZm9yIHRoZSBDb250cm9sbGVyIHRvIHJlcGxhY2UgYnVuZGxlIG1hc3RlciBwcm9kdWN0XHJcbiAqIGl0ZW1zIHdpdGggdGhlaXIgc2VsZWN0ZWQgdmFyaWFudHNcclxuICpcclxuICogQHJldHVybiB7c3RyaW5nW119IC0gTGlzdCBvZiBzZWxlY3RlZCBidW5kbGUgcHJvZHVjdCBpdGVtIElEJ3NcclxuICovXHJcbmZ1bmN0aW9uIGdldENoaWxkUHJvZHVjdHMoKSB7XHJcbiAgICB2YXIgY2hpbGRQcm9kdWN0cyA9IFtdO1xyXG4gICAgJCgnLmJ1bmRsZS1pdGVtJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2hpbGRQcm9kdWN0cy5wdXNoKHtcclxuICAgICAgICAgICAgcGlkOiAkKHRoaXMpLmZpbmQoJy5wcm9kdWN0LWlkJykudGV4dCgpLFxyXG4gICAgICAgICAgICBxdWFudGl0eTogcGFyc2VJbnQoJCh0aGlzKS5maW5kKCdsYWJlbC5xdWFudGl0eScpLmRhdGEoJ3F1YW50aXR5JyksIDEwKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGNoaWxkUHJvZHVjdHMubGVuZ3RoID8gSlNPTi5zdHJpbmdpZnkoY2hpbGRQcm9kdWN0cykgOiBbXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHJpZXZlIHByb2R1Y3Qgb3B0aW9uc1xyXG4gKlxyXG4gKiBAcGFyYW0ge2pRdWVyeX0gJHByb2R1Y3RDb250YWluZXIgLSBET00gZWxlbWVudCBmb3IgY3VycmVudCBwcm9kdWN0XHJcbiAqIEByZXR1cm4ge3N0cmluZ30gLSBQcm9kdWN0IG9wdGlvbnMgYW5kIHRoZWlyIHNlbGVjdGVkIHZhbHVlc1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0T3B0aW9ucygkcHJvZHVjdENvbnRhaW5lcikge1xyXG4gICAgdmFyIG9wdGlvbnMgPSAkcHJvZHVjdENvbnRhaW5lclxyXG4gICAgICAgIC5maW5kKCcucHJvZHVjdC1vcHRpb24nKVxyXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJGVsT3B0aW9uID0gJCh0aGlzKS5maW5kKCcub3B0aW9ucy1zZWxlY3QnKTtcclxuICAgICAgICAgICAgdmFyIHVybFZhbHVlID0gJGVsT3B0aW9uLnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRWYWx1ZUlkID0gJGVsT3B0aW9uLmZpbmQoJ29wdGlvblt2YWx1ZT1cIicgKyB1cmxWYWx1ZSArICdcIl0nKVxyXG4gICAgICAgICAgICAgICAgLmRhdGEoJ3ZhbHVlLWlkJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25JZDogJCh0aGlzKS5kYXRhKCdvcHRpb24taWQnKSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkVmFsdWVJZDogc2VsZWN0ZWRWYWx1ZUlkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSkudG9BcnJheSgpO1xyXG5cclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvcHRpb25zKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE1ha2VzIGEgY2FsbCB0byB0aGUgc2VydmVyIHRvIHJlcG9ydCB0aGUgZXZlbnQgb2YgYWRkaW5nIGFuIGl0ZW0gdG8gdGhlIGNhcnRcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmcgfCBib29sZWFufSB1cmwgLSBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGVuZCBwb2ludCB0byBoaXQgc28gdGhhdCB0aGUgZXZlbnQgY2FuIGJlIHJlY29yZGVkLCBvciBmYWxzZVxyXG4gKi9cclxuZnVuY3Rpb24gbWluaUNhcnRSZXBvcnRpbmdVcmwodXJsKSB7XHJcbiAgICBpZiAodXJsKSB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIHJlcG9ydGluZyB1cmxzIGhpdCBvbiB0aGUgc2VydmVyXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBubyByZXBvcnRpbmcgdXJscyBoaXQgb24gdGhlIHNlcnZlclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgYXR0cmlidXRlU2VsZWN0OiBhdHRyaWJ1dGVTZWxlY3QsXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgZWRpdEJvbnVzUHJvZHVjdHM6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNob29zZUJvbnVzUHJvZHVjdHMoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBmb2N1c0Nob29zZUJvbnVzUHJvZHVjdE1vZGFsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnYm9keScpLm9uKCdzaG93bi5icy5tb2RhbCcsICcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCcpLnNpYmxpbmdzKCkuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwgLmNsb3NlJykuZm9jdXMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgb25DbG9zaW5nQ2hvb3NlQm9udXNQcm9kdWN0TW9kYWw6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCdib2R5Jykub24oJ2hpZGRlbi5icy5tb2RhbCcsICcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCcpLnNpYmxpbmdzKCkuYXR0cignYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgdHJhcENob29zZUJvbnVzUHJvZHVjdE1vZGFsRm9jdXM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCdib2R5Jykub24oJ2tleWRvd24nLCAnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIGZvY3VzUGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQ6IGUsXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJTZWxlY3RvcjogJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCcsXHJcbiAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnRTZWxlY3RvcjogJy5jbG9zZScsXHJcbiAgICAgICAgICAgICAgICBsYXN0RWxlbWVudFNlbGVjdG9yOiAnLmFkZC1ib251cy1wcm9kdWN0cydcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZm9jdXNIZWxwZXIuc2V0VGFiTmV4dEZvY3VzKGZvY3VzUGFyYW1zKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgY29sb3JBdHRyaWJ1dGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtYXR0cj1cImNvbG9yXCJdIGJ1dHRvbicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ2Rpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgJHByb2R1Y3RDb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5zZXQtaXRlbScpO1xyXG4gICAgICAgICAgICBpZiAoISRwcm9kdWN0Q29udGFpbmVyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgJHByb2R1Y3RDb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LWRldGFpbCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhdHRyaWJ1dGVTZWxlY3QoJCh0aGlzKS5hdHRyKCdkYXRhLXVybCcpLCAkcHJvZHVjdENvbnRhaW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNlbGVjdEF0dHJpYnV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnc2VsZWN0W2NsYXNzKj1cInNlbGVjdC1cIl0sIC5vcHRpb25zLXNlbGVjdCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciAkcHJvZHVjdENvbnRhaW5lciA9ICQodGhpcykuY2xvc2VzdCgnLnNldC1pdGVtJyk7XHJcbiAgICAgICAgICAgIGlmICghJHByb2R1Y3RDb250YWluZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lciA9ICQodGhpcykuY2xvc2VzdCgnLnByb2R1Y3QtZGV0YWlsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXR0cmlidXRlU2VsZWN0KGUuY3VycmVudFRhcmdldC52YWx1ZSwgJHByb2R1Y3RDb250YWluZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBhdmFpbGFiaWxpdHk6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJy5xdWFudGl0eS1zZWxlY3QnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHByb2R1Y3RDb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LWRldGFpbCcpO1xyXG4gICAgICAgICAgICBpZiAoISRwcm9kdWN0Q29udGFpbmVyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgJHByb2R1Y3RDb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5tb2RhbC1jb250ZW50JykuZmluZCgnLnByb2R1Y3QtcXVpY2t2aWV3Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgkKCcuYnVuZGxlLWl0ZW1zJywgJHByb2R1Y3RDb250YWluZXIpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlU2VsZWN0KCQoZS5jdXJyZW50VGFyZ2V0KS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5kYXRhKCd1cmwnKSxcclxuICAgICAgICAgICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgYWRkVG9DYXJ0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ2J1dHRvbi5hZGQtdG8tY2FydCwgYnV0dG9uLmFkZC10by1jYXJ0LWdsb2JhbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICB2YXIgY2x5ZGVXaWRnZXRzID0gQ2x5ZGVTaXRlUHJlZmVyZW5jZXMuQ0xZREVfV0lER0VUX0VOQUJMRUQ7XHJcbiAgICAgICAgICAgaWYgKGNseWRlV2lkZ2V0cykge1xyXG4gICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDb250cmFjdCA9IENseWRlLmdldFNlbGVjdGVkQ29udHJhY3QoKTtcclxuICAgICAgICAgICAgICAgdmFyIGNseWRlU2V0dGluZ3MgPSBDbHlkZS5nZXRTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICBpZiAoY2x5ZGVTZXR0aW5ncy5wcm9kdWN0UGFnZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ29udHJhY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2x5ZGVBZGRQcm9kdWN0VG9DYXJ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSBDbHlkZS5nZXRBY3RpdmVQcm9kdWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYXNDb250cmFjdHMgPSBwcm9kdWN0ICYmIHByb2R1Y3QuY29udHJhY3RzID8gcHJvZHVjdC5jb250cmFjdHMubGVuZ3RoID4gMCA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzQ29udHJhY3RzICYmIGNseWRlU2V0dGluZ3MubW9kYWwgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2x5ZGUuc2hvd01vZGFsKG51bGwsIGNseWRlQWRkUHJvZHVjdFRvQ2FydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbHlkZUFkZFByb2R1Y3RUb0NhcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjbHlkZVNldHRpbmdzLm1vZGFsID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBDbHlkZS5zaG93TW9kYWwobnVsbCwgY2x5ZGVBZGRQcm9kdWN0VG9DYXJ0KTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjbHlkZUFkZFByb2R1Y3RUb0NhcnQoKVxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNseWRlQWRkUHJvZHVjdFRvQ2FydCgpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBhZGRQcm9kdWN0VG9DYXJ0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ2J1dHRvbi5hZGQtVG8tQ2FydCwgYnV0dG9uLmFkZC10by1jYXJ0LWdsb2JhbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNseWRlV2lkZ2V0cyA9IENseWRlU2l0ZVByZWZlcmVuY2VzLkNMWURFX1dJREdFVF9FTkFCTEVEO1xyXG4gICAgICAgICAgICBpZiAoY2x5ZGVXaWRnZXRzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDb250cmFjdCA9IENseWRlLmdldFNlbGVjdGVkQ29udHJhY3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjbHlkZVNldHRpbmdzID0gQ2x5ZGUuZ2V0U2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIGlmIChjbHlkZVNldHRpbmdzLnByb2R1Y3RQYWdlID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ29udHJhY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNseWRlQWRkUHJvZHVjdFRvQ2FydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSBDbHlkZS5nZXRBY3RpdmVQcm9kdWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFzQ29udHJhY3RzID0gcHJvZHVjdCAmJiBwcm9kdWN0LmNvbnRyYWN0cyA/IHByb2R1Y3QuY29udHJhY3RzLmxlbmd0aCA+IDAgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNDb250cmFjdHMgJiYgY2x5ZGVTZXR0aW5ncy5tb2RhbCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2x5ZGUuc2hvd01vZGFsKG51bGwsIGNseWRlQWRkUHJvZHVjdFRvQ2FydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNseWRlQWRkUHJvZHVjdFRvQ2FydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNseWRlU2V0dGluZ3MubW9kYWwgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIENseWRlLnNob3dNb2RhbChudWxsLCBjbHlkZUFkZFByb2R1Y3RUb0NhcnQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjbHlkZUFkZFByb2R1Y3RUb0NhcnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNseWRlQWRkUHJvZHVjdFRvQ2FydCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgc2VsZWN0Qm9udXNQcm9kdWN0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zZWxlY3QtYm9udXMtcHJvZHVjdCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICRjaG9pY2VPZkJvbnVzUHJvZHVjdCA9ICQodGhpcykucGFyZW50cygnLmNob2ljZS1vZi1ib251cy1wcm9kdWN0Jyk7XHJcbiAgICAgICAgICAgIHZhciBwaWQgPSAkKHRoaXMpLmRhdGEoJ3BpZCcpO1xyXG4gICAgICAgICAgICB2YXIgbWF4UGlkcyA9ICQoJy5jaG9vc2UtYm9udXMtcHJvZHVjdC1kaWFsb2cnKS5kYXRhKCd0b3RhbC1xdHknKTtcclxuICAgICAgICAgICAgdmFyIHN1Ym1pdHRlZFF0eSA9IHBhcnNlSW50KCRjaG9pY2VPZkJvbnVzUHJvZHVjdC5maW5kKCcuYm9udXMtcXVhbnRpdHktc2VsZWN0JykudmFsKCksIDEwKTtcclxuICAgICAgICAgICAgdmFyIHRvdGFsUXR5ID0gMDtcclxuICAgICAgICAgICAgJC5lYWNoKCQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCAuc2VsZWN0ZWQtYm9udXMtcHJvZHVjdHMgLnNlbGVjdGVkLXBpZCcpLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbFF0eSArPSAkKHRoaXMpLmRhdGEoJ3F0eScpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdG90YWxRdHkgKz0gc3VibWl0dGVkUXR5O1xyXG4gICAgICAgICAgICB2YXIgb3B0aW9uSUQgPSAkY2hvaWNlT2ZCb251c1Byb2R1Y3QuZmluZCgnLnByb2R1Y3Qtb3B0aW9uJykuZGF0YSgnb3B0aW9uLWlkJyk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZUlkID0gJGNob2ljZU9mQm9udXNQcm9kdWN0LmZpbmQoJy5vcHRpb25zLXNlbGVjdCBvcHRpb246c2VsZWN0ZWQnKS5kYXRhKCd2YWx1ZUlkJyk7XHJcbiAgICAgICAgICAgIGlmICh0b3RhbFF0eSA8PSBtYXhQaWRzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRCb251c1Byb2R1Y3RIdG1sID0gJydcclxuICAgICAgICAgICAgICAgICsgJzxkaXYgY2xhc3M9XCJzZWxlY3RlZC1waWQgcm93XCIgJ1xyXG4gICAgICAgICAgICAgICAgKyAnZGF0YS1waWQ9XCInICsgcGlkICsgJ1wiJ1xyXG4gICAgICAgICAgICAgICAgKyAnZGF0YS1xdHk9XCInICsgc3VibWl0dGVkUXR5ICsgJ1wiJ1xyXG4gICAgICAgICAgICAgICAgKyAnZGF0YS1vcHRpb25JRD1cIicgKyAob3B0aW9uSUQgfHwgJycpICsgJ1wiJ1xyXG4gICAgICAgICAgICAgICAgKyAnZGF0YS1vcHRpb24tc2VsZWN0ZWQtdmFsdWU9XCInICsgKHZhbHVlSWQgfHwgJycpICsgJ1wiJ1xyXG4gICAgICAgICAgICAgICAgKyAnPidcclxuICAgICAgICAgICAgICAgICsgJzxkaXYgY2xhc3M9XCJjb2wtc20tMTEgY29sLTkgYm9udXMtcHJvZHVjdC1uYW1lXCIgPidcclxuICAgICAgICAgICAgICAgICsgJGNob2ljZU9mQm9udXNQcm9kdWN0LmZpbmQoJy5wcm9kdWN0LW5hbWUnKS5odG1sKClcclxuICAgICAgICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICAgICAgICAgICsgJzxkaXYgY2xhc3M9XCJjb2wtMVwiPjxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsIC5zZWxlY3RlZC1ib251cy1wcm9kdWN0cycpLmFwcGVuZChzZWxlY3RlZEJvbnVzUHJvZHVjdEh0bWwpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnByZS1jYXJ0LXByb2R1Y3RzJykuaHRtbCh0b3RhbFF0eSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2VsZWN0ZWQtYm9udXMtcHJvZHVjdHMgLmJvbnVzLXN1bW1hcnknKS5yZW1vdmVDbGFzcygnYWxlcnQtZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2VsZWN0ZWQtYm9udXMtcHJvZHVjdHMgLmJvbnVzLXN1bW1hcnknKS5hZGRDbGFzcygnYWxlcnQtZGFuZ2VyJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICByZW1vdmVCb251c1Byb2R1Y3Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNlbGVjdGVkLXBpZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdmFyICRzZWxlY3RlZCA9ICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCAuc2VsZWN0ZWQtYm9udXMtcHJvZHVjdHMgLnNlbGVjdGVkLXBpZCcpO1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgICAgICBpZiAoJHNlbGVjdGVkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgJHNlbGVjdGVkLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IHBhcnNlSW50KCQodGhpcykuZGF0YSgncXR5JyksIDEwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkKCcucHJlLWNhcnQtcHJvZHVjdHMnKS5odG1sKGNvdW50KTtcclxuICAgICAgICAgICAgJCgnLnNlbGVjdGVkLWJvbnVzLXByb2R1Y3RzIC5ib251cy1zdW1tYXJ5JykucmVtb3ZlQ2xhc3MoJ2FsZXJ0LWRhbmdlcicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGVuYWJsZUJvbnVzUHJvZHVjdFNlbGVjdGlvbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJ2JvZHknKS5vbignYm9udXNwcm9kdWN0OnVwZGF0ZVNlbGVjdEJ1dHRvbicsIGZ1bmN0aW9uIChlLCByZXNwb25zZSkge1xyXG4gICAgICAgICAgICAkKCdidXR0b24uc2VsZWN0LWJvbnVzLXByb2R1Y3QnLCByZXNwb25zZS4kcHJvZHVjdENvbnRhaW5lcikuYXR0cignZGlzYWJsZWQnLFxyXG4gICAgICAgICAgICAgICAgKCFyZXNwb25zZS5wcm9kdWN0LnJlYWR5VG9PcmRlciB8fCAhcmVzcG9uc2UucHJvZHVjdC5hdmFpbGFibGUpKTtcclxuICAgICAgICAgICAgdmFyIHBpZCA9IHJlc3BvbnNlLnByb2R1Y3QuaWQ7XHJcbiAgICAgICAgICAgICQoJ2J1dHRvbi5zZWxlY3QtYm9udXMtcHJvZHVjdCcsIHJlc3BvbnNlLiRwcm9kdWN0Q29udGFpbmVyKS5kYXRhKCdwaWQnLCBwaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHNob3dNb3JlQm9udXNQcm9kdWN0czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2hvdy1tb3JlLWJvbnVzLXByb2R1Y3RzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJCh0aGlzKS5kYXRhKCd1cmwnKTtcclxuICAgICAgICAgICAgJCgnLm1vZGFsLWNvbnRlbnQnKS5zcGlubmVyKCkuc3RhcnQoKTtcclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChodG1sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlZEh0bWwgPSBwYXJzZUh0bWwoaHRtbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1vZGFsLWJvZHknKS5hcHBlbmQocGFyc2VkSHRtbC5ib2R5KTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuc2hvdy1tb3JlLWJvbnVzLXByb2R1Y3RzOmZpcnN0JykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1vZGFsLWNvbnRlbnQnKS5zcGlubmVyKCkuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1vZGFsLWNvbnRlbnQnKS5zcGlubmVyKCkuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBhZGRCb251c1Byb2R1Y3RzVG9DYXJ0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hZGQtYm9udXMtcHJvZHVjdHMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkcmVhZHlUb09yZGVyQm9udXNQcm9kdWN0cyA9ICQoJy5jaG9vc2UtYm9udXMtcHJvZHVjdC1kaWFsb2cgLnNlbGVjdGVkLXBpZCcpO1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSAnP3BpZHM9JztcclxuICAgICAgICAgICAgdmFyIHVybCA9ICQoJy5jaG9vc2UtYm9udXMtcHJvZHVjdC1kaWFsb2cnKS5kYXRhKCdhZGR0b2NhcnR1cmwnKTtcclxuICAgICAgICAgICAgdmFyIHBpZHNPYmplY3QgPSB7XHJcbiAgICAgICAgICAgICAgICBib251c1Byb2R1Y3RzOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJC5lYWNoKCRyZWFkeVRvT3JkZXJCb251c1Byb2R1Y3RzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcXR5T3B0aW9uID1cclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludCgkKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKCdxdHknKSwgMTApO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHF0eU9wdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5kYXRhKCdvcHRpb25pZCcpICYmICQodGhpcykuZGF0YSgnb3B0aW9uLXNlbGVjdGVkLXZhbHVlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5vcHRpb25JZCA9ICQodGhpcykuZGF0YSgnb3B0aW9uaWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnByb2R1Y3RJZCA9ICQodGhpcykuZGF0YSgncGlkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZFZhbHVlSWQgPSAkKHRoaXMpLmRhdGEoJ29wdGlvbi1zZWxlY3RlZC12YWx1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwaWRzT2JqZWN0LmJvbnVzUHJvZHVjdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpZDogJCh0aGlzKS5kYXRhKCdwaWQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXR5OiBxdHlPcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtvcHRpb25dXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGlkc09iamVjdC50b3RhbFF0eSA9IHBhcnNlSW50KCQoJy5wcmUtY2FydC1wcm9kdWN0cycpLmh0bWwoKSwgMTApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcXVlcnlTdHJpbmcgKz0gSlNPTi5zdHJpbmdpZnkocGlkc09iamVjdCk7XHJcbiAgICAgICAgICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcgKyAnJnV1aWQ9JyArICQoJy5jaG9vc2UtYm9udXMtcHJvZHVjdC1kaWFsb2cnKS5kYXRhKCd1dWlkJyk7XHJcbiAgICAgICAgICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcgKyAnJnBsaXV1aWQ9JyArICQoJy5jaG9vc2UtYm9udXMtcHJvZHVjdC1kaWFsb2cnKS5kYXRhKCdwbGl1dWlkJyk7XHJcbiAgICAgICAgICAgICQuc3Bpbm5lcigpLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCArIHF1ZXJ5U3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQuc3Bpbm5lcigpLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwnKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLmFkZC10by1jYXJ0LW1lc3NhZ2VzJykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYWRkLXRvLWNhcnQtbWVzc2FnZXNcIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWRkLXRvLWNhcnQtbWVzc2FnZXMnKS5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlciBhZGQtdG8tYmFza2V0LWFsZXJ0IHRleHQtY2VudGVyXCInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArICcgcm9sZT1cImFsZXJ0XCI+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBkYXRhLmVycm9yTWVzc2FnZSArICc8L2Rpdj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFkZC10by1iYXNrZXQtYWxlcnQnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNvbmZpZ3VyZS1ib251cy1wcm9kdWN0LWF0dHJpYnV0ZXMnKS5odG1sKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYm9udXMtcHJvZHVjdHMtc3RlcDInKS5yZW1vdmVDbGFzcygnaGlkZGVuLXhsLWRvd24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsJykubW9kYWwoJ2hpZGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCcuYWRkLXRvLWNhcnQtbWVzc2FnZXMnKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJhZGQtdG8tY2FydC1tZXNzYWdlc1wiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5taW5pY2FydC1xdWFudGl0eScpLmh0bWwoZGF0YS50b3RhbFF0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hZGQtdG8tY2FydC1tZXNzYWdlcycpLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2VzcyBhZGQtdG8tYmFza2V0LWFsZXJ0IHRleHQtY2VudGVyXCInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArICcgcm9sZT1cImFsZXJ0XCI+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBkYXRhLm1zZ1N1Y2Nlc3MgKyAnPC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5hZGQtdG8tYmFza2V0LWFsZXJ0JykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLmNhcnQtcGFnZScpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxNTAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkLnNwaW5uZXIoKS5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRQaWRWYWx1ZTogZ2V0UGlkVmFsdWUsXHJcbiAgICBnZXRRdWFudGl0eVNlbGVjdGVkOiBnZXRRdWFudGl0eVNlbGVjdGVkLFxyXG4gICAgbWluaUNhcnRSZXBvcnRpbmdVcmw6IG1pbmlDYXJ0UmVwb3J0aW5nVXJsXHJcbn07XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///50\n")}});
!function(g){var I={};function C(n){if(I[n])return I[n].exports;var t=I[n]={i:n,l:!1,exports:{}};return g[n].call(t.exports,t,t.exports,C),t.l=!0,t.exports}C.m=g,C.c=I,C.d=function(g,I,n){C.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:n})},C.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},C.t=function(g,I){if(1&I&&(g=C(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var n=Object.create(null);if(C.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var t in g)C.d(n,t,function(I){return g[I]}.bind(null,t));return n},C.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(I,"a",I),I},C.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},C.p="",C(C.s=15)}([,function(module,exports,__webpack_require__){"use strict";eval("\n\n/* global $, document, Clyde, ClydeSitePreferences */\n\nvar clydeWidget;\nvar productId = document.querySelector('.product-number span').innerHTML || '';\n\nif (Clyde.checkReady() === false) {\n    Clyde.init({\n        key: ClydeSitePreferences.CLYDE_API_KEY,\n        defaultSelector: '#clyde-cta',\n        type: ClydeSitePreferences.CLYDE_WIDGET_TYPE,\n        environment: ClydeSitePreferences.CLYDE_WIDGET_ENVIRONMENT,\n        skipGeoIp: true\n    }, function () {\n        Clyde.setActiveProduct(productId);\n    }\n    );\n}\n\nclydeWidget = {\n    getSelectedClydeContract: function (form) {\n        var clydeContract = Clyde.getSelectedContract();\n        if (clydeContract) {\n            if (document.getElementById('clydeContractSku')) {\n                form.find('#clydeContractSku').attr('value', clydeContract.sku);\n                form.find('#clydeContractPrice').attr('value', clydeContract.recommendedPrice);\n            } else {\n                var clydeForm = form;\n                clydeForm.clydeContractSku = clydeContract.sku;\n                clydeForm.clydeContractPrice = clydeContract.recommendedPrice;\n                return clydeForm;\n            }\n        }\n        return form;\n    },\n    getClydeVariantChange: function (variantId) {\n        if (Clyde && variantId) {\n            var previousId = Clyde.getActiveProduct() ? Clyde.getActiveProduct().sku : null;\n            // If there was no active variant, or the previous one is different from the new one\n            if (previousId && previousId !== variantId) {\n                Clyde.setActiveProduct(variantId);\n            }\n        }\n    }\n};\n\nmodule.exports = clydeWidget;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2ludF9jbHlkZV9zZnJhL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy9nZXRDbHlkZVdpZGdldC5qcz84MmJlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyogZ2xvYmFsICQsIGRvY3VtZW50LCBDbHlkZSwgQ2x5ZGVTaXRlUHJlZmVyZW5jZXMgKi9cblxudmFyIGNseWRlV2lkZ2V0O1xudmFyIHByb2R1Y3RJZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LW51bWJlciBzcGFuJykuaW5uZXJIVE1MIHx8ICcnO1xuXG5pZiAoQ2x5ZGUuY2hlY2tSZWFkeSgpID09PSBmYWxzZSkge1xuICAgIENseWRlLmluaXQoe1xuICAgICAgICBrZXk6IENseWRlU2l0ZVByZWZlcmVuY2VzLkNMWURFX0FQSV9LRVksXG4gICAgICAgIGRlZmF1bHRTZWxlY3RvcjogJyNjbHlkZS1jdGEnLFxuICAgICAgICB0eXBlOiBDbHlkZVNpdGVQcmVmZXJlbmNlcy5DTFlERV9XSURHRVRfVFlQRSxcbiAgICAgICAgZW52aXJvbm1lbnQ6IENseWRlU2l0ZVByZWZlcmVuY2VzLkNMWURFX1dJREdFVF9FTlZJUk9OTUVOVCxcbiAgICAgICAgc2tpcEdlb0lwOiB0cnVlXG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBDbHlkZS5zZXRBY3RpdmVQcm9kdWN0KHByb2R1Y3RJZCk7XG4gICAgfVxuICAgICk7XG59XG5cbmNseWRlV2lkZ2V0ID0ge1xuICAgIGdldFNlbGVjdGVkQ2x5ZGVDb250cmFjdDogZnVuY3Rpb24gKGZvcm0pIHtcbiAgICAgICAgdmFyIGNseWRlQ29udHJhY3QgPSBDbHlkZS5nZXRTZWxlY3RlZENvbnRyYWN0KCk7XG4gICAgICAgIGlmIChjbHlkZUNvbnRyYWN0KSB7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NseWRlQ29udHJhY3RTa3UnKSkge1xuICAgICAgICAgICAgICAgIGZvcm0uZmluZCgnI2NseWRlQ29udHJhY3RTa3UnKS5hdHRyKCd2YWx1ZScsIGNseWRlQ29udHJhY3Quc2t1KTtcbiAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJyNjbHlkZUNvbnRyYWN0UHJpY2UnKS5hdHRyKCd2YWx1ZScsIGNseWRlQ29udHJhY3QucmVjb21tZW5kZWRQcmljZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjbHlkZUZvcm0gPSBmb3JtO1xuICAgICAgICAgICAgICAgIGNseWRlRm9ybS5jbHlkZUNvbnRyYWN0U2t1ID0gY2x5ZGVDb250cmFjdC5za3U7XG4gICAgICAgICAgICAgICAgY2x5ZGVGb3JtLmNseWRlQ29udHJhY3RQcmljZSA9IGNseWRlQ29udHJhY3QucmVjb21tZW5kZWRQcmljZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2x5ZGVGb3JtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtO1xuICAgIH0sXG4gICAgZ2V0Q2x5ZGVWYXJpYW50Q2hhbmdlOiBmdW5jdGlvbiAodmFyaWFudElkKSB7XG4gICAgICAgIGlmIChDbHlkZSAmJiB2YXJpYW50SWQpIHtcbiAgICAgICAgICAgIHZhciBwcmV2aW91c0lkID0gQ2x5ZGUuZ2V0QWN0aXZlUHJvZHVjdCgpID8gQ2x5ZGUuZ2V0QWN0aXZlUHJvZHVjdCgpLnNrdSA6IG51bGw7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSB3YXMgbm8gYWN0aXZlIHZhcmlhbnQsIG9yIHRoZSBwcmV2aW91cyBvbmUgaXMgZGlmZmVyZW50IGZyb20gdGhlIG5ldyBvbmVcbiAgICAgICAgICAgIGlmIChwcmV2aW91c0lkICYmIHByZXZpb3VzSWQgIT09IHZhcmlhbnRJZCkge1xuICAgICAgICAgICAgICAgIENseWRlLnNldEFjdGl2ZVByb2R1Y3QodmFyaWFudElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY2x5ZGVXaWRnZXQ7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = function (include) {\n    if (typeof include === 'function') {\n        include();\n    } else if (typeof include === 'object') {\n        Object.keys(include).forEach(function (key) {\n            if (typeof include[key] === 'function') {\n                include[key]();\n            }\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zdG9yZWZyb250LXJlZmVyZW5jZS1hcmNoaXRlY3R1cmUvY2FydHJpZGdlcy9hcHBfc3RvcmVmcm9udF9iYXNlL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy91dGlsLmpzPzRkZDQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaW5jbHVkZSkge1xuICAgIGlmICh0eXBlb2YgaW5jbHVkZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpbmNsdWRlKCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgaW5jbHVkZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoaW5jbHVkZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGluY2x1ZGVba2V5XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGluY2x1ZGVba2V5XSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n")},,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";eval("\n\n/* global $, document, Clyde, ClydeSitePreferences */\n\nvar processInclude = __webpack_require__(2);\n\n$(document).ready(function () {\n    processInclude(__webpack_require__(16));\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2ludF9jbHlkZV9zZnJhL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy9wcm9kdWN0RGV0YWlsLmpzPzI5ZmYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7O0FBRUEscUJBQXFCLG1CQUFPLENBQUMsQ0FBVzs7QUFFeEM7QUFDQSxtQkFBbUIsbUJBQU8sQ0FBQyxFQUFrQjtBQUM3QyxDQUFDIiwiZmlsZSI6IjE1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vKiBnbG9iYWwgJCwgZG9jdW1lbnQsIENseWRlLCBDbHlkZVNpdGVQcmVmZXJlbmNlcyAqL1xuXG52YXIgcHJvY2Vzc0luY2x1ZGUgPSByZXF1aXJlKCdiYXNlL3V0aWwnKTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIHByb2Nlc3NJbmNsdWRlKHJlcXVpcmUoJy4vcHJvZHVjdC9kZXRhaWwnKSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///15\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\n/* global $, document, Clyde, ClydeSitePreferences */\n\nvar base = __webpack_require__(17);\nvar clydeWidget = __webpack_require__(1);\n\n/**\n * @description Get clyde widget on variant change\n * @param {Object} response - response object\n */\nfunction getClydeVariantChange(response) {\n    clydeWidget.getClydeVariantChange(response.data.product.id);\n}\n\nmodule.exports = {\n    availability: base.availability,\n\n    addToCart: base.addToCart,\n\n    updateAttributesAndDetails: function () {\n        $('body').on('product:statusUpdate', function (e, data) {\n            var $productContainer = $('.product-detail[data-pid=\"' + data.id + '\"]');\n\n            $productContainer.find('.description-and-detail .product-attributes')\n                .empty()\n                .html(data.attributesHtml);\n\n            if (data.shortDescription) {\n                $productContainer.find('.description-and-detail .description')\n                    .removeClass('hidden-xl-down');\n                $productContainer.find('.description-and-detail .description .content')\n                    .empty()\n                    .html(data.shortDescription);\n            } else {\n                $productContainer.find('.description-and-detail .description')\n                    .addClass('hidden-xl-down');\n            }\n\n            if (data.longDescription) {\n                $productContainer.find('.description-and-detail .details')\n                    .removeClass('hidden-xl-down');\n                $productContainer.find('.description-and-detail .details .content')\n                    .empty()\n                    .html(data.longDescription);\n            } else {\n                $productContainer.find('.description-and-detail .details')\n                    .addClass('hidden-xl-down');\n            }\n        });\n    },\n\n    showSpinner: function () {\n        $('body').on('product:beforeAddToCart product:beforeAttributeSelect', function () {\n            $.spinner().start();\n        });\n    },\n    updateAttribute: function () {\n        $('body').on('product:afterAttributeSelect', function (e, response) {\n            if ($('.product-detail>.bundle-items').length) {\n                response.container.data('pid', response.data.product.id);\n                response.container.find('.product-id').text(response.data.product.id);\n            } else if ($('.product-set-detail').eq(0)) {\n                response.container.data('pid', response.data.product.id);\n                response.container.find('.product-id').text(response.data.product.id);\n                getClydeVariantChange(response);\n            } else {\n                $('.product-id').text(response.data.product.id);\n                $('.product-detail:not(\".bundle-item\")').data('pid', response.data.product.id);\n            }\n        });\n    },\n    updateAddToCart: function () {\n        $('body').on('product:updateAddToCart', function (e, response) {\n            // update local add to cart (for sets)\n            $('button.add-to-cart', response.$productContainer).attr('disabled',\n                (!response.product.readyToOrder || !response.product.available));\n\n            var enable = $('.product-availability').toArray().every(function (item) {\n                return $(item).data('available') && $(item).data('ready-to-order');\n            });\n            $('button.add-to-cart-global').attr('disabled', !enable);\n        });\n    },\n    updateAvailability: function () {\n        $('body').on('product:updateAvailability', function (e, response) {\n            $('div.availability', response.$productContainer)\n                .data('ready-to-order', response.product.readyToOrder)\n                .data('available', response.product.available);\n\n            $('.availability-msg', response.$productContainer)\n                .empty().html(response.message);\n\n            if ($('.global-availability').length) {\n                var allAvailable = $('.product-availability').toArray()\n                    .every(function (item) { return $(item).data('available'); });\n\n                var allReady = $('.product-availability').toArray()\n                    .every(function (item) { return $(item).data('ready-to-order'); });\n\n                $('.global-availability')\n                    .data('ready-to-order', allReady)\n                    .data('available', allAvailable);\n\n                $('.global-availability .availability-msg').empty()\n                    .html(allReady ? response.message : response.resources.info_selectforstock);\n            }\n        });\n    },\n    sizeChart: function () {\n        $('.size-chart a').on('click', function (e) {\n            e.preventDefault();\n            var url = $(this).attr('href');\n            var $prodSizeChart = $(this).closest('.size-chart').find('.size-chart-collapsible');\n            if ($prodSizeChart.is(':empty')) {\n                $.ajax({\n                    url: url,\n                    type: 'get',\n                    dataType: 'json',\n                    success: function (data) {\n                        $prodSizeChart.append(data.content);\n                    }\n                });\n            }\n            $prodSizeChart.toggleClass('active');\n        });\n\n        var $sizeChart = $('.size-chart-collapsible');\n        $('body').on('click touchstart', function (e) {\n            if ($('.size-chart').has(e.target).length <= 0) {\n                $sizeChart.removeClass('active');\n            }\n        });\n    },\n    copyProductLink: function () {\n        $('body').on('click', '#fa-link', function () {\n            event.preventDefault();\n            var $temp = $('<input>');\n            $('body').append($temp);\n            $temp.val($('#shareUrl').val()).select();\n            document.execCommand('copy');\n            $temp.remove();\n            $('.copy-link-message').attr('role', 'alert');\n            $('.copy-link-message').removeClass('d-none');\n            setTimeout(function () {\n                $('.copy-link-message').addClass('d-none');\n            }, 3000);\n        });\n    },\n\n    focusChooseBonusProductModal: base.focusChooseBonusProductModal()\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2ludF9jbHlkZV9zZnJhL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy9wcm9kdWN0L2RldGFpbC5qcz8zYTQwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBLFdBQVcsbUJBQU8sQ0FBQyxFQUFRO0FBQzNCLGtCQUFrQixtQkFBTyxDQUFDLENBQXNCOztBQUVoRDtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRDQUE0QyxrQ0FBa0MsRUFBRTs7QUFFaEY7QUFDQSw0Q0FBNEMsdUNBQXVDLEVBQUU7O0FBRXJGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBIiwiZmlsZSI6IjE2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vKiBnbG9iYWwgJCwgZG9jdW1lbnQsIENseWRlLCBDbHlkZVNpdGVQcmVmZXJlbmNlcyAqL1xuXG52YXIgYmFzZSA9IHJlcXVpcmUoJy4vYmFzZScpO1xudmFyIGNseWRlV2lkZ2V0ID0gcmVxdWlyZSgnLi4vZ2V0Q2x5ZGVXaWRnZXQuanMnKTtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gR2V0IGNseWRlIHdpZGdldCBvbiB2YXJpYW50IGNoYW5nZVxuICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlIC0gcmVzcG9uc2Ugb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGdldENseWRlVmFyaWFudENoYW5nZShyZXNwb25zZSkge1xuICAgIGNseWRlV2lkZ2V0LmdldENseWRlVmFyaWFudENoYW5nZShyZXNwb25zZS5kYXRhLnByb2R1Y3QuaWQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBhdmFpbGFiaWxpdHk6IGJhc2UuYXZhaWxhYmlsaXR5LFxuXG4gICAgYWRkVG9DYXJ0OiBiYXNlLmFkZFRvQ2FydCxcblxuICAgIHVwZGF0ZUF0dHJpYnV0ZXNBbmREZXRhaWxzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5vbigncHJvZHVjdDpzdGF0dXNVcGRhdGUnLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyICRwcm9kdWN0Q29udGFpbmVyID0gJCgnLnByb2R1Y3QtZGV0YWlsW2RhdGEtcGlkPVwiJyArIGRhdGEuaWQgKyAnXCJdJyk7XG5cbiAgICAgICAgICAgICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5kZXNjcmlwdGlvbi1hbmQtZGV0YWlsIC5wcm9kdWN0LWF0dHJpYnV0ZXMnKVxuICAgICAgICAgICAgICAgIC5lbXB0eSgpXG4gICAgICAgICAgICAgICAgLmh0bWwoZGF0YS5hdHRyaWJ1dGVzSHRtbCk7XG5cbiAgICAgICAgICAgIGlmIChkYXRhLnNob3J0RGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lci5maW5kKCcuZGVzY3JpcHRpb24tYW5kLWRldGFpbCAuZGVzY3JpcHRpb24nKVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2hpZGRlbi14bC1kb3duJyk7XG4gICAgICAgICAgICAgICAgJHByb2R1Y3RDb250YWluZXIuZmluZCgnLmRlc2NyaXB0aW9uLWFuZC1kZXRhaWwgLmRlc2NyaXB0aW9uIC5jb250ZW50JylcbiAgICAgICAgICAgICAgICAgICAgLmVtcHR5KClcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoZGF0YS5zaG9ydERlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHByb2R1Y3RDb250YWluZXIuZmluZCgnLmRlc2NyaXB0aW9uLWFuZC1kZXRhaWwgLmRlc2NyaXB0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdoaWRkZW4teGwtZG93bicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0YS5sb25nRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lci5maW5kKCcuZGVzY3JpcHRpb24tYW5kLWRldGFpbCAuZGV0YWlscycpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnaGlkZGVuLXhsLWRvd24nKTtcbiAgICAgICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lci5maW5kKCcuZGVzY3JpcHRpb24tYW5kLWRldGFpbCAuZGV0YWlscyAuY29udGVudCcpXG4gICAgICAgICAgICAgICAgICAgIC5lbXB0eSgpXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKGRhdGEubG9uZ0Rlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHByb2R1Y3RDb250YWluZXIuZmluZCgnLmRlc2NyaXB0aW9uLWFuZC1kZXRhaWwgLmRldGFpbHMnKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2hpZGRlbi14bC1kb3duJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBzaG93U3Bpbm5lcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdib2R5Jykub24oJ3Byb2R1Y3Q6YmVmb3JlQWRkVG9DYXJ0IHByb2R1Y3Q6YmVmb3JlQXR0cmlidXRlU2VsZWN0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RhcnQoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICB1cGRhdGVBdHRyaWJ1dGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdwcm9kdWN0OmFmdGVyQXR0cmlidXRlU2VsZWN0JywgZnVuY3Rpb24gKGUsIHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAoJCgnLnByb2R1Y3QtZGV0YWlsPi5idW5kbGUtaXRlbXMnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5jb250YWluZXIuZGF0YSgncGlkJywgcmVzcG9uc2UuZGF0YS5wcm9kdWN0LmlkKTtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5jb250YWluZXIuZmluZCgnLnByb2R1Y3QtaWQnKS50ZXh0KHJlc3BvbnNlLmRhdGEucHJvZHVjdC5pZCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQoJy5wcm9kdWN0LXNldC1kZXRhaWwnKS5lcSgwKSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmNvbnRhaW5lci5kYXRhKCdwaWQnLCByZXNwb25zZS5kYXRhLnByb2R1Y3QuaWQpO1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmNvbnRhaW5lci5maW5kKCcucHJvZHVjdC1pZCcpLnRleHQocmVzcG9uc2UuZGF0YS5wcm9kdWN0LmlkKTtcbiAgICAgICAgICAgICAgICBnZXRDbHlkZVZhcmlhbnRDaGFuZ2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcucHJvZHVjdC1pZCcpLnRleHQocmVzcG9uc2UuZGF0YS5wcm9kdWN0LmlkKTtcbiAgICAgICAgICAgICAgICAkKCcucHJvZHVjdC1kZXRhaWw6bm90KFwiLmJ1bmRsZS1pdGVtXCIpJykuZGF0YSgncGlkJywgcmVzcG9uc2UuZGF0YS5wcm9kdWN0LmlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICB1cGRhdGVBZGRUb0NhcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdwcm9kdWN0OnVwZGF0ZUFkZFRvQ2FydCcsIGZ1bmN0aW9uIChlLCByZXNwb25zZSkge1xuICAgICAgICAgICAgLy8gdXBkYXRlIGxvY2FsIGFkZCB0byBjYXJ0IChmb3Igc2V0cylcbiAgICAgICAgICAgICQoJ2J1dHRvbi5hZGQtdG8tY2FydCcsIHJlc3BvbnNlLiRwcm9kdWN0Q29udGFpbmVyKS5hdHRyKCdkaXNhYmxlZCcsXG4gICAgICAgICAgICAgICAgKCFyZXNwb25zZS5wcm9kdWN0LnJlYWR5VG9PcmRlciB8fCAhcmVzcG9uc2UucHJvZHVjdC5hdmFpbGFibGUpKTtcblxuICAgICAgICAgICAgdmFyIGVuYWJsZSA9ICQoJy5wcm9kdWN0LWF2YWlsYWJpbGl0eScpLnRvQXJyYXkoKS5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkKGl0ZW0pLmRhdGEoJ2F2YWlsYWJsZScpICYmICQoaXRlbSkuZGF0YSgncmVhZHktdG8tb3JkZXInKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnYnV0dG9uLmFkZC10by1jYXJ0LWdsb2JhbCcpLmF0dHIoJ2Rpc2FibGVkJywgIWVuYWJsZSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgdXBkYXRlQXZhaWxhYmlsaXR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5vbigncHJvZHVjdDp1cGRhdGVBdmFpbGFiaWxpdHknLCBmdW5jdGlvbiAoZSwgcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICQoJ2Rpdi5hdmFpbGFiaWxpdHknLCByZXNwb25zZS4kcHJvZHVjdENvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAuZGF0YSgncmVhZHktdG8tb3JkZXInLCByZXNwb25zZS5wcm9kdWN0LnJlYWR5VG9PcmRlcilcbiAgICAgICAgICAgICAgICAuZGF0YSgnYXZhaWxhYmxlJywgcmVzcG9uc2UucHJvZHVjdC5hdmFpbGFibGUpO1xuXG4gICAgICAgICAgICAkKCcuYXZhaWxhYmlsaXR5LW1zZycsIHJlc3BvbnNlLiRwcm9kdWN0Q29udGFpbmVyKVxuICAgICAgICAgICAgICAgIC5lbXB0eSgpLmh0bWwocmVzcG9uc2UubWVzc2FnZSk7XG5cbiAgICAgICAgICAgIGlmICgkKCcuZ2xvYmFsLWF2YWlsYWJpbGl0eScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBhbGxBdmFpbGFibGUgPSAkKCcucHJvZHVjdC1hdmFpbGFiaWxpdHknKS50b0FycmF5KClcbiAgICAgICAgICAgICAgICAgICAgLmV2ZXJ5KGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiAkKGl0ZW0pLmRhdGEoJ2F2YWlsYWJsZScpOyB9KTtcblxuICAgICAgICAgICAgICAgIHZhciBhbGxSZWFkeSA9ICQoJy5wcm9kdWN0LWF2YWlsYWJpbGl0eScpLnRvQXJyYXkoKVxuICAgICAgICAgICAgICAgICAgICAuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuICQoaXRlbSkuZGF0YSgncmVhZHktdG8tb3JkZXInKTsgfSk7XG5cbiAgICAgICAgICAgICAgICAkKCcuZ2xvYmFsLWF2YWlsYWJpbGl0eScpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKCdyZWFkeS10by1vcmRlcicsIGFsbFJlYWR5KVxuICAgICAgICAgICAgICAgICAgICAuZGF0YSgnYXZhaWxhYmxlJywgYWxsQXZhaWxhYmxlKTtcblxuICAgICAgICAgICAgICAgICQoJy5nbG9iYWwtYXZhaWxhYmlsaXR5IC5hdmFpbGFiaWxpdHktbXNnJykuZW1wdHkoKVxuICAgICAgICAgICAgICAgICAgICAuaHRtbChhbGxSZWFkeSA/IHJlc3BvbnNlLm1lc3NhZ2UgOiByZXNwb25zZS5yZXNvdXJjZXMuaW5mb19zZWxlY3Rmb3JzdG9jayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgc2l6ZUNoYXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5zaXplLWNoYXJ0IGEnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHVybCA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgdmFyICRwcm9kU2l6ZUNoYXJ0ID0gJCh0aGlzKS5jbG9zZXN0KCcuc2l6ZS1jaGFydCcpLmZpbmQoJy5zaXplLWNoYXJ0LWNvbGxhcHNpYmxlJyk7XG4gICAgICAgICAgICBpZiAoJHByb2RTaXplQ2hhcnQuaXMoJzplbXB0eScpKSB7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHByb2RTaXplQ2hhcnQuYXBwZW5kKGRhdGEuY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRwcm9kU2l6ZUNoYXJ0LnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyICRzaXplQ2hhcnQgPSAkKCcuc2l6ZS1jaGFydC1jb2xsYXBzaWJsZScpO1xuICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKCQoJy5zaXplLWNoYXJ0JykuaGFzKGUudGFyZ2V0KS5sZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgICAgICRzaXplQ2hhcnQucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGNvcHlQcm9kdWN0TGluazogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJyNmYS1saW5rJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciAkdGVtcCA9ICQoJzxpbnB1dD4nKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJHRlbXApO1xuICAgICAgICAgICAgJHRlbXAudmFsKCQoJyNzaGFyZVVybCcpLnZhbCgpKS5zZWxlY3QoKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7XG4gICAgICAgICAgICAkdGVtcC5yZW1vdmUoKTtcbiAgICAgICAgICAgICQoJy5jb3B5LWxpbmstbWVzc2FnZScpLmF0dHIoJ3JvbGUnLCAnYWxlcnQnKTtcbiAgICAgICAgICAgICQoJy5jb3B5LWxpbmstbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdkLW5vbmUnKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoJy5jb3B5LWxpbmstbWVzc2FnZScpLmFkZENsYXNzKCdkLW5vbmUnKTtcbiAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgZm9jdXNDaG9vc2VCb251c1Byb2R1Y3RNb2RhbDogYmFzZS5mb2N1c0Nob29zZUJvbnVzUHJvZHVjdE1vZGFsKClcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///16\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\n/* global $, document, Clyde, ClydeSitePreferences */\n\nvar focusHelper = __webpack_require__(18);\nvar clydeWidget = __webpack_require__(1);\n\n/**\n * Retrieves the relevant pid value\n * @param {jquery} $el - DOM container for a given add to cart button\n * @return {string} - value to be used when adding product to cart\n */\nfunction getPidValue($el) {\n    var pid;\n\n    if ($('#quickViewModal').hasClass('show') && !$('.product-set').length) {\n        pid = $($el).closest('.modal-content').find('.product-quickview').data('pid');\n    } else if ($('.product-set-detail').length || $('.product-set').length) {\n        pid = $($el).closest('.product-detail').find('.product-id').text();\n    } else {\n        pid = $('.product-detail:not(\".bundle-item\")').data('pid');\n    }\n\n    return pid;\n}\n\n/**\n * Retrieve contextual quantity selector\n * @param {jquery} $el - DOM container for the relevant quantity\n * @return {jquery} - quantity selector DOM container\n */\nfunction getQuantitySelector($el) {\n    return $el && $('.set-items').length\n        ? $($el).closest('.product-detail').find('.quantity-select')\n        : $('.quantity-select');\n}\n\n/**\n * Retrieves the value associated with the Quantity pull-down menu\n * @param {jquery} $el - DOM container for the relevant quantity\n * @return {string} - value found in the quantity input\n */\nfunction getQuantitySelected($el) {\n    return getQuantitySelector($el).val();\n}\n\n/**\n * Process the attribute values for an attribute that has image swatches\n *\n * @param {Object} attr - Attribute\n * @param {string} attr.id - Attribute ID\n * @param {Object[]} attr.values - Array of attribute value objects\n * @param {string} attr.values.value - Attribute coded value\n * @param {string} attr.values.url - URL to de/select an attribute value of the product\n * @param {boolean} attr.values.isSelectable - Flag as to whether an attribute value can be\n *     selected.  If there is no variant that corresponds to a specific combination of attribute\n *     values, an attribute may be disabled in the Product Detail Page\n * @param {jQuery} $productContainer - DOM container for a given product\n * @param {Object} msgs - object containing resource messages\n */\nfunction processSwatchValues(attr, $productContainer, msgs) {\n    attr.values.forEach(function (attrValue) {\n        var $attrValue = $productContainer.find('[data-attr=\"' + attr.id + '\"] [data-attr-value=\"' +\n            attrValue.value + '\"]');\n        var $swatchButton = $attrValue.parent();\n\n        if (attrValue.selected) {\n            $attrValue.addClass('selected');\n            $attrValue.siblings('.selected-assistive-text').text(msgs.assistiveSelectedText);\n        } else {\n            $attrValue.removeClass('selected');\n            $attrValue.siblings('.selected-assistive-text').empty();\n        }\n\n        if (attrValue.url) {\n            $swatchButton.attr('data-url', attrValue.url);\n        } else {\n            $swatchButton.removeAttr('data-url');\n        }\n\n        // Disable if not selectable\n        $attrValue.removeClass('selectable unselectable');\n\n        $attrValue.addClass(attrValue.selectable ? 'selectable' : 'unselectable');\n    });\n}\n\n/**\n * Process attribute values associated with an attribute that does not have image swatches\n *\n * @param {Object} attr - Attribute\n * @param {string} attr.id - Attribute ID\n * @param {Object[]} attr.values - Array of attribute value objects\n * @param {string} attr.values.value - Attribute coded value\n * @param {string} attr.values.url - URL to de/select an attribute value of the product\n * @param {boolean} attr.values.isSelectable - Flag as to whether an attribute value can be\n *     selected.  If there is no variant that corresponds to a specific combination of attribute\n *     values, an attribute may be disabled in the Product Detail Page\n * @param {jQuery} $productContainer - DOM container for a given product\n */\nfunction processNonSwatchValues(attr, $productContainer) {\n    var $attr = '[data-attr=\"' + attr.id + '\"]';\n    var $defaultOption = $productContainer.find($attr + ' .select-' + attr.id + ' option:first');\n    $defaultOption.attr('value', attr.resetUrl);\n\n    attr.values.forEach(function (attrValue) {\n        var $attrValue = $productContainer\n            .find($attr + ' [data-attr-value=\"' + attrValue.value + '\"]');\n        $attrValue.attr('value', attrValue.url)\n            .removeAttr('disabled');\n\n        if (!attrValue.selectable) {\n            $attrValue.attr('disabled', true);\n        }\n    });\n}\n\n/**\n * Routes the handling of attribute processing depending on whether the attribute has image\n *     swatches or not\n *\n * @param {Object} attrs - Attribute\n * @param {string} attr.id - Attribute ID\n * @param {jQuery} $productContainer - DOM element for a given product\n * @param {Object} msgs - object containing resource messages\n */\nfunction updateAttrs(attrs, $productContainer, msgs) {\n    // Currently, the only attribute type that has image swatches is Color.\n    var attrsWithSwatches = ['color'];\n\n    attrs.forEach(function (attr) {\n        if (attrsWithSwatches.indexOf(attr.id) > -1) {\n            processSwatchValues(attr, $productContainer, msgs);\n        } else {\n            processNonSwatchValues(attr, $productContainer);\n        }\n    });\n}\n\n/**\n * Updates the availability status in the Product Detail Page\n *\n * @param {Object} response - Ajax response object after an\n *                            attribute value has been [de]selected\n * @param {jQuery} $productContainer - DOM element for a given product\n */\nfunction updateAvailability(response, $productContainer) {\n    var availabilityValue = '';\n    var availabilityMessages = response.product.availability.messages;\n    if (!response.product.readyToOrder) {\n        availabilityValue = '<li><div>' + response.resources.info_selectforstock + '</div></li>';\n    } else {\n        availabilityMessages.forEach(function (message) {\n            availabilityValue += '<li><div>' + message + '</div></li>';\n        });\n    }\n\n    $($productContainer).trigger('product:updateAvailability', {\n        product: response.product,\n        $productContainer: $productContainer,\n        message: availabilityValue,\n        resources: response.resources\n    });\n}\n\n/**\n * Generates html for product attributes section\n *\n * @param {array} attributes - list of attributes\n * @return {string} - Compiled HTML\n */\nfunction getAttributesHtml(attributes) {\n    if (!attributes) {\n        return '';\n    }\n\n    var html = '';\n\n    attributes.forEach(function (attributeGroup) {\n        if (attributeGroup.ID === 'mainAttributes') {\n            attributeGroup.attributes.forEach(function (attribute) {\n                html += '<div class=\"attribute-values\">' + attribute.label + ': '\n                    + attribute.value + '</div>';\n            });\n        }\n    });\n\n    return html;\n}\n\n/**\n * @typedef UpdatedOptionValue\n * @type Object\n * @property {string} id - Option value ID for look up\n * @property {string} url - Updated option value selection URL\n */\n\n/**\n * @typedef OptionSelectionResponse\n * @type Object\n * @property {string} priceHtml - Updated price HTML code\n * @property {Object} options - Updated Options\n * @property {string} options.id - Option ID\n * @property {UpdatedOptionValue[]} options.values - Option values\n */\n\n/**\n * Updates DOM using post-option selection Ajax response\n *\n * @param {OptionSelectionResponse} optionsHtml - Ajax response optionsHtml from selecting a product option\n * @param {jQuery} $productContainer - DOM element for current product\n */\nfunction updateOptions(optionsHtml, $productContainer) {\n\t// Update options\n    $productContainer.find('.product-options').empty().html(optionsHtml);\n}\n\n/**\n * Dynamically creates Bootstrap carousel from response containing images\n * @param {Object[]} imgs - Array of large product images,along with related information\n * @param {jQuery} $productContainer - DOM element for a given product\n */\nfunction createCarousel(imgs, $productContainer) {\n    var carousel = $productContainer.find('.carousel');\n    $(carousel).carousel('dispose');\n    var carouselId = $(carousel).attr('id');\n    $(carousel).empty().append('<ol class=\"carousel-indicators\"></ol><div class=\"carousel-inner\" role=\"listbox\"></div><a class=\"carousel-control-prev\" href=\"#' + carouselId + '\" role=\"button\" data-slide=\"prev\"><span class=\"fa icon-prev\" aria-hidden=\"true\"></span><span class=\"sr-only\">' + $(carousel).data('prev') + '</span></a><a class=\"carousel-control-next\" href=\"#' + carouselId + '\" role=\"button\" data-slide=\"next\"><span class=\"fa icon-next\" aria-hidden=\"true\"></span><span class=\"sr-only\">' + $(carousel).data('next') + '</span></a>');\n    for (var i = 0; i < imgs.length; i++) {\n        $('<div class=\"carousel-item\"><img src=\"' + imgs[i].url + '\" class=\"d-block img-fluid\" alt=\"' + imgs[i].alt + ' image number ' + parseInt(imgs[i].index, 10) + '\" title=\"' + imgs[i].title + '\" itemprop=\"image\" /></div>').appendTo($(carousel).find('.carousel-inner'));\n        $('<li data-target=\"#' + carouselId + '\" data-slide-to=\"' + i + '\" class=\"\"></li>').appendTo($(carousel).find('.carousel-indicators'));\n    }\n    $($(carousel).find('.carousel-item')).first().addClass('active');\n    $($(carousel).find('.carousel-indicators > li')).first().addClass('active');\n    if (imgs.length === 1) {\n        $($(carousel).find('.carousel-indicators, a[class^=\"carousel-control-\"]')).detach();\n    }\n    $(carousel).carousel();\n    $($(carousel).find('.carousel-indicators')).attr('aria-hidden', true);\n}\n\n/**\n * Parses JSON from Ajax call made whenever an attribute value is [de]selected\n * @param {Object} response - response from Ajax call\n * @param {Object} response.product - Product object\n * @param {string} response.product.id - Product ID\n * @param {Object[]} response.product.variationAttributes - Product attributes\n * @param {Object[]} response.product.images - Product images\n * @param {boolean} response.product.hasRequiredAttrsSelected - Flag as to whether all required\n *     attributes have been selected.  Used partially to\n *     determine whether the Add to Cart button can be enabled\n * @param {jQuery} $productContainer - DOM element for a given product.\n */\nfunction handleVariantResponse(response, $productContainer) {\n    var isChoiceOfBonusProducts =\n        $productContainer.parents('.choose-bonus-product-dialog').length > 0;\n    var isVaraint;\n    if (response.product.variationAttributes) {\n        updateAttrs(response.product.variationAttributes, $productContainer, response.resources);\n        isVaraint = response.product.productType === 'variant';\n        if (isChoiceOfBonusProducts && isVaraint) {\n            $productContainer.parent('.bonus-product-item')\n                .data('pid', response.product.id);\n\n            $productContainer.parent('.bonus-product-item')\n                .data('ready-to-order', response.product.readyToOrder);\n        }\n    }\n\n    // Update primary images\n    var primaryImageUrls = response.product.images.large;\n    createCarousel(primaryImageUrls, $productContainer);\n\n    // Update pricing\n    if (!isChoiceOfBonusProducts) {\n        var $priceSelector = $('.prices .price', $productContainer).length\n            ? $('.prices .price', $productContainer)\n            : $('.prices .price');\n        $priceSelector.replaceWith(response.product.price.html);\n    }\n\n    // Update promotions\n    $productContainer.find('.promotions').empty().html(response.product.promotionsHtml);\n\n    updateAvailability(response, $productContainer);\n\n    if (isChoiceOfBonusProducts) {\n        var $selectButton = $productContainer.find('.select-bonus-product');\n        $selectButton.trigger('bonusproduct:updateSelectButton', {\n            product: response.product, $productContainer: $productContainer\n        });\n    } else {\n        // Enable \"Add to Cart\" button if all required attributes have been selected\n        $('button.add-to-cart, button.add-to-cart-global, button.update-cart-product-global').trigger('product:updateAddToCart', {\n            product: response.product, $productContainer: $productContainer\n        }).trigger('product:statusUpdate', response.product);\n    }\n\n    // Update attributes\n    $productContainer.find('.main-attributes').empty()\n        .html(getAttributesHtml(response.product.attributes));\n}\n\n/**\n * @typespec UpdatedQuantity\n * @type Object\n * @property {boolean} selected - Whether the quantity has been selected\n * @property {string} value - The number of products to purchase\n * @property {string} url - Compiled URL that specifies variation attributes, product ID, options,\n *     etc.\n */\n\n/**\n * Updates the quantity DOM elements post Ajax call\n * @param {UpdatedQuantity[]} quantities -\n * @param {jQuery} $productContainer - DOM container for a given product\n */\nfunction updateQuantities(quantities, $productContainer) {\n    if (!($productContainer.parent('.bonus-product-item').length > 0)) {\n        var optionsHtml = quantities.map(function (quantity) {\n            var selected = quantity.selected ? ' selected ' : '';\n            return '<option value=\"' + quantity.value + '\"  data-url=\"' + quantity.url + '\"' +\n                selected + '>' + quantity.value + '</option>';\n        }).join('');\n        getQuantitySelector($productContainer).empty().html(optionsHtml);\n    }\n}\n\n/**\n * updates the product view when a product attribute is selected or deselected or when\n *         changing quantity\n * @param {string} selectedValueUrl - the Url for the selected variation value\n * @param {jQuery} $productContainer - DOM element for current product\n */\nfunction attributeSelect(selectedValueUrl, $productContainer) {\n    if (selectedValueUrl) {\n        $('body').trigger('product:beforeAttributeSelect',\n            { url: selectedValueUrl, container: $productContainer });\n\n        $.ajax({\n            url: selectedValueUrl,\n            method: 'GET',\n            success: function (data) {\n                handleVariantResponse(data, $productContainer);\n                updateOptions(data.product.optionsHtml, $productContainer);\n                updateQuantities(data.product.quantities, $productContainer);\n                $('body').trigger('product:afterAttributeSelect',\n                    { data: data, container: $productContainer });\n                $.spinner().stop();\n            },\n            error: function () {\n                $.spinner().stop();\n            }\n        });\n    }\n}\n\n/**\n * Retrieves url to use when adding a product to the cart\n *\n * @return {string} - The provided URL to use when adding a product to the cart\n */\nfunction getAddToCartUrl() {\n    return $('.add-to-cart-url').val();\n}\n\n/**\n * Parses the html for a modal window\n * @param {string} html - representing the body and footer of the modal window\n *\n * @return {Object} - Object with properties body and footer.\n */\nfunction parseHtml(html) {\n    var $html = $('<div>').append($.parseHTML(html));\n\n    var body = $html.find('.choice-of-bonus-product');\n    var footer = $html.find('.modal-footer').children();\n\n    return { body: body, footer: footer };\n}\n\n/**\n * Retrieves url to use when adding a product to the cart\n *\n * @param {Object} data - data object used to fill in dynamic portions of the html\n */\nfunction chooseBonusProducts(data) {\n    $('.modal-body').spinner().start();\n\n    if ($('#chooseBonusProductModal').length !== 0) {\n        $('#chooseBonusProductModal').remove();\n    }\n    var bonusUrl;\n    if (data.bonusChoiceRuleBased) {\n        bonusUrl = data.showProductsUrlRuleBased;\n    } else {\n        bonusUrl = data.showProductsUrlListBased;\n    }\n\n    var htmlString = '\x3c!-- Modal --\x3e'\n        + '<div class=\"modal fade\" id=\"chooseBonusProductModal\" tabindex=\"-1\" role=\"dialog\">'\n        + '<span class=\"enter-message sr-only\" ></span>'\n        + '<div class=\"modal-dialog choose-bonus-product-dialog\" '\n        + 'data-total-qty=\"' + data.maxBonusItems + '\"'\n        + 'data-UUID=\"' + data.uuid + '\"'\n        + 'data-pliUUID=\"' + data.pliUUID + '\"'\n        + 'data-addToCartUrl=\"' + data.addToCartUrl + '\"'\n        + 'data-pageStart=\"0\"'\n        + 'data-pageSize=\"' + data.pageSize + '\"'\n        + 'data-moreURL=\"' + data.showProductsUrlRuleBased + '\"'\n        + 'data-bonusChoiceRuleBased=\"' + data.bonusChoiceRuleBased + '\">'\n        + '\x3c!-- Modal content--\x3e'\n        + '<div class=\"modal-content\">'\n        + '<div class=\"modal-header\">'\n        + '    <span class=\"\">' + data.labels.selectprods + '</span>'\n        + '    <button type=\"button\" class=\"close pull-right\" data-dismiss=\"modal\">'\n        + '        <span aria-hidden=\"true\">&times;</span>'\n        + '        <span class=\"sr-only\"> </span>'\n        + '    </button>'\n        + '</div>'\n        + '<div class=\"modal-body\"></div>'\n        + '<div class=\"modal-footer\"></div>'\n        + '</div>'\n        + '</div>'\n        + '</div>';\n    $('body').append(htmlString);\n    $('.modal-body').spinner().start();\n\n    $.ajax({\n        url: bonusUrl,\n        method: 'GET',\n        dataType: 'json',\n        success: function (response) {\n            var parsedHtml = parseHtml(response.renderedTemplate);\n            $('#chooseBonusProductModal .modal-body').empty();\n            $('#chooseBonusProductModal .enter-message').text(response.enterDialogMessage);\n            $('#chooseBonusProductModal .modal-header .close .sr-only').text(response.closeButtonText);\n            $('#chooseBonusProductModal .modal-body').html(parsedHtml.body);\n            $('#chooseBonusProductModal .modal-footer').html(parsedHtml.footer);\n            $('#chooseBonusProductModal').modal('show');\n            $.spinner().stop();\n        },\n        error: function () {\n            $.spinner().stop();\n        }\n    });\n}\n\n/**\n * Updates the Mini-Cart quantity value after the customer has pressed the \"Add to Cart\" button\n * @param {string} response - ajax response from clicking the add to cart button\n */\nfunction handlePostCartAdd(response) {\n    $('.minicart').trigger('count:update', response);\n    var messageType = response.error ? 'alert-danger' : 'alert-success';\n    // show add to cart toast\n    if (response.newBonusDiscountLineItem\n        && Object.keys(response.newBonusDiscountLineItem).length !== 0) {\n        chooseBonusProducts(response.newBonusDiscountLineItem);\n    } else {\n        if ($('.add-to-cart-messages').length === 0) {\n            $('body').append(\n                '<div class=\"add-to-cart-messages\"></div>'\n            );\n        }\n\n        $('.add-to-cart-messages').append(\n            '<div class=\"alert ' + messageType + ' add-to-basket-alert text-center\" role=\"alert\">'\n            + response.message\n            + '</div>'\n        );\n\n        setTimeout(function () {\n            $('.add-to-basket-alert').remove();\n        }, 5000);\n    }\n}\n\n/**\n * Retrieves the bundle product item ID's for the Controller to replace bundle master product\n * items with their selected variants\n *\n * @return {string[]} - List of selected bundle product item ID's\n */\nfunction getChildProducts() {\n    var childProducts = [];\n    $('.bundle-item').each(function () {\n        childProducts.push({\n            pid: $(this).find('.product-id').text(),\n            quantity: parseInt($(this).find('label.quantity').data('quantity'), 10)\n        });\n    });\n\n    return childProducts.length ? JSON.stringify(childProducts) : [];\n}\n\n/**\n * Retrieve product options\n *\n * @param {jQuery} $productContainer - DOM element for current product\n * @return {string} - Product options and their selected values\n */\nfunction getOptions($productContainer) {\n    var options = $productContainer\n        .find('.product-option')\n        .map(function () {\n            var $elOption = $(this).find('.options-select');\n            var urlValue = $elOption.val();\n            var selectedValueId = $elOption.find('option[value=\"' + urlValue + '\"]')\n                .data('value-id');\n            return {\n                optionId: $(this).data('option-id'),\n                selectedValueId: selectedValueId\n            };\n        }).toArray();\n\n    return JSON.stringify(options);\n}\n\n/**\n * Makes a call to the server to report the event of adding an item to the cart\n *\n * @param {string | boolean} url - a string representing the end point to hit so that the event can be recorded, or false\n */\nfunction miniCartReportingUrl(url) {\n    if (url) {\n        $.ajax({\n            url: url,\n            method: 'GET',\n            success: function () {\n                // reporting urls hit on the server\n            },\n            error: function () {\n                // no reporting urls hit on the server\n            }\n        });\n    }\n}\n\nmodule.exports = {\n    attributeSelect: attributeSelect,\n    methods: {\n        editBonusProducts: function (data) {\n            chooseBonusProducts(data);\n        }\n    },\n\n    focusChooseBonusProductModal: function () {\n        $('body').on('shown.bs.modal', '#chooseBonusProductModal', function () {\n            $('#chooseBonusProductModal').siblings().attr('aria-hidden', 'true');\n            $('#chooseBonusProductModal .close').focus();\n        });\n    },\n\n    onClosingChooseBonusProductModal: function () {\n        $('body').on('hidden.bs.modal', '#chooseBonusProductModal', function () {\n            $('#chooseBonusProductModal').siblings().attr('aria-hidden', 'false');\n        });\n    },\n\n    trapChooseBonusProductModalFocus: function () {\n        $('body').on('keydown', '#chooseBonusProductModal', function (e) {\n            var focusParams = {\n                event: e,\n                containerSelector: '#chooseBonusProductModal',\n                firstElementSelector: '.close',\n                lastElementSelector: '.add-bonus-products'\n            };\n            focusHelper.setTabNextFocus(focusParams);\n        });\n    },\n\n    colorAttribute: function () {\n        $(document).on('click', '[data-attr=\"color\"] button', function (e) {\n            e.preventDefault();\n\n            if ($(this).attr('disabled')) {\n                return;\n            }\n            var $productContainer = $(this).closest('.set-item');\n            if (!$productContainer.length) {\n                $productContainer = $(this).closest('.product-detail');\n            }\n\n            attributeSelect($(this).attr('data-url'), $productContainer);\n        });\n    },\n\n    selectAttribute: function () {\n        $(document).on('change', 'select[class*=\"select-\"], .options-select', function (e) {\n            e.preventDefault();\n\n            var $productContainer = $(this).closest('.set-item');\n            if (!$productContainer.length) {\n                $productContainer = $(this).closest('.product-detail');\n            }\n            attributeSelect(e.currentTarget.value, $productContainer);\n        });\n    },\n\n    availability: function () {\n        $(document).on('change', '.quantity-select', function (e) {\n            e.preventDefault();\n\n            var $productContainer = $(this).closest('.product-detail');\n            if (!$productContainer.length) {\n                $productContainer = $(this).closest('.modal-content').find('.product-quickview');\n            }\n\n            if ($('.bundle-items', $productContainer).length === 0) {\n                attributeSelect($(e.currentTarget).find('option:selected').data('url'),\n                    $productContainer);\n            }\n        });\n    },\n\n    addToCart: function () {\n        $(document).on('click', 'button.add-to-cart, button.add-to-cart-global', function () {\n            var addToCartUrl;\n            var pid;\n            var pidsObj;\n            var setPids;\n\n            $('body').trigger('product:beforeAddToCart', this);\n\n            if ($('.set-items').length && $(this).hasClass('add-to-cart-global')) {\n                setPids = [];\n\n                $('.product-detail').each(function () {\n                    if (!$(this).hasClass('product-set-detail')) {\n                        setPids.push({\n                            pid: $(this).find('.product-id').text(),\n                            qty: $(this).find('.quantity-select').val(),\n                            options: getOptions($(this))\n                        });\n                    }\n                });\n                pidsObj = JSON.stringify(setPids);\n            }\n\n            pid = getPidValue($(this));\n\n            var $productContainer = $(this).closest('.product-detail');\n            if (!$productContainer.length) {\n                $productContainer = $(this).closest('.quick-view-dialog').find('.product-detail');\n            }\n\n            addToCartUrl = getAddToCartUrl();\n\n            var form = {\n                pid: pid,\n                pidsObj: pidsObj,\n                childProducts: getChildProducts(),\n                quantity: getQuantitySelected($(this))\n            };\n\n            form = clydeWidget.getSelectedClydeContract(form);\n\n            if (!$('.bundle-item').length) {\n                form.options = getOptions($productContainer);\n            }\n\n            $(this).trigger('updateAddToCartFormData', form);\n            if (addToCartUrl) {\n                $.ajax({\n                    url: addToCartUrl,\n                    method: 'POST',\n                    data: form,\n                    success: function (data) {\n                        handlePostCartAdd(data);\n                        $('body').trigger('product:afterAddToCart', data);\n                        $.spinner().stop();\n                        miniCartReportingUrl(data.reportingURL);\n                    },\n                    error: function () {\n                        $.spinner().stop();\n                    }\n                });\n            }\n        });\n    },\n    selectBonusProduct: function () {\n        $(document).on('click', '.select-bonus-product', function () {\n            var $choiceOfBonusProduct = $(this).parents('.choice-of-bonus-product');\n            var pid = $(this).data('pid');\n            var maxPids = $('.choose-bonus-product-dialog').data('total-qty');\n            var submittedQty = parseInt($choiceOfBonusProduct.find('.bonus-quantity-select').val(), 10);\n            var totalQty = 0;\n            $.each($('#chooseBonusProductModal .selected-bonus-products .selected-pid'), function () {\n                totalQty += $(this).data('qty');\n            });\n            totalQty += submittedQty;\n            var optionID = $choiceOfBonusProduct.find('.product-option').data('option-id');\n            var valueId = $choiceOfBonusProduct.find('.options-select option:selected').data('valueId');\n            if (totalQty <= maxPids) {\n                var selectedBonusProductHtml = ''\n                + '<div class=\"selected-pid row\" '\n                + 'data-pid=\"' + pid + '\"'\n                + 'data-qty=\"' + submittedQty + '\"'\n                + 'data-optionID=\"' + (optionID || '') + '\"'\n                + 'data-option-selected-value=\"' + (valueId || '') + '\"'\n                + '>'\n                + '<div class=\"col-sm-11 col-9 bonus-product-name\" >'\n                + $choiceOfBonusProduct.find('.product-name').html()\n                + '</div>'\n                + '<div class=\"col-1\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></div>'\n                + '</div>'\n                ;\n                $('#chooseBonusProductModal .selected-bonus-products').append(selectedBonusProductHtml);\n                $('.pre-cart-products').html(totalQty);\n                $('.selected-bonus-products .bonus-summary').removeClass('alert-danger');\n            } else {\n                $('.selected-bonus-products .bonus-summary').addClass('alert-danger');\n            }\n        });\n    },\n    removeBonusProduct: function () {\n        $(document).on('click', '.selected-pid', function () {\n            $(this).remove();\n            var $selected = $('#chooseBonusProductModal .selected-bonus-products .selected-pid');\n            var count = 0;\n            if ($selected.length) {\n                $selected.each(function () {\n                    count += parseInt($(this).data('qty'), 10);\n                });\n            }\n\n            $('.pre-cart-products').html(count);\n            $('.selected-bonus-products .bonus-summary').removeClass('alert-danger');\n        });\n    },\n    enableBonusProductSelection: function () {\n        $('body').on('bonusproduct:updateSelectButton', function (e, response) {\n            $('button.select-bonus-product', response.$productContainer).attr('disabled',\n                (!response.product.readyToOrder || !response.product.available));\n            var pid = response.product.id;\n            $('button.select-bonus-product', response.$productContainer).data('pid', pid);\n        });\n    },\n    showMoreBonusProducts: function () {\n        $(document).on('click', '.show-more-bonus-products', function () {\n            var url = $(this).data('url');\n            $('.modal-content').spinner().start();\n            $.ajax({\n                url: url,\n                method: 'GET',\n                success: function (html) {\n                    var parsedHtml = parseHtml(html);\n                    $('.modal-body').append(parsedHtml.body);\n                    $('.show-more-bonus-products:first').remove();\n                    $('.modal-content').spinner().stop();\n                },\n                error: function () {\n                    $('.modal-content').spinner().stop();\n                }\n            });\n        });\n    },\n    addBonusProductsToCart: function () {\n        $(document).on('click', '.add-bonus-products', function () {\n            var $readyToOrderBonusProducts = $('.choose-bonus-product-dialog .selected-pid');\n            var queryString = '?pids=';\n            var url = $('.choose-bonus-product-dialog').data('addtocarturl');\n            var pidsObject = {\n                bonusProducts: []\n            };\n\n            $.each($readyToOrderBonusProducts, function () {\n                var qtyOption =\n                    parseInt($(this)\n                        .data('qty'), 10);\n\n                var option = null;\n                if (qtyOption > 0) {\n                    if ($(this).data('optionid') && $(this).data('option-selected-value')) {\n                        option = {};\n                        option.optionId = $(this).data('optionid');\n                        option.productId = $(this).data('pid');\n                        option.selectedValueId = $(this).data('option-selected-value');\n                    }\n                    pidsObject.bonusProducts.push({\n                        pid: $(this).data('pid'),\n                        qty: qtyOption,\n                        options: [option]\n                    });\n                    pidsObject.totalQty = parseInt($('.pre-cart-products').html(), 10);\n                }\n            });\n            queryString += JSON.stringify(pidsObject);\n            queryString = queryString + '&uuid=' + $('.choose-bonus-product-dialog').data('uuid');\n            queryString = queryString + '&pliuuid=' + $('.choose-bonus-product-dialog').data('pliuuid');\n            $.spinner().start();\n            $.ajax({\n                url: url + queryString,\n                method: 'POST',\n                success: function (data) {\n                    $.spinner().stop();\n                    if (data.error) {\n                        $('#chooseBonusProductModal').modal('hide');\n                        if ($('.add-to-cart-messages').length === 0) {\n                            $('body').append('<div class=\"add-to-cart-messages\"></div>');\n                        }\n                        $('.add-to-cart-messages').append(\n                            '<div class=\"alert alert-danger add-to-basket-alert text-center\"'\n                            + ' role=\"alert\">'\n                            + data.errorMessage + '</div>'\n                        );\n                        setTimeout(function () {\n                            $('.add-to-basket-alert').remove();\n                        }, 3000);\n                    } else {\n                        $('.configure-bonus-product-attributes').html(data);\n                        $('.bonus-products-step2').removeClass('hidden-xl-down');\n                        $('#chooseBonusProductModal').modal('hide');\n\n                        if ($('.add-to-cart-messages').length === 0) {\n                            $('body').append('<div class=\"add-to-cart-messages\"></div>');\n                        }\n                        $('.minicart-quantity').html(data.totalQty);\n                        $('.add-to-cart-messages').append(\n                            '<div class=\"alert alert-success add-to-basket-alert text-center\"'\n                            + ' role=\"alert\">'\n                            + data.msgSuccess + '</div>'\n                        );\n                        setTimeout(function () {\n                            $('.add-to-basket-alert').remove();\n                            if ($('.cart-page').length) {\n                                location.reload();\n                            }\n                        }, 1500);\n                    }\n                },\n                error: function () {\n                    $.spinner().stop();\n                }\n            });\n        });\n    },\n\n    getPidValue: getPidValue,\n    getQuantitySelected: getQuantitySelected,\n    miniCartReportingUrl: miniCartReportingUrl\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jYXJ0cmlkZ2VzL2ludF9jbHlkZV9zZnJhL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy9wcm9kdWN0L2Jhc2UuanM/NjRmYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjs7QUFFQSxrQkFBa0IsbUJBQU8sQ0FBQyxFQUF1QjtBQUNqRCxrQkFBa0IsbUJBQU8sQ0FBQyxDQUFzQjs7QUFFaEQ7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsWUFBWSxPQUFPO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsU0FBUztBQUNwQixXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsU0FBUztBQUNwQixXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxNQUFNO0FBQ2pCLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYyxPQUFPO0FBQ3JCLGNBQWMsT0FBTztBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE9BQU87QUFDckIsY0FBYyxPQUFPO0FBQ3JCLGNBQWMsT0FBTztBQUNyQixjQUFjLHFCQUFxQjtBQUNuQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHdCQUF3QjtBQUNuQyxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUJBQWlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsU0FBUztBQUNwQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUTtBQUN0QixjQUFjLE9BQU87QUFDckIsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsc0RBQXNEOztBQUVuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJDQUEyQztBQUNoRTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxZQUFZO0FBQ1o7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGlCQUFpQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIxNy5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyogZ2xvYmFsICQsIGRvY3VtZW50LCBDbHlkZSwgQ2x5ZGVTaXRlUHJlZmVyZW5jZXMgKi9cblxudmFyIGZvY3VzSGVscGVyID0gcmVxdWlyZSgnYmFzZS9jb21wb25lbnRzL2ZvY3VzJyk7XG52YXIgY2x5ZGVXaWRnZXQgPSByZXF1aXJlKCcuLi9nZXRDbHlkZVdpZGdldC5qcycpO1xuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgcmVsZXZhbnQgcGlkIHZhbHVlXG4gKiBAcGFyYW0ge2pxdWVyeX0gJGVsIC0gRE9NIGNvbnRhaW5lciBmb3IgYSBnaXZlbiBhZGQgdG8gY2FydCBidXR0b25cbiAqIEByZXR1cm4ge3N0cmluZ30gLSB2YWx1ZSB0byBiZSB1c2VkIHdoZW4gYWRkaW5nIHByb2R1Y3QgdG8gY2FydFxuICovXG5mdW5jdGlvbiBnZXRQaWRWYWx1ZSgkZWwpIHtcbiAgICB2YXIgcGlkO1xuXG4gICAgaWYgKCQoJyNxdWlja1ZpZXdNb2RhbCcpLmhhc0NsYXNzKCdzaG93JykgJiYgISQoJy5wcm9kdWN0LXNldCcpLmxlbmd0aCkge1xuICAgICAgICBwaWQgPSAkKCRlbCkuY2xvc2VzdCgnLm1vZGFsLWNvbnRlbnQnKS5maW5kKCcucHJvZHVjdC1xdWlja3ZpZXcnKS5kYXRhKCdwaWQnKTtcbiAgICB9IGVsc2UgaWYgKCQoJy5wcm9kdWN0LXNldC1kZXRhaWwnKS5sZW5ndGggfHwgJCgnLnByb2R1Y3Qtc2V0JykubGVuZ3RoKSB7XG4gICAgICAgIHBpZCA9ICQoJGVsKS5jbG9zZXN0KCcucHJvZHVjdC1kZXRhaWwnKS5maW5kKCcucHJvZHVjdC1pZCcpLnRleHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwaWQgPSAkKCcucHJvZHVjdC1kZXRhaWw6bm90KFwiLmJ1bmRsZS1pdGVtXCIpJykuZGF0YSgncGlkJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBpZDtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZSBjb250ZXh0dWFsIHF1YW50aXR5IHNlbGVjdG9yXG4gKiBAcGFyYW0ge2pxdWVyeX0gJGVsIC0gRE9NIGNvbnRhaW5lciBmb3IgdGhlIHJlbGV2YW50IHF1YW50aXR5XG4gKiBAcmV0dXJuIHtqcXVlcnl9IC0gcXVhbnRpdHkgc2VsZWN0b3IgRE9NIGNvbnRhaW5lclxuICovXG5mdW5jdGlvbiBnZXRRdWFudGl0eVNlbGVjdG9yKCRlbCkge1xuICAgIHJldHVybiAkZWwgJiYgJCgnLnNldC1pdGVtcycpLmxlbmd0aFxuICAgICAgICA/ICQoJGVsKS5jbG9zZXN0KCcucHJvZHVjdC1kZXRhaWwnKS5maW5kKCcucXVhbnRpdHktc2VsZWN0JylcbiAgICAgICAgOiAkKCcucXVhbnRpdHktc2VsZWN0Jyk7XG59XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIFF1YW50aXR5IHB1bGwtZG93biBtZW51XG4gKiBAcGFyYW0ge2pxdWVyeX0gJGVsIC0gRE9NIGNvbnRhaW5lciBmb3IgdGhlIHJlbGV2YW50IHF1YW50aXR5XG4gKiBAcmV0dXJuIHtzdHJpbmd9IC0gdmFsdWUgZm91bmQgaW4gdGhlIHF1YW50aXR5IGlucHV0XG4gKi9cbmZ1bmN0aW9uIGdldFF1YW50aXR5U2VsZWN0ZWQoJGVsKSB7XG4gICAgcmV0dXJuIGdldFF1YW50aXR5U2VsZWN0b3IoJGVsKS52YWwoKTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSBhdHRyaWJ1dGUgdmFsdWVzIGZvciBhbiBhdHRyaWJ1dGUgdGhhdCBoYXMgaW1hZ2Ugc3dhdGNoZXNcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0ciAtIEF0dHJpYnV0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHIuaWQgLSBBdHRyaWJ1dGUgSURcbiAqIEBwYXJhbSB7T2JqZWN0W119IGF0dHIudmFsdWVzIC0gQXJyYXkgb2YgYXR0cmlidXRlIHZhbHVlIG9iamVjdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyLnZhbHVlcy52YWx1ZSAtIEF0dHJpYnV0ZSBjb2RlZCB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHIudmFsdWVzLnVybCAtIFVSTCB0byBkZS9zZWxlY3QgYW4gYXR0cmlidXRlIHZhbHVlIG9mIHRoZSBwcm9kdWN0XG4gKiBAcGFyYW0ge2Jvb2xlYW59IGF0dHIudmFsdWVzLmlzU2VsZWN0YWJsZSAtIEZsYWcgYXMgdG8gd2hldGhlciBhbiBhdHRyaWJ1dGUgdmFsdWUgY2FuIGJlXG4gKiAgICAgc2VsZWN0ZWQuICBJZiB0aGVyZSBpcyBubyB2YXJpYW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBzcGVjaWZpYyBjb21iaW5hdGlvbiBvZiBhdHRyaWJ1dGVcbiAqICAgICB2YWx1ZXMsIGFuIGF0dHJpYnV0ZSBtYXkgYmUgZGlzYWJsZWQgaW4gdGhlIFByb2R1Y3QgRGV0YWlsIFBhZ2VcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkcHJvZHVjdENvbnRhaW5lciAtIERPTSBjb250YWluZXIgZm9yIGEgZ2l2ZW4gcHJvZHVjdFxuICogQHBhcmFtIHtPYmplY3R9IG1zZ3MgLSBvYmplY3QgY29udGFpbmluZyByZXNvdXJjZSBtZXNzYWdlc1xuICovXG5mdW5jdGlvbiBwcm9jZXNzU3dhdGNoVmFsdWVzKGF0dHIsICRwcm9kdWN0Q29udGFpbmVyLCBtc2dzKSB7XG4gICAgYXR0ci52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAoYXR0clZhbHVlKSB7XG4gICAgICAgIHZhciAkYXR0clZhbHVlID0gJHByb2R1Y3RDb250YWluZXIuZmluZCgnW2RhdGEtYXR0cj1cIicgKyBhdHRyLmlkICsgJ1wiXSBbZGF0YS1hdHRyLXZhbHVlPVwiJyArXG4gICAgICAgICAgICBhdHRyVmFsdWUudmFsdWUgKyAnXCJdJyk7XG4gICAgICAgIHZhciAkc3dhdGNoQnV0dG9uID0gJGF0dHJWYWx1ZS5wYXJlbnQoKTtcblxuICAgICAgICBpZiAoYXR0clZhbHVlLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAkYXR0clZhbHVlLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgJGF0dHJWYWx1ZS5zaWJsaW5ncygnLnNlbGVjdGVkLWFzc2lzdGl2ZS10ZXh0JykudGV4dChtc2dzLmFzc2lzdGl2ZVNlbGVjdGVkVGV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkYXR0clZhbHVlLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgJGF0dHJWYWx1ZS5zaWJsaW5ncygnLnNlbGVjdGVkLWFzc2lzdGl2ZS10ZXh0JykuZW1wdHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhdHRyVmFsdWUudXJsKSB7XG4gICAgICAgICAgICAkc3dhdGNoQnV0dG9uLmF0dHIoJ2RhdGEtdXJsJywgYXR0clZhbHVlLnVybCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc3dhdGNoQnV0dG9uLnJlbW92ZUF0dHIoJ2RhdGEtdXJsJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEaXNhYmxlIGlmIG5vdCBzZWxlY3RhYmxlXG4gICAgICAgICRhdHRyVmFsdWUucmVtb3ZlQ2xhc3MoJ3NlbGVjdGFibGUgdW5zZWxlY3RhYmxlJyk7XG5cbiAgICAgICAgJGF0dHJWYWx1ZS5hZGRDbGFzcyhhdHRyVmFsdWUuc2VsZWN0YWJsZSA/ICdzZWxlY3RhYmxlJyA6ICd1bnNlbGVjdGFibGUnKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIGF0dHJpYnV0ZSB2YWx1ZXMgYXNzb2NpYXRlZCB3aXRoIGFuIGF0dHJpYnV0ZSB0aGF0IGRvZXMgbm90IGhhdmUgaW1hZ2Ugc3dhdGNoZXNcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0ciAtIEF0dHJpYnV0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHIuaWQgLSBBdHRyaWJ1dGUgSURcbiAqIEBwYXJhbSB7T2JqZWN0W119IGF0dHIudmFsdWVzIC0gQXJyYXkgb2YgYXR0cmlidXRlIHZhbHVlIG9iamVjdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyLnZhbHVlcy52YWx1ZSAtIEF0dHJpYnV0ZSBjb2RlZCB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHIudmFsdWVzLnVybCAtIFVSTCB0byBkZS9zZWxlY3QgYW4gYXR0cmlidXRlIHZhbHVlIG9mIHRoZSBwcm9kdWN0XG4gKiBAcGFyYW0ge2Jvb2xlYW59IGF0dHIudmFsdWVzLmlzU2VsZWN0YWJsZSAtIEZsYWcgYXMgdG8gd2hldGhlciBhbiBhdHRyaWJ1dGUgdmFsdWUgY2FuIGJlXG4gKiAgICAgc2VsZWN0ZWQuICBJZiB0aGVyZSBpcyBubyB2YXJpYW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBzcGVjaWZpYyBjb21iaW5hdGlvbiBvZiBhdHRyaWJ1dGVcbiAqICAgICB2YWx1ZXMsIGFuIGF0dHJpYnV0ZSBtYXkgYmUgZGlzYWJsZWQgaW4gdGhlIFByb2R1Y3QgRGV0YWlsIFBhZ2VcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkcHJvZHVjdENvbnRhaW5lciAtIERPTSBjb250YWluZXIgZm9yIGEgZ2l2ZW4gcHJvZHVjdFxuICovXG5mdW5jdGlvbiBwcm9jZXNzTm9uU3dhdGNoVmFsdWVzKGF0dHIsICRwcm9kdWN0Q29udGFpbmVyKSB7XG4gICAgdmFyICRhdHRyID0gJ1tkYXRhLWF0dHI9XCInICsgYXR0ci5pZCArICdcIl0nO1xuICAgIHZhciAkZGVmYXVsdE9wdGlvbiA9ICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJGF0dHIgKyAnIC5zZWxlY3QtJyArIGF0dHIuaWQgKyAnIG9wdGlvbjpmaXJzdCcpO1xuICAgICRkZWZhdWx0T3B0aW9uLmF0dHIoJ3ZhbHVlJywgYXR0ci5yZXNldFVybCk7XG5cbiAgICBhdHRyLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyVmFsdWUpIHtcbiAgICAgICAgdmFyICRhdHRyVmFsdWUgPSAkcHJvZHVjdENvbnRhaW5lclxuICAgICAgICAgICAgLmZpbmQoJGF0dHIgKyAnIFtkYXRhLWF0dHItdmFsdWU9XCInICsgYXR0clZhbHVlLnZhbHVlICsgJ1wiXScpO1xuICAgICAgICAkYXR0clZhbHVlLmF0dHIoJ3ZhbHVlJywgYXR0clZhbHVlLnVybClcbiAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuXG4gICAgICAgIGlmICghYXR0clZhbHVlLnNlbGVjdGFibGUpIHtcbiAgICAgICAgICAgICRhdHRyVmFsdWUuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIFJvdXRlcyB0aGUgaGFuZGxpbmcgb2YgYXR0cmlidXRlIHByb2Nlc3NpbmcgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGF0dHJpYnV0ZSBoYXMgaW1hZ2VcbiAqICAgICBzd2F0Y2hlcyBvciBub3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cnMgLSBBdHRyaWJ1dGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyLmlkIC0gQXR0cmlidXRlIElEXG4gKiBAcGFyYW0ge2pRdWVyeX0gJHByb2R1Y3RDb250YWluZXIgLSBET00gZWxlbWVudCBmb3IgYSBnaXZlbiBwcm9kdWN0XG4gKiBAcGFyYW0ge09iamVjdH0gbXNncyAtIG9iamVjdCBjb250YWluaW5nIHJlc291cmNlIG1lc3NhZ2VzXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZUF0dHJzKGF0dHJzLCAkcHJvZHVjdENvbnRhaW5lciwgbXNncykge1xuICAgIC8vIEN1cnJlbnRseSwgdGhlIG9ubHkgYXR0cmlidXRlIHR5cGUgdGhhdCBoYXMgaW1hZ2Ugc3dhdGNoZXMgaXMgQ29sb3IuXG4gICAgdmFyIGF0dHJzV2l0aFN3YXRjaGVzID0gWydjb2xvciddO1xuXG4gICAgYXR0cnMuZm9yRWFjaChmdW5jdGlvbiAoYXR0cikge1xuICAgICAgICBpZiAoYXR0cnNXaXRoU3dhdGNoZXMuaW5kZXhPZihhdHRyLmlkKSA+IC0xKSB7XG4gICAgICAgICAgICBwcm9jZXNzU3dhdGNoVmFsdWVzKGF0dHIsICRwcm9kdWN0Q29udGFpbmVyLCBtc2dzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2Nlc3NOb25Td2F0Y2hWYWx1ZXMoYXR0ciwgJHByb2R1Y3RDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgYXZhaWxhYmlsaXR5IHN0YXR1cyBpbiB0aGUgUHJvZHVjdCBEZXRhaWwgUGFnZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXNwb25zZSAtIEFqYXggcmVzcG9uc2Ugb2JqZWN0IGFmdGVyIGFuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUgdmFsdWUgaGFzIGJlZW4gW2RlXXNlbGVjdGVkXG4gKiBAcGFyYW0ge2pRdWVyeX0gJHByb2R1Y3RDb250YWluZXIgLSBET00gZWxlbWVudCBmb3IgYSBnaXZlbiBwcm9kdWN0XG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZUF2YWlsYWJpbGl0eShyZXNwb25zZSwgJHByb2R1Y3RDb250YWluZXIpIHtcbiAgICB2YXIgYXZhaWxhYmlsaXR5VmFsdWUgPSAnJztcbiAgICB2YXIgYXZhaWxhYmlsaXR5TWVzc2FnZXMgPSByZXNwb25zZS5wcm9kdWN0LmF2YWlsYWJpbGl0eS5tZXNzYWdlcztcbiAgICBpZiAoIXJlc3BvbnNlLnByb2R1Y3QucmVhZHlUb09yZGVyKSB7XG4gICAgICAgIGF2YWlsYWJpbGl0eVZhbHVlID0gJzxsaT48ZGl2PicgKyByZXNwb25zZS5yZXNvdXJjZXMuaW5mb19zZWxlY3Rmb3JzdG9jayArICc8L2Rpdj48L2xpPic7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYXZhaWxhYmlsaXR5TWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgYXZhaWxhYmlsaXR5VmFsdWUgKz0gJzxsaT48ZGl2PicgKyBtZXNzYWdlICsgJzwvZGl2PjwvbGk+JztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJCgkcHJvZHVjdENvbnRhaW5lcikudHJpZ2dlcigncHJvZHVjdDp1cGRhdGVBdmFpbGFiaWxpdHknLCB7XG4gICAgICAgIHByb2R1Y3Q6IHJlc3BvbnNlLnByb2R1Y3QsXG4gICAgICAgICRwcm9kdWN0Q29udGFpbmVyOiAkcHJvZHVjdENvbnRhaW5lcixcbiAgICAgICAgbWVzc2FnZTogYXZhaWxhYmlsaXR5VmFsdWUsXG4gICAgICAgIHJlc291cmNlczogcmVzcG9uc2UucmVzb3VyY2VzXG4gICAgfSk7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGh0bWwgZm9yIHByb2R1Y3QgYXR0cmlidXRlcyBzZWN0aW9uXG4gKlxuICogQHBhcmFtIHthcnJheX0gYXR0cmlidXRlcyAtIGxpc3Qgb2YgYXR0cmlidXRlc1xuICogQHJldHVybiB7c3RyaW5nfSAtIENvbXBpbGVkIEhUTUxcbiAqL1xuZnVuY3Rpb24gZ2V0QXR0cmlidXRlc0h0bWwoYXR0cmlidXRlcykge1xuICAgIGlmICghYXR0cmlidXRlcykge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgdmFyIGh0bWwgPSAnJztcblxuICAgIGF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlR3JvdXApIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZUdyb3VwLklEID09PSAnbWFpbkF0dHJpYnV0ZXMnKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVHcm91cC5hdHRyaWJ1dGVzLmZvckVhY2goZnVuY3Rpb24gKGF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJhdHRyaWJ1dGUtdmFsdWVzXCI+JyArIGF0dHJpYnV0ZS5sYWJlbCArICc6ICdcbiAgICAgICAgICAgICAgICAgICAgKyBhdHRyaWJ1dGUudmFsdWUgKyAnPC9kaXY+JztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaHRtbDtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiBVcGRhdGVkT3B0aW9uVmFsdWVcbiAqIEB0eXBlIE9iamVjdFxuICogQHByb3BlcnR5IHtzdHJpbmd9IGlkIC0gT3B0aW9uIHZhbHVlIElEIGZvciBsb29rIHVwXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdXJsIC0gVXBkYXRlZCBvcHRpb24gdmFsdWUgc2VsZWN0aW9uIFVSTFxuICovXG5cbi8qKlxuICogQHR5cGVkZWYgT3B0aW9uU2VsZWN0aW9uUmVzcG9uc2VcbiAqIEB0eXBlIE9iamVjdFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHByaWNlSHRtbCAtIFVwZGF0ZWQgcHJpY2UgSFRNTCBjb2RlXG4gKiBAcHJvcGVydHkge09iamVjdH0gb3B0aW9ucyAtIFVwZGF0ZWQgT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IG9wdGlvbnMuaWQgLSBPcHRpb24gSURcbiAqIEBwcm9wZXJ0eSB7VXBkYXRlZE9wdGlvblZhbHVlW119IG9wdGlvbnMudmFsdWVzIC0gT3B0aW9uIHZhbHVlc1xuICovXG5cbi8qKlxuICogVXBkYXRlcyBET00gdXNpbmcgcG9zdC1vcHRpb24gc2VsZWN0aW9uIEFqYXggcmVzcG9uc2VcbiAqXG4gKiBAcGFyYW0ge09wdGlvblNlbGVjdGlvblJlc3BvbnNlfSBvcHRpb25zSHRtbCAtIEFqYXggcmVzcG9uc2Ugb3B0aW9uc0h0bWwgZnJvbSBzZWxlY3RpbmcgYSBwcm9kdWN0IG9wdGlvblxuICogQHBhcmFtIHtqUXVlcnl9ICRwcm9kdWN0Q29udGFpbmVyIC0gRE9NIGVsZW1lbnQgZm9yIGN1cnJlbnQgcHJvZHVjdFxuICovXG5mdW5jdGlvbiB1cGRhdGVPcHRpb25zKG9wdGlvbnNIdG1sLCAkcHJvZHVjdENvbnRhaW5lcikge1xuXHQvLyBVcGRhdGUgb3B0aW9uc1xuICAgICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5wcm9kdWN0LW9wdGlvbnMnKS5lbXB0eSgpLmh0bWwob3B0aW9uc0h0bWwpO1xufVxuXG4vKipcbiAqIER5bmFtaWNhbGx5IGNyZWF0ZXMgQm9vdHN0cmFwIGNhcm91c2VsIGZyb20gcmVzcG9uc2UgY29udGFpbmluZyBpbWFnZXNcbiAqIEBwYXJhbSB7T2JqZWN0W119IGltZ3MgLSBBcnJheSBvZiBsYXJnZSBwcm9kdWN0IGltYWdlcyxhbG9uZyB3aXRoIHJlbGF0ZWQgaW5mb3JtYXRpb25cbiAqIEBwYXJhbSB7alF1ZXJ5fSAkcHJvZHVjdENvbnRhaW5lciAtIERPTSBlbGVtZW50IGZvciBhIGdpdmVuIHByb2R1Y3RcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2Fyb3VzZWwoaW1ncywgJHByb2R1Y3RDb250YWluZXIpIHtcbiAgICB2YXIgY2Fyb3VzZWwgPSAkcHJvZHVjdENvbnRhaW5lci5maW5kKCcuY2Fyb3VzZWwnKTtcbiAgICAkKGNhcm91c2VsKS5jYXJvdXNlbCgnZGlzcG9zZScpO1xuICAgIHZhciBjYXJvdXNlbElkID0gJChjYXJvdXNlbCkuYXR0cignaWQnKTtcbiAgICAkKGNhcm91c2VsKS5lbXB0eSgpLmFwcGVuZCgnPG9sIGNsYXNzPVwiY2Fyb3VzZWwtaW5kaWNhdG9yc1wiPjwvb2w+PGRpdiBjbGFzcz1cImNhcm91c2VsLWlubmVyXCIgcm9sZT1cImxpc3Rib3hcIj48L2Rpdj48YSBjbGFzcz1cImNhcm91c2VsLWNvbnRyb2wtcHJldlwiIGhyZWY9XCIjJyArIGNhcm91c2VsSWQgKyAnXCIgcm9sZT1cImJ1dHRvblwiIGRhdGEtc2xpZGU9XCJwcmV2XCI+PHNwYW4gY2xhc3M9XCJmYSBpY29uLXByZXZcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+JyArICQoY2Fyb3VzZWwpLmRhdGEoJ3ByZXYnKSArICc8L3NwYW4+PC9hPjxhIGNsYXNzPVwiY2Fyb3VzZWwtY29udHJvbC1uZXh0XCIgaHJlZj1cIiMnICsgY2Fyb3VzZWxJZCArICdcIiByb2xlPVwiYnV0dG9uXCIgZGF0YS1zbGlkZT1cIm5leHRcIj48c3BhbiBjbGFzcz1cImZhIGljb24tbmV4dFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cInNyLW9ubHlcIj4nICsgJChjYXJvdXNlbCkuZGF0YSgnbmV4dCcpICsgJzwvc3Bhbj48L2E+Jyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICQoJzxkaXYgY2xhc3M9XCJjYXJvdXNlbC1pdGVtXCI+PGltZyBzcmM9XCInICsgaW1nc1tpXS51cmwgKyAnXCIgY2xhc3M9XCJkLWJsb2NrIGltZy1mbHVpZFwiIGFsdD1cIicgKyBpbWdzW2ldLmFsdCArICcgaW1hZ2UgbnVtYmVyICcgKyBwYXJzZUludChpbWdzW2ldLmluZGV4LCAxMCkgKyAnXCIgdGl0bGU9XCInICsgaW1nc1tpXS50aXRsZSArICdcIiBpdGVtcHJvcD1cImltYWdlXCIgLz48L2Rpdj4nKS5hcHBlbmRUbygkKGNhcm91c2VsKS5maW5kKCcuY2Fyb3VzZWwtaW5uZXInKSk7XG4gICAgICAgICQoJzxsaSBkYXRhLXRhcmdldD1cIiMnICsgY2Fyb3VzZWxJZCArICdcIiBkYXRhLXNsaWRlLXRvPVwiJyArIGkgKyAnXCIgY2xhc3M9XCJcIj48L2xpPicpLmFwcGVuZFRvKCQoY2Fyb3VzZWwpLmZpbmQoJy5jYXJvdXNlbC1pbmRpY2F0b3JzJykpO1xuICAgIH1cbiAgICAkKCQoY2Fyb3VzZWwpLmZpbmQoJy5jYXJvdXNlbC1pdGVtJykpLmZpcnN0KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICQoJChjYXJvdXNlbCkuZmluZCgnLmNhcm91c2VsLWluZGljYXRvcnMgPiBsaScpKS5maXJzdCgpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICBpZiAoaW1ncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgJCgkKGNhcm91c2VsKS5maW5kKCcuY2Fyb3VzZWwtaW5kaWNhdG9ycywgYVtjbGFzc149XCJjYXJvdXNlbC1jb250cm9sLVwiXScpKS5kZXRhY2goKTtcbiAgICB9XG4gICAgJChjYXJvdXNlbCkuY2Fyb3VzZWwoKTtcbiAgICAkKCQoY2Fyb3VzZWwpLmZpbmQoJy5jYXJvdXNlbC1pbmRpY2F0b3JzJykpLmF0dHIoJ2FyaWEtaGlkZGVuJywgdHJ1ZSk7XG59XG5cbi8qKlxuICogUGFyc2VzIEpTT04gZnJvbSBBamF4IGNhbGwgbWFkZSB3aGVuZXZlciBhbiBhdHRyaWJ1dGUgdmFsdWUgaXMgW2RlXXNlbGVjdGVkXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzcG9uc2UgLSByZXNwb25zZSBmcm9tIEFqYXggY2FsbFxuICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlLnByb2R1Y3QgLSBQcm9kdWN0IG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IHJlc3BvbnNlLnByb2R1Y3QuaWQgLSBQcm9kdWN0IElEXG4gKiBAcGFyYW0ge09iamVjdFtdfSByZXNwb25zZS5wcm9kdWN0LnZhcmlhdGlvbkF0dHJpYnV0ZXMgLSBQcm9kdWN0IGF0dHJpYnV0ZXNcbiAqIEBwYXJhbSB7T2JqZWN0W119IHJlc3BvbnNlLnByb2R1Y3QuaW1hZ2VzIC0gUHJvZHVjdCBpbWFnZXNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVzcG9uc2UucHJvZHVjdC5oYXNSZXF1aXJlZEF0dHJzU2VsZWN0ZWQgLSBGbGFnIGFzIHRvIHdoZXRoZXIgYWxsIHJlcXVpcmVkXG4gKiAgICAgYXR0cmlidXRlcyBoYXZlIGJlZW4gc2VsZWN0ZWQuICBVc2VkIHBhcnRpYWxseSB0b1xuICogICAgIGRldGVybWluZSB3aGV0aGVyIHRoZSBBZGQgdG8gQ2FydCBidXR0b24gY2FuIGJlIGVuYWJsZWRcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkcHJvZHVjdENvbnRhaW5lciAtIERPTSBlbGVtZW50IGZvciBhIGdpdmVuIHByb2R1Y3QuXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZVZhcmlhbnRSZXNwb25zZShyZXNwb25zZSwgJHByb2R1Y3RDb250YWluZXIpIHtcbiAgICB2YXIgaXNDaG9pY2VPZkJvbnVzUHJvZHVjdHMgPVxuICAgICAgICAkcHJvZHVjdENvbnRhaW5lci5wYXJlbnRzKCcuY2hvb3NlLWJvbnVzLXByb2R1Y3QtZGlhbG9nJykubGVuZ3RoID4gMDtcbiAgICB2YXIgaXNWYXJhaW50O1xuICAgIGlmIChyZXNwb25zZS5wcm9kdWN0LnZhcmlhdGlvbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgdXBkYXRlQXR0cnMocmVzcG9uc2UucHJvZHVjdC52YXJpYXRpb25BdHRyaWJ1dGVzLCAkcHJvZHVjdENvbnRhaW5lciwgcmVzcG9uc2UucmVzb3VyY2VzKTtcbiAgICAgICAgaXNWYXJhaW50ID0gcmVzcG9uc2UucHJvZHVjdC5wcm9kdWN0VHlwZSA9PT0gJ3ZhcmlhbnQnO1xuICAgICAgICBpZiAoaXNDaG9pY2VPZkJvbnVzUHJvZHVjdHMgJiYgaXNWYXJhaW50KSB7XG4gICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lci5wYXJlbnQoJy5ib251cy1wcm9kdWN0LWl0ZW0nKVxuICAgICAgICAgICAgICAgIC5kYXRhKCdwaWQnLCByZXNwb25zZS5wcm9kdWN0LmlkKTtcblxuICAgICAgICAgICAgJHByb2R1Y3RDb250YWluZXIucGFyZW50KCcuYm9udXMtcHJvZHVjdC1pdGVtJylcbiAgICAgICAgICAgICAgICAuZGF0YSgncmVhZHktdG8tb3JkZXInLCByZXNwb25zZS5wcm9kdWN0LnJlYWR5VG9PcmRlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgcHJpbWFyeSBpbWFnZXNcbiAgICB2YXIgcHJpbWFyeUltYWdlVXJscyA9IHJlc3BvbnNlLnByb2R1Y3QuaW1hZ2VzLmxhcmdlO1xuICAgIGNyZWF0ZUNhcm91c2VsKHByaW1hcnlJbWFnZVVybHMsICRwcm9kdWN0Q29udGFpbmVyKTtcblxuICAgIC8vIFVwZGF0ZSBwcmljaW5nXG4gICAgaWYgKCFpc0Nob2ljZU9mQm9udXNQcm9kdWN0cykge1xuICAgICAgICB2YXIgJHByaWNlU2VsZWN0b3IgPSAkKCcucHJpY2VzIC5wcmljZScsICRwcm9kdWN0Q29udGFpbmVyKS5sZW5ndGhcbiAgICAgICAgICAgID8gJCgnLnByaWNlcyAucHJpY2UnLCAkcHJvZHVjdENvbnRhaW5lcilcbiAgICAgICAgICAgIDogJCgnLnByaWNlcyAucHJpY2UnKTtcbiAgICAgICAgJHByaWNlU2VsZWN0b3IucmVwbGFjZVdpdGgocmVzcG9uc2UucHJvZHVjdC5wcmljZS5odG1sKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgcHJvbW90aW9uc1xuICAgICRwcm9kdWN0Q29udGFpbmVyLmZpbmQoJy5wcm9tb3Rpb25zJykuZW1wdHkoKS5odG1sKHJlc3BvbnNlLnByb2R1Y3QucHJvbW90aW9uc0h0bWwpO1xuXG4gICAgdXBkYXRlQXZhaWxhYmlsaXR5KHJlc3BvbnNlLCAkcHJvZHVjdENvbnRhaW5lcik7XG5cbiAgICBpZiAoaXNDaG9pY2VPZkJvbnVzUHJvZHVjdHMpIHtcbiAgICAgICAgdmFyICRzZWxlY3RCdXR0b24gPSAkcHJvZHVjdENvbnRhaW5lci5maW5kKCcuc2VsZWN0LWJvbnVzLXByb2R1Y3QnKTtcbiAgICAgICAgJHNlbGVjdEJ1dHRvbi50cmlnZ2VyKCdib251c3Byb2R1Y3Q6dXBkYXRlU2VsZWN0QnV0dG9uJywge1xuICAgICAgICAgICAgcHJvZHVjdDogcmVzcG9uc2UucHJvZHVjdCwgJHByb2R1Y3RDb250YWluZXI6ICRwcm9kdWN0Q29udGFpbmVyXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEVuYWJsZSBcIkFkZCB0byBDYXJ0XCIgYnV0dG9uIGlmIGFsbCByZXF1aXJlZCBhdHRyaWJ1dGVzIGhhdmUgYmVlbiBzZWxlY3RlZFxuICAgICAgICAkKCdidXR0b24uYWRkLXRvLWNhcnQsIGJ1dHRvbi5hZGQtdG8tY2FydC1nbG9iYWwsIGJ1dHRvbi51cGRhdGUtY2FydC1wcm9kdWN0LWdsb2JhbCcpLnRyaWdnZXIoJ3Byb2R1Y3Q6dXBkYXRlQWRkVG9DYXJ0Jywge1xuICAgICAgICAgICAgcHJvZHVjdDogcmVzcG9uc2UucHJvZHVjdCwgJHByb2R1Y3RDb250YWluZXI6ICRwcm9kdWN0Q29udGFpbmVyXG4gICAgICAgIH0pLnRyaWdnZXIoJ3Byb2R1Y3Q6c3RhdHVzVXBkYXRlJywgcmVzcG9uc2UucHJvZHVjdCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGF0dHJpYnV0ZXNcbiAgICAkcHJvZHVjdENvbnRhaW5lci5maW5kKCcubWFpbi1hdHRyaWJ1dGVzJykuZW1wdHkoKVxuICAgICAgICAuaHRtbChnZXRBdHRyaWJ1dGVzSHRtbChyZXNwb25zZS5wcm9kdWN0LmF0dHJpYnV0ZXMpKTtcbn1cblxuLyoqXG4gKiBAdHlwZXNwZWMgVXBkYXRlZFF1YW50aXR5XG4gKiBAdHlwZSBPYmplY3RcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gc2VsZWN0ZWQgLSBXaGV0aGVyIHRoZSBxdWFudGl0eSBoYXMgYmVlbiBzZWxlY3RlZFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHZhbHVlIC0gVGhlIG51bWJlciBvZiBwcm9kdWN0cyB0byBwdXJjaGFzZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHVybCAtIENvbXBpbGVkIFVSTCB0aGF0IHNwZWNpZmllcyB2YXJpYXRpb24gYXR0cmlidXRlcywgcHJvZHVjdCBJRCwgb3B0aW9ucyxcbiAqICAgICBldGMuXG4gKi9cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBxdWFudGl0eSBET00gZWxlbWVudHMgcG9zdCBBamF4IGNhbGxcbiAqIEBwYXJhbSB7VXBkYXRlZFF1YW50aXR5W119IHF1YW50aXRpZXMgLVxuICogQHBhcmFtIHtqUXVlcnl9ICRwcm9kdWN0Q29udGFpbmVyIC0gRE9NIGNvbnRhaW5lciBmb3IgYSBnaXZlbiBwcm9kdWN0XG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVF1YW50aXRpZXMocXVhbnRpdGllcywgJHByb2R1Y3RDb250YWluZXIpIHtcbiAgICBpZiAoISgkcHJvZHVjdENvbnRhaW5lci5wYXJlbnQoJy5ib251cy1wcm9kdWN0LWl0ZW0nKS5sZW5ndGggPiAwKSkge1xuICAgICAgICB2YXIgb3B0aW9uc0h0bWwgPSBxdWFudGl0aWVzLm1hcChmdW5jdGlvbiAocXVhbnRpdHkpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IHF1YW50aXR5LnNlbGVjdGVkID8gJyBzZWxlY3RlZCAnIDogJyc7XG4gICAgICAgICAgICByZXR1cm4gJzxvcHRpb24gdmFsdWU9XCInICsgcXVhbnRpdHkudmFsdWUgKyAnXCIgIGRhdGEtdXJsPVwiJyArIHF1YW50aXR5LnVybCArICdcIicgK1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkICsgJz4nICsgcXVhbnRpdHkudmFsdWUgKyAnPC9vcHRpb24+JztcbiAgICAgICAgfSkuam9pbignJyk7XG4gICAgICAgIGdldFF1YW50aXR5U2VsZWN0b3IoJHByb2R1Y3RDb250YWluZXIpLmVtcHR5KCkuaHRtbChvcHRpb25zSHRtbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIHVwZGF0ZXMgdGhlIHByb2R1Y3QgdmlldyB3aGVuIGEgcHJvZHVjdCBhdHRyaWJ1dGUgaXMgc2VsZWN0ZWQgb3IgZGVzZWxlY3RlZCBvciB3aGVuXG4gKiAgICAgICAgIGNoYW5naW5nIHF1YW50aXR5XG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0ZWRWYWx1ZVVybCAtIHRoZSBVcmwgZm9yIHRoZSBzZWxlY3RlZCB2YXJpYXRpb24gdmFsdWVcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkcHJvZHVjdENvbnRhaW5lciAtIERPTSBlbGVtZW50IGZvciBjdXJyZW50IHByb2R1Y3RcbiAqL1xuZnVuY3Rpb24gYXR0cmlidXRlU2VsZWN0KHNlbGVjdGVkVmFsdWVVcmwsICRwcm9kdWN0Q29udGFpbmVyKSB7XG4gICAgaWYgKHNlbGVjdGVkVmFsdWVVcmwpIHtcbiAgICAgICAgJCgnYm9keScpLnRyaWdnZXIoJ3Byb2R1Y3Q6YmVmb3JlQXR0cmlidXRlU2VsZWN0JyxcbiAgICAgICAgICAgIHsgdXJsOiBzZWxlY3RlZFZhbHVlVXJsLCBjb250YWluZXI6ICRwcm9kdWN0Q29udGFpbmVyIH0pO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IHNlbGVjdGVkVmFsdWVVcmwsXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVWYXJpYW50UmVzcG9uc2UoZGF0YSwgJHByb2R1Y3RDb250YWluZXIpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZU9wdGlvbnMoZGF0YS5wcm9kdWN0Lm9wdGlvbnNIdG1sLCAkcHJvZHVjdENvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgdXBkYXRlUXVhbnRpdGllcyhkYXRhLnByb2R1Y3QucXVhbnRpdGllcywgJHByb2R1Y3RDb250YWluZXIpO1xuICAgICAgICAgICAgICAgICQoJ2JvZHknKS50cmlnZ2VyKCdwcm9kdWN0OmFmdGVyQXR0cmlidXRlU2VsZWN0JyxcbiAgICAgICAgICAgICAgICAgICAgeyBkYXRhOiBkYXRhLCBjb250YWluZXI6ICRwcm9kdWN0Q29udGFpbmVyIH0pO1xuICAgICAgICAgICAgICAgICQuc3Bpbm5lcigpLnN0b3AoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQuc3Bpbm5lcigpLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHJpZXZlcyB1cmwgdG8gdXNlIHdoZW4gYWRkaW5nIGEgcHJvZHVjdCB0byB0aGUgY2FydFxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gLSBUaGUgcHJvdmlkZWQgVVJMIHRvIHVzZSB3aGVuIGFkZGluZyBhIHByb2R1Y3QgdG8gdGhlIGNhcnRcbiAqL1xuZnVuY3Rpb24gZ2V0QWRkVG9DYXJ0VXJsKCkge1xuICAgIHJldHVybiAkKCcuYWRkLXRvLWNhcnQtdXJsJykudmFsKCk7XG59XG5cbi8qKlxuICogUGFyc2VzIHRoZSBodG1sIGZvciBhIG1vZGFsIHdpbmRvd1xuICogQHBhcmFtIHtzdHJpbmd9IGh0bWwgLSByZXByZXNlbnRpbmcgdGhlIGJvZHkgYW5kIGZvb3RlciBvZiB0aGUgbW9kYWwgd2luZG93XG4gKlxuICogQHJldHVybiB7T2JqZWN0fSAtIE9iamVjdCB3aXRoIHByb3BlcnRpZXMgYm9keSBhbmQgZm9vdGVyLlxuICovXG5mdW5jdGlvbiBwYXJzZUh0bWwoaHRtbCkge1xuICAgIHZhciAkaHRtbCA9ICQoJzxkaXY+JykuYXBwZW5kKCQucGFyc2VIVE1MKGh0bWwpKTtcblxuICAgIHZhciBib2R5ID0gJGh0bWwuZmluZCgnLmNob2ljZS1vZi1ib251cy1wcm9kdWN0Jyk7XG4gICAgdmFyIGZvb3RlciA9ICRodG1sLmZpbmQoJy5tb2RhbC1mb290ZXInKS5jaGlsZHJlbigpO1xuXG4gICAgcmV0dXJuIHsgYm9keTogYm9keSwgZm9vdGVyOiBmb290ZXIgfTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgdXJsIHRvIHVzZSB3aGVuIGFkZGluZyBhIHByb2R1Y3QgdG8gdGhlIGNhcnRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGF0YSAtIGRhdGEgb2JqZWN0IHVzZWQgdG8gZmlsbCBpbiBkeW5hbWljIHBvcnRpb25zIG9mIHRoZSBodG1sXG4gKi9cbmZ1bmN0aW9uIGNob29zZUJvbnVzUHJvZHVjdHMoZGF0YSkge1xuICAgICQoJy5tb2RhbC1ib2R5Jykuc3Bpbm5lcigpLnN0YXJ0KCk7XG5cbiAgICBpZiAoJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsJykubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCcpLnJlbW92ZSgpO1xuICAgIH1cbiAgICB2YXIgYm9udXNVcmw7XG4gICAgaWYgKGRhdGEuYm9udXNDaG9pY2VSdWxlQmFzZWQpIHtcbiAgICAgICAgYm9udXNVcmwgPSBkYXRhLnNob3dQcm9kdWN0c1VybFJ1bGVCYXNlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBib251c1VybCA9IGRhdGEuc2hvd1Byb2R1Y3RzVXJsTGlzdEJhc2VkO1xuICAgIH1cblxuICAgIHZhciBodG1sU3RyaW5nID0gJzwhLS0gTW9kYWwgLS0+J1xuICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIGlkPVwiY2hvb3NlQm9udXNQcm9kdWN0TW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiPidcbiAgICAgICAgKyAnPHNwYW4gY2xhc3M9XCJlbnRlci1tZXNzYWdlIHNyLW9ubHlcIiA+PC9zcGFuPidcbiAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZyBjaG9vc2UtYm9udXMtcHJvZHVjdC1kaWFsb2dcIiAnXG4gICAgICAgICsgJ2RhdGEtdG90YWwtcXR5PVwiJyArIGRhdGEubWF4Qm9udXNJdGVtcyArICdcIidcbiAgICAgICAgKyAnZGF0YS1VVUlEPVwiJyArIGRhdGEudXVpZCArICdcIidcbiAgICAgICAgKyAnZGF0YS1wbGlVVUlEPVwiJyArIGRhdGEucGxpVVVJRCArICdcIidcbiAgICAgICAgKyAnZGF0YS1hZGRUb0NhcnRVcmw9XCInICsgZGF0YS5hZGRUb0NhcnRVcmwgKyAnXCInXG4gICAgICAgICsgJ2RhdGEtcGFnZVN0YXJ0PVwiMFwiJ1xuICAgICAgICArICdkYXRhLXBhZ2VTaXplPVwiJyArIGRhdGEucGFnZVNpemUgKyAnXCInXG4gICAgICAgICsgJ2RhdGEtbW9yZVVSTD1cIicgKyBkYXRhLnNob3dQcm9kdWN0c1VybFJ1bGVCYXNlZCArICdcIidcbiAgICAgICAgKyAnZGF0YS1ib251c0Nob2ljZVJ1bGVCYXNlZD1cIicgKyBkYXRhLmJvbnVzQ2hvaWNlUnVsZUJhc2VkICsgJ1wiPidcbiAgICAgICAgKyAnPCEtLSBNb2RhbCBjb250ZW50LS0+J1xuICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPidcbiAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPidcbiAgICAgICAgKyAnICAgIDxzcGFuIGNsYXNzPVwiXCI+JyArIGRhdGEubGFiZWxzLnNlbGVjdHByb2RzICsgJzwvc3Bhbj4nXG4gICAgICAgICsgJyAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlIHB1bGwtcmlnaHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPidcbiAgICAgICAgKyAnICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPidcbiAgICAgICAgKyAnICAgICAgICA8c3BhbiBjbGFzcz1cInNyLW9ubHlcIj4gPC9zcGFuPidcbiAgICAgICAgKyAnICAgIDwvYnV0dG9uPidcbiAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICArICc8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPjwvZGl2PidcbiAgICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPjwvZGl2PidcbiAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICsgJzwvZGl2Pic7XG4gICAgJCgnYm9keScpLmFwcGVuZChodG1sU3RyaW5nKTtcbiAgICAkKCcubW9kYWwtYm9keScpLnNwaW5uZXIoKS5zdGFydCgpO1xuXG4gICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiBib251c1VybCxcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB2YXIgcGFyc2VkSHRtbCA9IHBhcnNlSHRtbChyZXNwb25zZS5yZW5kZXJlZFRlbXBsYXRlKTtcbiAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCAubW9kYWwtYm9keScpLmVtcHR5KCk7XG4gICAgICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwgLmVudGVyLW1lc3NhZ2UnKS50ZXh0KHJlc3BvbnNlLmVudGVyRGlhbG9nTWVzc2FnZSk7XG4gICAgICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwgLm1vZGFsLWhlYWRlciAuY2xvc2UgLnNyLW9ubHknKS50ZXh0KHJlc3BvbnNlLmNsb3NlQnV0dG9uVGV4dCk7XG4gICAgICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwgLm1vZGFsLWJvZHknKS5odG1sKHBhcnNlZEh0bWwuYm9keSk7XG4gICAgICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwgLm1vZGFsLWZvb3RlcicpLmh0bWwocGFyc2VkSHRtbC5mb290ZXIpO1xuICAgICAgICAgICAgJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICAgICAgICAgICQuc3Bpbm5lcigpLnN0b3AoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQuc3Bpbm5lcigpLnN0b3AoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIE1pbmktQ2FydCBxdWFudGl0eSB2YWx1ZSBhZnRlciB0aGUgY3VzdG9tZXIgaGFzIHByZXNzZWQgdGhlIFwiQWRkIHRvIENhcnRcIiBidXR0b25cbiAqIEBwYXJhbSB7c3RyaW5nfSByZXNwb25zZSAtIGFqYXggcmVzcG9uc2UgZnJvbSBjbGlja2luZyB0aGUgYWRkIHRvIGNhcnQgYnV0dG9uXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZVBvc3RDYXJ0QWRkKHJlc3BvbnNlKSB7XG4gICAgJCgnLm1pbmljYXJ0JykudHJpZ2dlcignY291bnQ6dXBkYXRlJywgcmVzcG9uc2UpO1xuICAgIHZhciBtZXNzYWdlVHlwZSA9IHJlc3BvbnNlLmVycm9yID8gJ2FsZXJ0LWRhbmdlcicgOiAnYWxlcnQtc3VjY2Vzcyc7XG4gICAgLy8gc2hvdyBhZGQgdG8gY2FydCB0b2FzdFxuICAgIGlmIChyZXNwb25zZS5uZXdCb251c0Rpc2NvdW50TGluZUl0ZW1cbiAgICAgICAgJiYgT2JqZWN0LmtleXMocmVzcG9uc2UubmV3Qm9udXNEaXNjb3VudExpbmVJdGVtKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgY2hvb3NlQm9udXNQcm9kdWN0cyhyZXNwb25zZS5uZXdCb251c0Rpc2NvdW50TGluZUl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICgkKCcuYWRkLXRvLWNhcnQtbWVzc2FnZXMnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhZGQtdG8tY2FydC1tZXNzYWdlc1wiPjwvZGl2PidcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcuYWRkLXRvLWNhcnQtbWVzc2FnZXMnKS5hcHBlbmQoXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFsZXJ0ICcgKyBtZXNzYWdlVHlwZSArICcgYWRkLXRvLWJhc2tldC1hbGVydCB0ZXh0LWNlbnRlclwiIHJvbGU9XCJhbGVydFwiPidcbiAgICAgICAgICAgICsgcmVzcG9uc2UubWVzc2FnZVxuICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICApO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnLmFkZC10by1iYXNrZXQtYWxlcnQnKS5yZW1vdmUoKTtcbiAgICAgICAgfSwgNTAwMCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgYnVuZGxlIHByb2R1Y3QgaXRlbSBJRCdzIGZvciB0aGUgQ29udHJvbGxlciB0byByZXBsYWNlIGJ1bmRsZSBtYXN0ZXIgcHJvZHVjdFxuICogaXRlbXMgd2l0aCB0aGVpciBzZWxlY3RlZCB2YXJpYW50c1xuICpcbiAqIEByZXR1cm4ge3N0cmluZ1tdfSAtIExpc3Qgb2Ygc2VsZWN0ZWQgYnVuZGxlIHByb2R1Y3QgaXRlbSBJRCdzXG4gKi9cbmZ1bmN0aW9uIGdldENoaWxkUHJvZHVjdHMoKSB7XG4gICAgdmFyIGNoaWxkUHJvZHVjdHMgPSBbXTtcbiAgICAkKCcuYnVuZGxlLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hpbGRQcm9kdWN0cy5wdXNoKHtcbiAgICAgICAgICAgIHBpZDogJCh0aGlzKS5maW5kKCcucHJvZHVjdC1pZCcpLnRleHQoKSxcbiAgICAgICAgICAgIHF1YW50aXR5OiBwYXJzZUludCgkKHRoaXMpLmZpbmQoJ2xhYmVsLnF1YW50aXR5JykuZGF0YSgncXVhbnRpdHknKSwgMTApXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNoaWxkUHJvZHVjdHMubGVuZ3RoID8gSlNPTi5zdHJpbmdpZnkoY2hpbGRQcm9kdWN0cykgOiBbXTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZSBwcm9kdWN0IG9wdGlvbnNcbiAqXG4gKiBAcGFyYW0ge2pRdWVyeX0gJHByb2R1Y3RDb250YWluZXIgLSBET00gZWxlbWVudCBmb3IgY3VycmVudCBwcm9kdWN0XG4gKiBAcmV0dXJuIHtzdHJpbmd9IC0gUHJvZHVjdCBvcHRpb25zIGFuZCB0aGVpciBzZWxlY3RlZCB2YWx1ZXNcbiAqL1xuZnVuY3Rpb24gZ2V0T3B0aW9ucygkcHJvZHVjdENvbnRhaW5lcikge1xuICAgIHZhciBvcHRpb25zID0gJHByb2R1Y3RDb250YWluZXJcbiAgICAgICAgLmZpbmQoJy5wcm9kdWN0LW9wdGlvbicpXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRlbE9wdGlvbiA9ICQodGhpcykuZmluZCgnLm9wdGlvbnMtc2VsZWN0Jyk7XG4gICAgICAgICAgICB2YXIgdXJsVmFsdWUgPSAkZWxPcHRpb24udmFsKCk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRWYWx1ZUlkID0gJGVsT3B0aW9uLmZpbmQoJ29wdGlvblt2YWx1ZT1cIicgKyB1cmxWYWx1ZSArICdcIl0nKVxuICAgICAgICAgICAgICAgIC5kYXRhKCd2YWx1ZS1pZCcpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBvcHRpb25JZDogJCh0aGlzKS5kYXRhKCdvcHRpb24taWQnKSxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFZhbHVlSWQ6IHNlbGVjdGVkVmFsdWVJZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkudG9BcnJheSgpO1xuXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIE1ha2VzIGEgY2FsbCB0byB0aGUgc2VydmVyIHRvIHJlcG9ydCB0aGUgZXZlbnQgb2YgYWRkaW5nIGFuIGl0ZW0gdG8gdGhlIGNhcnRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZyB8IGJvb2xlYW59IHVybCAtIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZW5kIHBvaW50IHRvIGhpdCBzbyB0aGF0IHRoZSBldmVudCBjYW4gYmUgcmVjb3JkZWQsIG9yIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIG1pbmlDYXJ0UmVwb3J0aW5nVXJsKHVybCkge1xuICAgIGlmICh1cmwpIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyByZXBvcnRpbmcgdXJscyBoaXQgb24gdGhlIHNlcnZlclxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gcmVwb3J0aW5nIHVybHMgaGl0IG9uIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBhdHRyaWJ1dGVTZWxlY3Q6IGF0dHJpYnV0ZVNlbGVjdCxcbiAgICBtZXRob2RzOiB7XG4gICAgICAgIGVkaXRCb251c1Byb2R1Y3RzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgY2hvb3NlQm9udXNQcm9kdWN0cyhkYXRhKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBmb2N1c0Nob29zZUJvbnVzUHJvZHVjdE1vZGFsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5vbignc2hvd24uYnMubW9kYWwnLCAnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsJykuc2libGluZ3MoKS5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwgLmNsb3NlJykuZm9jdXMoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIG9uQ2xvc2luZ0Nob29zZUJvbnVzUHJvZHVjdE1vZGFsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5vbignaGlkZGVuLmJzLm1vZGFsJywgJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCcpLnNpYmxpbmdzKCkuYXR0cignYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHRyYXBDaG9vc2VCb251c1Byb2R1Y3RNb2RhbEZvY3VzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2JvZHknKS5vbigna2V5ZG93bicsICcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGZvY3VzUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGV2ZW50OiBlLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lclNlbGVjdG9yOiAnI2Nob29zZUJvbnVzUHJvZHVjdE1vZGFsJyxcbiAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnRTZWxlY3RvcjogJy5jbG9zZScsXG4gICAgICAgICAgICAgICAgbGFzdEVsZW1lbnRTZWxlY3RvcjogJy5hZGQtYm9udXMtcHJvZHVjdHMnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9jdXNIZWxwZXIuc2V0VGFiTmV4dEZvY3VzKGZvY3VzUGFyYW1zKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGNvbG9yQXR0cmlidXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1hdHRyPVwiY29sb3JcIl0gYnV0dG9uJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciAkcHJvZHVjdENvbnRhaW5lciA9ICQodGhpcykuY2xvc2VzdCgnLnNldC1pdGVtJyk7XG4gICAgICAgICAgICBpZiAoISRwcm9kdWN0Q29udGFpbmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICRwcm9kdWN0Q29udGFpbmVyID0gJCh0aGlzKS5jbG9zZXN0KCcucHJvZHVjdC1kZXRhaWwnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXR0cmlidXRlU2VsZWN0KCQodGhpcykuYXR0cignZGF0YS11cmwnKSwgJHByb2R1Y3RDb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgc2VsZWN0QXR0cmlidXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnc2VsZWN0W2NsYXNzKj1cInNlbGVjdC1cIl0sIC5vcHRpb25zLXNlbGVjdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciAkcHJvZHVjdENvbnRhaW5lciA9ICQodGhpcykuY2xvc2VzdCgnLnNldC1pdGVtJyk7XG4gICAgICAgICAgICBpZiAoISRwcm9kdWN0Q29udGFpbmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICRwcm9kdWN0Q29udGFpbmVyID0gJCh0aGlzKS5jbG9zZXN0KCcucHJvZHVjdC1kZXRhaWwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHJpYnV0ZVNlbGVjdChlLmN1cnJlbnRUYXJnZXQudmFsdWUsICRwcm9kdWN0Q29udGFpbmVyKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGF2YWlsYWJpbGl0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJy5xdWFudGl0eS1zZWxlY3QnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgJHByb2R1Y3RDb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0LWRldGFpbCcpO1xuICAgICAgICAgICAgaWYgKCEkcHJvZHVjdENvbnRhaW5lci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkcHJvZHVjdENvbnRhaW5lciA9ICQodGhpcykuY2xvc2VzdCgnLm1vZGFsLWNvbnRlbnQnKS5maW5kKCcucHJvZHVjdC1xdWlja3ZpZXcnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCQoJy5idW5kbGUtaXRlbXMnLCAkcHJvZHVjdENvbnRhaW5lcikubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlU2VsZWN0KCQoZS5jdXJyZW50VGFyZ2V0KS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5kYXRhKCd1cmwnKSxcbiAgICAgICAgICAgICAgICAgICAgJHByb2R1Y3RDb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgYWRkVG9DYXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdidXR0b24uYWRkLXRvLWNhcnQsIGJ1dHRvbi5hZGQtdG8tY2FydC1nbG9iYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYWRkVG9DYXJ0VXJsO1xuICAgICAgICAgICAgdmFyIHBpZDtcbiAgICAgICAgICAgIHZhciBwaWRzT2JqO1xuICAgICAgICAgICAgdmFyIHNldFBpZHM7XG5cbiAgICAgICAgICAgICQoJ2JvZHknKS50cmlnZ2VyKCdwcm9kdWN0OmJlZm9yZUFkZFRvQ2FydCcsIHRoaXMpO1xuXG4gICAgICAgICAgICBpZiAoJCgnLnNldC1pdGVtcycpLmxlbmd0aCAmJiAkKHRoaXMpLmhhc0NsYXNzKCdhZGQtdG8tY2FydC1nbG9iYWwnKSkge1xuICAgICAgICAgICAgICAgIHNldFBpZHMgPSBbXTtcblxuICAgICAgICAgICAgICAgICQoJy5wcm9kdWN0LWRldGFpbCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ3Byb2R1Y3Qtc2V0LWRldGFpbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQaWRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpZDogJCh0aGlzKS5maW5kKCcucHJvZHVjdC1pZCcpLnRleHQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdHk6ICQodGhpcykuZmluZCgnLnF1YW50aXR5LXNlbGVjdCcpLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGdldE9wdGlvbnMoJCh0aGlzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcGlkc09iaiA9IEpTT04uc3RyaW5naWZ5KHNldFBpZHMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwaWQgPSBnZXRQaWRWYWx1ZSgkKHRoaXMpKTtcblxuICAgICAgICAgICAgdmFyICRwcm9kdWN0Q29udGFpbmVyID0gJCh0aGlzKS5jbG9zZXN0KCcucHJvZHVjdC1kZXRhaWwnKTtcbiAgICAgICAgICAgIGlmICghJHByb2R1Y3RDb250YWluZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgJHByb2R1Y3RDb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5xdWljay12aWV3LWRpYWxvZycpLmZpbmQoJy5wcm9kdWN0LWRldGFpbCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhZGRUb0NhcnRVcmwgPSBnZXRBZGRUb0NhcnRVcmwoKTtcblxuICAgICAgICAgICAgdmFyIGZvcm0gPSB7XG4gICAgICAgICAgICAgICAgcGlkOiBwaWQsXG4gICAgICAgICAgICAgICAgcGlkc09iajogcGlkc09iaixcbiAgICAgICAgICAgICAgICBjaGlsZFByb2R1Y3RzOiBnZXRDaGlsZFByb2R1Y3RzKCksXG4gICAgICAgICAgICAgICAgcXVhbnRpdHk6IGdldFF1YW50aXR5U2VsZWN0ZWQoJCh0aGlzKSlcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZvcm0gPSBjbHlkZVdpZGdldC5nZXRTZWxlY3RlZENseWRlQ29udHJhY3QoZm9ybSk7XG5cbiAgICAgICAgICAgIGlmICghJCgnLmJ1bmRsZS1pdGVtJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZm9ybS5vcHRpb25zID0gZ2V0T3B0aW9ucygkcHJvZHVjdENvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQodGhpcykudHJpZ2dlcigndXBkYXRlQWRkVG9DYXJ0Rm9ybURhdGEnLCBmb3JtKTtcbiAgICAgICAgICAgIGlmIChhZGRUb0NhcnRVcmwpIHtcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IGFkZFRvQ2FydFVybCxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGZvcm0sXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVQb3N0Q2FydEFkZChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS50cmlnZ2VyKCdwcm9kdWN0OmFmdGVyQWRkVG9DYXJ0JywgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLnNwaW5uZXIoKS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pQ2FydFJlcG9ydGluZ1VybChkYXRhLnJlcG9ydGluZ1VSTCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLnNwaW5uZXIoKS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBzZWxlY3RCb251c1Byb2R1Y3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zZWxlY3QtYm9udXMtcHJvZHVjdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkY2hvaWNlT2ZCb251c1Byb2R1Y3QgPSAkKHRoaXMpLnBhcmVudHMoJy5jaG9pY2Utb2YtYm9udXMtcHJvZHVjdCcpO1xuICAgICAgICAgICAgdmFyIHBpZCA9ICQodGhpcykuZGF0YSgncGlkJyk7XG4gICAgICAgICAgICB2YXIgbWF4UGlkcyA9ICQoJy5jaG9vc2UtYm9udXMtcHJvZHVjdC1kaWFsb2cnKS5kYXRhKCd0b3RhbC1xdHknKTtcbiAgICAgICAgICAgIHZhciBzdWJtaXR0ZWRRdHkgPSBwYXJzZUludCgkY2hvaWNlT2ZCb251c1Byb2R1Y3QuZmluZCgnLmJvbnVzLXF1YW50aXR5LXNlbGVjdCcpLnZhbCgpLCAxMCk7XG4gICAgICAgICAgICB2YXIgdG90YWxRdHkgPSAwO1xuICAgICAgICAgICAgJC5lYWNoKCQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCAuc2VsZWN0ZWQtYm9udXMtcHJvZHVjdHMgLnNlbGVjdGVkLXBpZCcpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdG90YWxRdHkgKz0gJCh0aGlzKS5kYXRhKCdxdHknKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdG90YWxRdHkgKz0gc3VibWl0dGVkUXR5O1xuICAgICAgICAgICAgdmFyIG9wdGlvbklEID0gJGNob2ljZU9mQm9udXNQcm9kdWN0LmZpbmQoJy5wcm9kdWN0LW9wdGlvbicpLmRhdGEoJ29wdGlvbi1pZCcpO1xuICAgICAgICAgICAgdmFyIHZhbHVlSWQgPSAkY2hvaWNlT2ZCb251c1Byb2R1Y3QuZmluZCgnLm9wdGlvbnMtc2VsZWN0IG9wdGlvbjpzZWxlY3RlZCcpLmRhdGEoJ3ZhbHVlSWQnKTtcbiAgICAgICAgICAgIGlmICh0b3RhbFF0eSA8PSBtYXhQaWRzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkQm9udXNQcm9kdWN0SHRtbCA9ICcnXG4gICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cInNlbGVjdGVkLXBpZCByb3dcIiAnXG4gICAgICAgICAgICAgICAgKyAnZGF0YS1waWQ9XCInICsgcGlkICsgJ1wiJ1xuICAgICAgICAgICAgICAgICsgJ2RhdGEtcXR5PVwiJyArIHN1Ym1pdHRlZFF0eSArICdcIidcbiAgICAgICAgICAgICAgICArICdkYXRhLW9wdGlvbklEPVwiJyArIChvcHRpb25JRCB8fCAnJykgKyAnXCInXG4gICAgICAgICAgICAgICAgKyAnZGF0YS1vcHRpb24tc2VsZWN0ZWQtdmFsdWU9XCInICsgKHZhbHVlSWQgfHwgJycpICsgJ1wiJ1xuICAgICAgICAgICAgICAgICsgJz4nXG4gICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cImNvbC1zbS0xMSBjb2wtOSBib251cy1wcm9kdWN0LW5hbWVcIiA+J1xuICAgICAgICAgICAgICAgICsgJGNob2ljZU9mQm9udXNQcm9kdWN0LmZpbmQoJy5wcm9kdWN0LW5hbWUnKS5odG1sKClcbiAgICAgICAgICAgICAgICArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cImNvbC0xXCI+PGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L2Rpdj4nXG4gICAgICAgICAgICAgICAgKyAnPC9kaXY+J1xuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwgLnNlbGVjdGVkLWJvbnVzLXByb2R1Y3RzJykuYXBwZW5kKHNlbGVjdGVkQm9udXNQcm9kdWN0SHRtbCk7XG4gICAgICAgICAgICAgICAgJCgnLnByZS1jYXJ0LXByb2R1Y3RzJykuaHRtbCh0b3RhbFF0eSk7XG4gICAgICAgICAgICAgICAgJCgnLnNlbGVjdGVkLWJvbnVzLXByb2R1Y3RzIC5ib251cy1zdW1tYXJ5JykucmVtb3ZlQ2xhc3MoJ2FsZXJ0LWRhbmdlcicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuc2VsZWN0ZWQtYm9udXMtcHJvZHVjdHMgLmJvbnVzLXN1bW1hcnknKS5hZGRDbGFzcygnYWxlcnQtZGFuZ2VyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVtb3ZlQm9udXNQcm9kdWN0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2VsZWN0ZWQtcGlkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHZhciAkc2VsZWN0ZWQgPSAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwgLnNlbGVjdGVkLWJvbnVzLXByb2R1Y3RzIC5zZWxlY3RlZC1waWQnKTtcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICBpZiAoJHNlbGVjdGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICRzZWxlY3RlZC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gcGFyc2VJbnQoJCh0aGlzKS5kYXRhKCdxdHknKSwgMTApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKCcucHJlLWNhcnQtcHJvZHVjdHMnKS5odG1sKGNvdW50KTtcbiAgICAgICAgICAgICQoJy5zZWxlY3RlZC1ib251cy1wcm9kdWN0cyAuYm9udXMtc3VtbWFyeScpLnJlbW92ZUNsYXNzKCdhbGVydC1kYW5nZXInKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBlbmFibGVCb251c1Byb2R1Y3RTZWxlY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLm9uKCdib251c3Byb2R1Y3Q6dXBkYXRlU2VsZWN0QnV0dG9uJywgZnVuY3Rpb24gKGUsIHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkKCdidXR0b24uc2VsZWN0LWJvbnVzLXByb2R1Y3QnLCByZXNwb25zZS4kcHJvZHVjdENvbnRhaW5lcikuYXR0cignZGlzYWJsZWQnLFxuICAgICAgICAgICAgICAgICghcmVzcG9uc2UucHJvZHVjdC5yZWFkeVRvT3JkZXIgfHwgIXJlc3BvbnNlLnByb2R1Y3QuYXZhaWxhYmxlKSk7XG4gICAgICAgICAgICB2YXIgcGlkID0gcmVzcG9uc2UucHJvZHVjdC5pZDtcbiAgICAgICAgICAgICQoJ2J1dHRvbi5zZWxlY3QtYm9udXMtcHJvZHVjdCcsIHJlc3BvbnNlLiRwcm9kdWN0Q29udGFpbmVyKS5kYXRhKCdwaWQnLCBwaWQpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHNob3dNb3JlQm9udXNQcm9kdWN0czogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNob3ctbW9yZS1ib251cy1wcm9kdWN0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSAkKHRoaXMpLmRhdGEoJ3VybCcpO1xuICAgICAgICAgICAgJCgnLm1vZGFsLWNvbnRlbnQnKS5zcGlubmVyKCkuc3RhcnQoKTtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaHRtbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyc2VkSHRtbCA9IHBhcnNlSHRtbChodG1sKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLm1vZGFsLWJvZHknKS5hcHBlbmQocGFyc2VkSHRtbC5ib2R5KTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNob3ctbW9yZS1ib251cy1wcm9kdWN0czpmaXJzdCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcubW9kYWwtY29udGVudCcpLnNwaW5uZXIoKS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcubW9kYWwtY29udGVudCcpLnNwaW5uZXIoKS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgYWRkQm9udXNQcm9kdWN0c1RvQ2FydDogZnVuY3Rpb24gKCkge1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmFkZC1ib251cy1wcm9kdWN0cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkcmVhZHlUb09yZGVyQm9udXNQcm9kdWN0cyA9ICQoJy5jaG9vc2UtYm9udXMtcHJvZHVjdC1kaWFsb2cgLnNlbGVjdGVkLXBpZCcpO1xuICAgICAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gJz9waWRzPSc7XG4gICAgICAgICAgICB2YXIgdXJsID0gJCgnLmNob29zZS1ib251cy1wcm9kdWN0LWRpYWxvZycpLmRhdGEoJ2FkZHRvY2FydHVybCcpO1xuICAgICAgICAgICAgdmFyIHBpZHNPYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgYm9udXNQcm9kdWN0czogW11cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICQuZWFjaCgkcmVhZHlUb09yZGVyQm9udXNQcm9kdWN0cywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBxdHlPcHRpb24gPVxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludCgkKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZGF0YSgncXR5JyksIDEwKTtcblxuICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChxdHlPcHRpb24gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ29wdGlvbmlkJykgJiYgJCh0aGlzKS5kYXRhKCdvcHRpb24tc2VsZWN0ZWQtdmFsdWUnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24ub3B0aW9uSWQgPSAkKHRoaXMpLmRhdGEoJ29wdGlvbmlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24ucHJvZHVjdElkID0gJCh0aGlzKS5kYXRhKCdwaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZFZhbHVlSWQgPSAkKHRoaXMpLmRhdGEoJ29wdGlvbi1zZWxlY3RlZC12YWx1ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBpZHNPYmplY3QuYm9udXNQcm9kdWN0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpZDogJCh0aGlzKS5kYXRhKCdwaWQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF0eTogcXR5T3B0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW29wdGlvbl1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHBpZHNPYmplY3QudG90YWxRdHkgPSBwYXJzZUludCgkKCcucHJlLWNhcnQtcHJvZHVjdHMnKS5odG1sKCksIDEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9IEpTT04uc3RyaW5naWZ5KHBpZHNPYmplY3QpO1xuICAgICAgICAgICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZyArICcmdXVpZD0nICsgJCgnLmNob29zZS1ib251cy1wcm9kdWN0LWRpYWxvZycpLmRhdGEoJ3V1aWQnKTtcbiAgICAgICAgICAgIHF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmcgKyAnJnBsaXV1aWQ9JyArICQoJy5jaG9vc2UtYm9udXMtcHJvZHVjdC1kaWFsb2cnKS5kYXRhKCdwbGl1dWlkJyk7XG4gICAgICAgICAgICAkLnNwaW5uZXIoKS5zdGFydCgpO1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCArIHF1ZXJ5U3RyaW5nLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICQuc3Bpbm5lcigpLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNjaG9vc2VCb251c1Byb2R1Y3RNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLmFkZC10by1jYXJ0LW1lc3NhZ2VzJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImFkZC10by1jYXJ0LW1lc3NhZ2VzXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWRkLXRvLWNhcnQtbWVzc2FnZXMnKS5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXIgYWRkLXRvLWJhc2tldC1hbGVydCB0ZXh0LWNlbnRlclwiJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgJyByb2xlPVwiYWxlcnRcIj4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBkYXRhLmVycm9yTWVzc2FnZSArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFkZC10by1iYXNrZXQtYWxlcnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmNvbmZpZ3VyZS1ib251cy1wcm9kdWN0LWF0dHJpYnV0ZXMnKS5odG1sKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmJvbnVzLXByb2R1Y3RzLXN0ZXAyJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbi14bC1kb3duJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjY2hvb3NlQm9udXNQcm9kdWN0TW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLmFkZC10by1jYXJ0LW1lc3NhZ2VzJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImFkZC10by1jYXJ0LW1lc3NhZ2VzXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubWluaWNhcnQtcXVhbnRpdHknKS5odG1sKGRhdGEudG90YWxRdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFkZC10by1jYXJ0LW1lc3NhZ2VzJykuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2VzcyBhZGQtdG8tYmFza2V0LWFsZXJ0IHRleHQtY2VudGVyXCInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnIHJvbGU9XCJhbGVydFwiPidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGRhdGEubXNnU3VjY2VzcyArICc8L2Rpdj4nXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFkZC10by1iYXNrZXQtYWxlcnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLmNhcnQtcGFnZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5zcGlubmVyKCkuc3RvcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgZ2V0UGlkVmFsdWU6IGdldFBpZFZhbHVlLFxuICAgIGdldFF1YW50aXR5U2VsZWN0ZWQ6IGdldFF1YW50aXR5U2VsZWN0ZWQsXG4gICAgbWluaUNhcnRSZXBvcnRpbmdVcmw6IG1pbmlDYXJ0UmVwb3J0aW5nVXJsXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///17\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = {\n    setTabNextFocus: function (focusParams) {\n        var KEYCODE_TAB = 9;\n        var isTabPressed = (focusParams.event.key === 'Tab' || focusParams.event.keyCode === KEYCODE_TAB);\n\n        if (!isTabPressed) {\n            return;\n        }\n\n        var firstFocusableEl = $(focusParams.containerSelector + ' ' + focusParams.firstElementSelector);\n        var lastFocusableEl = $(focusParams.containerSelector + ' ' + focusParams.lastElementSelector);\n\n        if ($(focusParams.containerSelector + ' ' + focusParams.lastElementSelector).is(':disabled')) {\n            lastFocusableEl = $(focusParams.containerSelector + ' ' + focusParams.nextToLastElementSelector);\n            if ($('.product-quickview.product-set').length > 0) {\n                var linkElements = $(focusParams.containerSelector + ' a#fa-link.share-icons');\n                lastFocusableEl = linkElements[linkElements.length - 1];\n            }\n        }\n\n        if (focusParams.event.shiftKey) /* shift + tab */ {\n            if ($(':focus').is(firstFocusableEl)) {\n                lastFocusableEl.focus();\n                focusParams.event.preventDefault();\n            }\n        } else /* tab */ {\n            if ($(':focus').is(lastFocusableEl)) { // eslint-disable-line\n                firstFocusableEl.focus();\n                focusParams.event.preventDefault();\n            }\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zdG9yZWZyb250LXJlZmVyZW5jZS1hcmNoaXRlY3R1cmUvY2FydHJpZGdlcy9hcHBfc3RvcmVmcm9udF9iYXNlL2NhcnRyaWRnZS9jbGllbnQvZGVmYXVsdC9qcy9jb21wb25lbnRzL2ZvY3VzLmpzP2FiNmQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjE4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBzZXRUYWJOZXh0Rm9jdXM6IGZ1bmN0aW9uIChmb2N1c1BhcmFtcykge1xuICAgICAgICB2YXIgS0VZQ09ERV9UQUIgPSA5O1xuICAgICAgICB2YXIgaXNUYWJQcmVzc2VkID0gKGZvY3VzUGFyYW1zLmV2ZW50LmtleSA9PT0gJ1RhYicgfHwgZm9jdXNQYXJhbXMuZXZlbnQua2V5Q29kZSA9PT0gS0VZQ09ERV9UQUIpO1xuXG4gICAgICAgIGlmICghaXNUYWJQcmVzc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmlyc3RGb2N1c2FibGVFbCA9ICQoZm9jdXNQYXJhbXMuY29udGFpbmVyU2VsZWN0b3IgKyAnICcgKyBmb2N1c1BhcmFtcy5maXJzdEVsZW1lbnRTZWxlY3Rvcik7XG4gICAgICAgIHZhciBsYXN0Rm9jdXNhYmxlRWwgPSAkKGZvY3VzUGFyYW1zLmNvbnRhaW5lclNlbGVjdG9yICsgJyAnICsgZm9jdXNQYXJhbXMubGFzdEVsZW1lbnRTZWxlY3Rvcik7XG5cbiAgICAgICAgaWYgKCQoZm9jdXNQYXJhbXMuY29udGFpbmVyU2VsZWN0b3IgKyAnICcgKyBmb2N1c1BhcmFtcy5sYXN0RWxlbWVudFNlbGVjdG9yKS5pcygnOmRpc2FibGVkJykpIHtcbiAgICAgICAgICAgIGxhc3RGb2N1c2FibGVFbCA9ICQoZm9jdXNQYXJhbXMuY29udGFpbmVyU2VsZWN0b3IgKyAnICcgKyBmb2N1c1BhcmFtcy5uZXh0VG9MYXN0RWxlbWVudFNlbGVjdG9yKTtcbiAgICAgICAgICAgIGlmICgkKCcucHJvZHVjdC1xdWlja3ZpZXcucHJvZHVjdC1zZXQnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmtFbGVtZW50cyA9ICQoZm9jdXNQYXJhbXMuY29udGFpbmVyU2VsZWN0b3IgKyAnIGEjZmEtbGluay5zaGFyZS1pY29ucycpO1xuICAgICAgICAgICAgICAgIGxhc3RGb2N1c2FibGVFbCA9IGxpbmtFbGVtZW50c1tsaW5rRWxlbWVudHMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm9jdXNQYXJhbXMuZXZlbnQuc2hpZnRLZXkpIC8qIHNoaWZ0ICsgdGFiICovIHtcbiAgICAgICAgICAgIGlmICgkKCc6Zm9jdXMnKS5pcyhmaXJzdEZvY3VzYWJsZUVsKSkge1xuICAgICAgICAgICAgICAgIGxhc3RGb2N1c2FibGVFbC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGZvY3VzUGFyYW1zLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSAvKiB0YWIgKi8ge1xuICAgICAgICAgICAgaWYgKCQoJzpmb2N1cycpLmlzKGxhc3RGb2N1c2FibGVFbCkpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgICAgIGZpcnN0Rm9jdXNhYmxlRWwuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICBmb2N1c1BhcmFtcy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///18\n")}]);